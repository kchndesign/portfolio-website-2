/*! For license information please see main.31e57d03.js.LICENSE.txt */
!function(){var e={757:function(e,t,n){e.exports=n(727)},694:function(e,t){var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var a=typeof n;if("string"===a||"number"===a)e.push(n);else if(Array.isArray(n)){if(n.length){var o=i.apply(null,n);o&&e.push(o)}}else if("object"===a)if(n.toString===Object.prototype.toString)for(var u in n)r.call(n,u)&&n[u]&&e.push(u);else e.push(n.toString())}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()},888:function(e,t,n){"use strict";var r=n(47);function i(){}function a(){}a.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,a,o){if(o!==r){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:i};return n.PropTypes=n,n}},7:function(e,t,n){e.exports=n(888)()},47:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},463:function(e,t,n){"use strict";var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function s(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(p,e)||!f.call(d,e)&&(h.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var k=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),A=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),_=Symbol.for("react.provider"),I=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var L=Symbol.iterator;function R(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=L&&e[L]||e["@@iterator"])?e:null}var M,F=Object.assign;function j(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var U=!1;function V(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u]){var s="\n"+i[o].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=o&&0<=u);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?j(e):""}function B(e){switch(e.tag){case 5:return j(e.type);case 16:return j("Lazy");case 13:return j("Suspense");case 19:return j("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function q(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case A:return"Portal";case E:return"Profiler";case x:return"StrictMode";case C:return"Suspense";case N:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case I:return(e.displayName||"Context")+".Consumer";case _:return(e._context.displayName||"Context")+".Provider";case T:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case D:return null!==(t=e.displayName||null)?t:q(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return q(e(t))}catch(n){}}return null}function z(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return q(t);case 8:return t===x?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function K(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function H(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function J(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=K(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function Z(e,t){X(e,t);var n=K(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,K(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function $(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+K(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:K(n)}}function ae(e,t){var n=K(t.value),r=K(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ue(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ue(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,fe=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var ye=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ke=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ae=null,Se=null,xe=null;function Ee(e){if(e=mi(e)){if("function"!==typeof Ae)throw Error(a(280));var t=e.stateNode;t&&(t=gi(t),Ae(e.stateNode,e.type,t))}}function _e(e){Se?xe?xe.push(e):xe=[e]:Se=e}function Ie(){if(Se){var e=Se,t=xe;if(xe=Se=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Te(e,t){return e(t)}function Ce(){}var Ne=!1;function De(e,t,n){if(Ne)return e(t,n);Ne=!0;try{return Te(e,t,n)}finally{Ne=!1,(null!==Se||null!==xe)&&(Ce(),Ie())}}function Pe(e,t){var n=e.stateNode;if(null===n)return null;var r=gi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Oe=!1;if(l)try{var Le={};Object.defineProperty(Le,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",Le,Le),window.removeEventListener("test",Le,Le)}catch(le){Oe=!1}function Re(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Me=!1,Fe=null,je=!1,Ue=null,Ve={onError:function(e){Me=!0,Fe=e}};function Be(e,t,n,r,i,a,o,u,s){Me=!1,Fe=null,Re.apply(Ve,arguments)}function qe(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function ze(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ke(e){if(qe(e)!==e)throw Error(a(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=qe(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ke(i),e;if(o===r)return Ke(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=o;break}if(s===r){u=!0,r=i,n=o;break}s=s.sibling}if(!u){for(s=o.child;s;){if(s===n){u=!0,n=o,r=i;break}if(s===r){u=!0,r=o,n=i;break}s=s.sibling}if(!u)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?He(e):null}function He(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=He(e);if(null!==t)return t;e=e.sibling}return null}var Ge=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Je=i.unstable_shouldYield,Ye=i.unstable_requestPaint,Xe=i.unstable_now,Ze=i.unstable_getCurrentPriorityLevel,$e=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(ut(e)/st|0)|0},ut=Math.log,st=Math.LN2;var ct=64,lt=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var u=o&~i;0!==u?r=ft(u):0!==(a&=o)&&(r=ft(a))}else 0!==(o=n&~i)?r=ft(o):0!==a&&(r=ft(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function mt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var gt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var kt,wt,At,St,xt,Et=!1,_t=[],It=null,Tt=null,Ct=null,Nt=new Map,Dt=new Map,Pt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":It=null;break;case"dragenter":case"dragleave":Tt=null;break;case"mouseover":case"mouseout":Ct=null;break;case"pointerover":case"pointerout":Nt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dt.delete(t.pointerId)}}function Rt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=mi(t))&&wt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Mt(e){var t=vi(e.target);if(null!==t){var n=qe(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=ze(n)))return e.blockedOn=t,void xt(e.priority,(function(){At(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Gt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=mi(n))&&wt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);ke=r,n.target.dispatchEvent(r),ke=null,t.shift()}return!0}function jt(e,t,n){Ft(e)&&n.delete(t)}function Ut(){Et=!1,null!==It&&Ft(It)&&(It=null),null!==Tt&&Ft(Tt)&&(Tt=null),null!==Ct&&Ft(Ct)&&(Ct=null),Nt.forEach(jt),Dt.forEach(jt)}function Vt(e,t){e.blockedOn===t&&(e.blockedOn=null,Et||(Et=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Ut)))}function Bt(e){function t(t){return Vt(t,e)}if(0<_t.length){Vt(_t[0],e);for(var n=1;n<_t.length;n++){var r=_t[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==It&&Vt(It,e),null!==Tt&&Vt(Tt,e),null!==Ct&&Vt(Ct,e),Nt.forEach(t),Dt.forEach(t),n=0;n<Pt.length;n++)(r=Pt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Pt.length&&null===(n=Pt[0]).blockedOn;)Mt(n),null===n.blockedOn&&Pt.shift()}var qt=k.ReactCurrentBatchConfig;function zt(e,t,n,r){var i=gt,a=qt.transition;qt.transition=null;try{gt=1,Wt(e,t,n,r)}finally{gt=i,qt.transition=a}}function Kt(e,t,n,r){var i=gt,a=qt.transition;qt.transition=null;try{gt=4,Wt(e,t,n,r)}finally{gt=i,qt.transition=a}}function Wt(e,t,n,r){var i=Gt(e,t,n,r);if(null===i)qr(e,t,r,Ht,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return It=Rt(It,e,t,n,r,i),!0;case"dragenter":return Tt=Rt(Tt,e,t,n,r,i),!0;case"mouseover":return Ct=Rt(Ct,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Nt.set(a,Rt(Nt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Dt.set(a,Rt(Dt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var a=mi(i);if(null!==a&&kt(a),null===(a=Gt(e,t,n,r))&&qr(e,t,r,Ht,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else qr(e,t,r,null,n)}var Ht=null;function Gt(e,t,n,r){if(Ht=null,null!==(e=vi(e=we(r))))if(null===(t=qe(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=ze(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ht=e,null}function Qt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ze()){case $e:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,Yt=null,Xt=null;function Zt(){if(Xt)return Xt;var e,t,n=Yt,r=n.length,i="value"in Jt?Jt.value:Jt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Xt=i.slice(e,1<t?1-t:void 0)}function $t(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function en(){return!0}function tn(){return!1}function nn(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?en:tn,this.isPropagationStopped=tn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=en)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=en)},persist:function(){},isPersistent:en}),t}var rn,an,on,un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sn=nn(un),cn=F({},un,{view:0,detail:0}),ln=nn(cn),fn=F({},cn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==on&&(on&&"mousemove"===e.type?(rn=e.screenX-on.screenX,an=e.screenY-on.screenY):an=rn=0,on=e),rn)},movementY:function(e){return"movementY"in e?e.movementY:an}}),hn=nn(fn),dn=nn(F({},fn,{dataTransfer:0})),pn=nn(F({},cn,{relatedTarget:0})),vn=nn(F({},un,{animationName:0,elapsedTime:0,pseudoElement:0})),mn=F({},un,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),yn=nn(mn),gn=nn(F({},un,{data:0})),bn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function An(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=wn[e])&&!!t[e]}function Sn(){return An}var xn=F({},cn,{key:function(e){if(e.key){var t=bn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=$t(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?kn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sn,charCode:function(e){return"keypress"===e.type?$t(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?$t(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),En=nn(xn),_n=nn(F({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),In=nn(F({},cn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sn})),Tn=nn(F({},un,{propertyName:0,elapsedTime:0,pseudoElement:0})),Cn=F({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Nn=nn(Cn),Dn=[9,13,27,32],Pn=l&&"CompositionEvent"in window,On=null;l&&"documentMode"in document&&(On=document.documentMode);var Ln=l&&"TextEvent"in window&&!On,Rn=l&&(!Pn||On&&8<On&&11>=On),Mn=String.fromCharCode(32),Fn=!1;function jn(e,t){switch(e){case"keyup":return-1!==Dn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Un(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Vn=!1;var Bn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Bn[e.type]:"textarea"===t}function zn(e,t,n,r){_e(r),0<(t=Kr(t,"onChange")).length&&(n=new sn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kn=null,Wn=null;function Hn(e){Mr(e,0)}function Gn(e){if(G(yi(e)))return e}function Qn(e,t){if("change"===e)return t}var Jn=!1;if(l){var Yn;if(l){var Xn="oninput"in document;if(!Xn){var Zn=document.createElement("div");Zn.setAttribute("oninput","return;"),Xn="function"===typeof Zn.oninput}Yn=Xn}else Yn=!1;Jn=Yn&&(!document.documentMode||9<document.documentMode)}function $n(){Kn&&(Kn.detachEvent("onpropertychange",er),Wn=Kn=null)}function er(e){if("value"===e.propertyName&&Gn(Wn)){var t=[];zn(t,Wn,e,we(e)),De(Hn,t)}}function tr(e,t,n){"focusin"===e?($n(),Wn=n,(Kn=t).attachEvent("onpropertychange",er)):"focusout"===e&&$n()}function nr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Gn(Wn)}function rr(e,t){if("click"===e)return Gn(t)}function ir(e,t){if("input"===e||"change"===e)return Gn(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function or(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!f.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function ur(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function sr(e,t){var n,r=ur(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ur(r)}}function cr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?cr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function lr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function hr(e){var t=lr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&cr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=sr(n,a);var o=sr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var dr=l&&"documentMode"in document&&11>=document.documentMode,pr=null,vr=null,mr=null,yr=!1;function gr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;yr||null==pr||pr!==Q(r)||("selectionStart"in(r=pr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},mr&&or(mr,r)||(mr=r,0<(r=Kr(vr,"onSelect")).length&&(t=new sn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=pr)))}function br(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var kr={animationend:br("Animation","AnimationEnd"),animationiteration:br("Animation","AnimationIteration"),animationstart:br("Animation","AnimationStart"),transitionend:br("Transition","TransitionEnd")},wr={},Ar={};function Sr(e){if(wr[e])return wr[e];if(!kr[e])return e;var t,n=kr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ar)return wr[e]=n[t];return e}l&&(Ar=document.createElement("div").style,"AnimationEvent"in window||(delete kr.animationend.animation,delete kr.animationiteration.animation,delete kr.animationstart.animation),"TransitionEvent"in window||delete kr.transitionend.transition);var xr=Sr("animationend"),Er=Sr("animationiteration"),_r=Sr("animationstart"),Ir=Sr("transitionend"),Tr=new Map,Cr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Nr(e,t){Tr.set(e,t),s(t,[e])}for(var Dr=0;Dr<Cr.length;Dr++){var Pr=Cr[Dr];Nr(Pr.toLowerCase(),"on"+(Pr[0].toUpperCase()+Pr.slice(1)))}Nr(xr,"onAnimationEnd"),Nr(Er,"onAnimationIteration"),Nr(_r,"onAnimationStart"),Nr("dblclick","onDoubleClick"),Nr("focusin","onFocus"),Nr("focusout","onBlur"),Nr(Ir,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Or="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Or));function Rr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,u,s,c){if(Be.apply(this,arguments),Me){if(!Me)throw Error(a(198));var l=Fe;Me=!1,Fe=null,je||(je=!0,Ue=l)}}(r,t,void 0,e),e.currentTarget=null}function Mr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Rr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Rr(i,u,c),a=s}}}if(je)throw e=Ue,je=!1,Ue=null,e}function Fr(e,t){var n=t[hi];void 0===n&&(n=t[hi]=new Set);var r=e+"__bubble";n.has(r)||(Br(t,e,2,!1),n.add(r))}function jr(e,t,n){var r=0;t&&(r|=4),Br(n,e,r,t)}var Ur="_reactListening"+Math.random().toString(36).slice(2);function Vr(e){if(!e[Ur]){e[Ur]=!0,o.forEach((function(t){"selectionchange"!==t&&(Lr.has(t)||jr(t,!1,e),jr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Ur]||(t[Ur]=!0,jr("selectionchange",!1,t))}}function Br(e,t,n,r){switch(Qt(t)){case 1:var i=zt;break;case 4:i=Kt;break;default:i=Wt}n=i.bind(null,t,n,e),i=void 0,!Oe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function qr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=vi(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}De((function(){var r=a,i=we(n),o=[];e:{var u=Tr.get(e);if(void 0!==u){var s=sn,c=e;switch(e){case"keypress":if(0===$t(n))break e;case"keydown":case"keyup":s=En;break;case"focusin":c="focus",s=pn;break;case"focusout":c="blur",s=pn;break;case"beforeblur":case"afterblur":s=pn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=hn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=dn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=In;break;case xr:case Er:case _r:s=vn;break;case Ir:s=Tn;break;case"scroll":s=ln;break;case"wheel":s=Nn;break;case"copy":case"cut":case"paste":s=yn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=_n}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==u?u+"Capture":null:u;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=Pe(p,h))&&l.push(zr(p,v,d)))),f)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||n===ke||!(c=n.relatedTarget||n.fromElement)||!vi(c)&&!c[fi])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?vi(c):null)&&(c!==(f=qe(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=hn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=_n,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==s?u:yi(s),d=null==c?u:yi(c),(u=new l(v,p+"leave",s,n,i)).target=f,u.relatedTarget=d,v=null,vi(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,s&&c)e:{for(h=c,p=0,d=l=s;d;d=Wr(d))p++;for(d=0,v=h;v;v=Wr(v))d++;for(;0<p-d;)l=Wr(l),p--;for(;0<d-p;)h=Wr(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Wr(l),h=Wr(h)}l=null}else l=null;null!==s&&Hr(o,u,s,l,!1),null!==c&&null!==f&&Hr(o,f,c,l,!0)}if("select"===(s=(u=r?yi(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var m=Qn;else if(qn(u))if(Jn)m=ir;else{m=nr;var y=tr}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(m=rr);switch(m&&(m=m(e,r))?zn(o,m,n,i):(y&&y(e,u,r),"focusout"===e&&(y=u._wrapperState)&&y.controlled&&"number"===u.type&&ee(u,"number",u.value)),y=r?yi(r):window,e){case"focusin":(qn(y)||"true"===y.contentEditable)&&(pr=y,vr=r,mr=null);break;case"focusout":mr=vr=pr=null;break;case"mousedown":yr=!0;break;case"contextmenu":case"mouseup":case"dragend":yr=!1,gr(o,n,i);break;case"selectionchange":if(dr)break;case"keydown":case"keyup":gr(o,n,i)}var g;if(Pn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Vn?jn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Rn&&"ko"!==n.locale&&(Vn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Vn&&(g=Zt()):(Yt="value"in(Jt=i)?Jt.value:Jt.textContent,Vn=!0)),0<(y=Kr(r,b)).length&&(b=new gn(b,e,null,n,i),o.push({event:b,listeners:y}),g?b.data=g:null!==(g=Un(n))&&(b.data=g))),(g=Ln?function(e,t){switch(e){case"compositionend":return Un(t);case"keypress":return 32!==t.which?null:(Fn=!0,Mn);case"textInput":return(e=t.data)===Mn&&Fn?null:e;default:return null}}(e,n):function(e,t){if(Vn)return"compositionend"===e||!Pn&&jn(e,t)?(e=Zt(),Xt=Yt=Jt=null,Vn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Rn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Kr(r,"onBeforeInput")).length&&(i=new gn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Mr(o,t)}))}function zr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Kr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Pe(e,n))&&r.unshift(zr(e,a,i)),null!=(a=Pe(e,t))&&r.push(zr(e,a,i))),e=e.return}return r}function Wr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Hr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=Pe(n,a))&&o.unshift(zr(n,s,u)):i||null!=(s=Pe(n,a))&&o.push(zr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Gr=/\r\n?/g,Qr=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace(Gr,"\n").replace(Qr,"")}function Yr(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(a(425))}function Xr(){}var Zr=null;function $r(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ei="function"===typeof setTimeout?setTimeout:void 0,ti="function"===typeof clearTimeout?clearTimeout:void 0,ni="function"===typeof Promise?Promise:void 0,ri="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ni?function(e){return ni.resolve(null).then(e).catch(ii)}:ei;function ii(e){setTimeout((function(){throw e}))}function ai(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function oi(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var si=Math.random().toString(36).slice(2),ci="__reactFiber$"+si,li="__reactProps$"+si,fi="__reactContainer$"+si,hi="__reactEvents$"+si,di="__reactListeners$"+si,pi="__reactHandles$"+si;function vi(e){var t=e[ci];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fi]||n[ci]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[ci])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function mi(e){return!(e=e[ci]||e[fi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function yi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function gi(e){return e[li]||null}var bi=[],ki=-1;function wi(e){return{current:e}}function Ai(e){0>ki||(e.current=bi[ki],bi[ki]=null,ki--)}function Si(e,t){ki++,bi[ki]=e.current,e.current=t}var xi={},Ei=wi(xi),_i=wi(!1),Ii=xi;function Ti(e,t){var n=e.type.contextTypes;if(!n)return xi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ci(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ni(){Ai(_i),Ai(Ei)}function Di(e,t,n){if(Ei.current!==xi)throw Error(a(168));Si(Ei,t),Si(_i,n)}function Pi(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,z(e)||"Unknown",i));return F({},n,r)}function Oi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||xi,Ii=Ei.current,Si(Ei,e),Si(_i,_i.current),!0}function Li(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Pi(e,t,Ii),r.__reactInternalMemoizedMergedChildContext=e,Ai(_i),Ai(Ei),Si(Ei,e)):Ai(_i),Si(_i,n)}var Ri=null,Mi=!1,Fi=!1;function ji(e){null===Ri?Ri=[e]:Ri.push(e)}function Ui(){if(!Fi&&null!==Ri){Fi=!0;var e=0,t=gt;try{var n=Ri;for(gt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ri=null,Mi=!1}catch(i){throw null!==Ri&&(Ri=Ri.slice(e+1)),Ge($e,Ui),i}finally{gt=t,Fi=!1}}return null}var Vi=k.ReactCurrentBatchConfig;function Bi(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var qi=wi(null),zi=null,Ki=null,Wi=null;function Hi(){Wi=Ki=zi=null}function Gi(e){var t=qi.current;Ai(qi),e._currentValue=t}function Qi(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ji(e,t){zi=e,Wi=Ki=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(yu=!0),e.firstContext=null)}function Yi(e){var t=e._currentValue;if(Wi!==e)if(e={context:e,memoizedValue:t,next:null},null===Ki){if(null===zi)throw Error(a(308));Ki=e,zi.dependencies={lanes:0,firstContext:e}}else Ki=Ki.next=e;return t}var Xi=null,Zi=!1;function $i(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ea(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ta(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function na(e,t){var n=e.updateQueue;null!==n&&(n=n.shared,null!==gs&&0!==(1&e.mode)&&0===(2&ys)?(null===(e=n.interleaved)?(t.next=t,null===Xi?Xi=[n]:Xi.push(n)):(t.next=e.next,e.next=t),n.interleaved=t):(null===(e=n.pending)?t.next=t:(t.next=e.next,e.next=t),n.pending=t))}function ra(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function ia(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function aa(e,t,n,r){var i=e.updateQueue;Zi=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,u=i.shared.pending;if(null!==u){i.shared.pending=null;var s=u,c=s.next;s.next=null,null===o?a=c:o.next=c,o=s;var l=e.alternate;null!==l&&((u=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===u?l.firstBaseUpdate=c:u.next=c,l.lastBaseUpdate=s))}if(null!==a){var f=i.baseState;for(o=0,l=c=s=null,u=a;;){var h=u.lane,d=u.eventTime;if((r&h)===h){null!==l&&(l=l.next={eventTime:d,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var p=e,v=u;switch(h=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){f=p.call(d,f,h);break e}f=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=v.payload)?p.call(d,f,h):p)||void 0===h)break e;f=F({},f,h);break e;case 2:Zi=!0}}null!==u.callback&&0!==u.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[u]:h.push(u))}else d={eventTime:d,lane:h,tag:u.tag,payload:u.payload,callback:u.callback,next:null},null===l?(c=l=d,s=f):l=l.next=d,o|=h;if(null===(u=u.next)){if(null===(u=i.shared.pending))break;u=(h=u).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===l&&(s=f),i.baseState=s,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Es|=o,e.lanes=o,e.memoizedState=f}}function oa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var ua=(new r.Component).refs;function sa(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ca={isMounted:function(e){return!!(e=e._reactInternals)&&qe(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=qs(),i=zs(e),a=ta(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),na(e,a),null!==(t=Ks(e,i,r))&&ra(t,e,i)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=qs(),i=zs(e),a=ta(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),na(e,a),null!==(t=Ks(e,i,r))&&ra(t,e,i)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=qs(),r=zs(e),i=ta(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),na(e,i),null!==(t=Ks(e,r,n))&&ra(t,e,r)}};function la(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!or(n,r)||!or(i,a))}function fa(e,t,n){var r=!1,i=xi,a=t.contextType;return"object"===typeof a&&null!==a?a=Yi(a):(i=Ci(t)?Ii:Ei.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ti(e,i):xi),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ca,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function ha(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ca.enqueueReplaceState(t,t.state,null)}function da(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=ua,$i(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Yi(a):(a=Ci(t)?Ii:Ei.current,i.context=Ti(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(sa(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ca.enqueueReplaceState(i,i.state,null),aa(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}var pa=[],va=0,ma=null,ya=0,ga=[],ba=0,ka=null,wa=1,Aa="";function Sa(e,t){pa[va++]=ya,pa[va++]=ma,ma=e,ya=t}function xa(e,t,n){ga[ba++]=wa,ga[ba++]=Aa,ga[ba++]=ka,ka=e;var r=wa;e=Aa;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,wa=1<<32-ot(t)+i|n<<i|r,Aa=a+e}else wa=1<<a|n<<i|r,Aa=e}function Ea(e){null!==e.return&&(Sa(e,1),xa(e,1,0))}function _a(e){for(;e===ma;)ma=pa[--va],pa[va]=null,ya=pa[--va],pa[va]=null;for(;e===ka;)ka=ga[--ba],ga[ba]=null,Aa=ga[--ba],ga[ba]=null,wa=ga[--ba],ga[ba]=null}var Ia=null,Ta=null,Ca=!1,Na=null;function Da(e,t){var n=kc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function Pa(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,Ia=e,Ta=oi(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,Ia=e,Ta=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==ka?{id:wa,overflow:Aa}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=kc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,Ia=e,Ta=null,!0);default:return!1}}function Oa(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function La(e){if(Ca){var t=Ta;if(t){var n=t;if(!Pa(e,t)){if(Oa(e))throw Error(a(418));t=oi(n.nextSibling);var r=Ia;t&&Pa(e,t)?Da(r,n):(e.flags=-4097&e.flags|2,Ca=!1,Ia=e)}}else{if(Oa(e))throw Error(a(418));e.flags=-4097&e.flags|2,Ca=!1,Ia=e}}}function Ra(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Ia=e}function Ma(e){if(e!==Ia)return!1;if(!Ca)return Ra(e),Ca=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!$r(e.type,e.memoizedProps)),t&&(t=Ta)){if(Oa(e)){for(e=Ta;e;)e=oi(e.nextSibling);throw Error(a(418))}for(;t;)Da(e,t),t=oi(t.nextSibling)}if(Ra(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Ta=oi(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Ta=null}}else Ta=Ia?oi(e.stateNode.nextSibling):null;return!0}function Fa(){Ta=Ia=null,Ca=!1}function ja(e){null===Na?Na=[e]:Na.push(e)}function Ua(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===ua&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Va(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ba(e){return(0,e._init)(e._payload)}function qa(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Ac(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function u(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=_c(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===S?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===P&&Ba(a)===t.type)?((r=i(t,n.props)).ref=Ua(e,t,n),r.return=e,r):((r=Sc(n.type,n.key,n.props,null,e.mode,r)).ref=Ua(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Ic(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=xc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=_c(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Sc(t.type,t.key,t.props,null,e.mode,n)).ref=Ua(e,null,t),n.return=e,n;case A:return(t=Ic(t,e.mode,n)).return=e,t;case P:return h(e,(0,t._init)(t._payload),n)}if(te(t)||R(t))return(t=xc(t,e.mode,n,null)).return=e,t;Va(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case A:return n.key===i?l(e,t,n,r):null;case P:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||R(n))return null!==i?null:f(e,t,n,r,null);Va(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case A:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case P:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||R(r))return f(t,e=e.get(n)||null,r,i,null);Va(t,r)}return null}function v(i,a,u,s){for(var c=null,l=null,f=a,v=a=0,m=null;null!==f&&v<u.length;v++){f.index>v?(m=f,f=null):m=f.sibling;var y=d(i,f,u[v],s);if(null===y){null===f&&(f=m);break}e&&f&&null===y.alternate&&t(i,f),a=o(y,a,v),null===l?c=y:l.sibling=y,l=y,f=m}if(v===u.length)return n(i,f),Ca&&Sa(i,v),c;if(null===f){for(;v<u.length;v++)null!==(f=h(i,u[v],s))&&(a=o(f,a,v),null===l?c=f:l.sibling=f,l=f);return Ca&&Sa(i,v),c}for(f=r(i,f);v<u.length;v++)null!==(m=p(f,i,v,u[v],s))&&(e&&null!==m.alternate&&f.delete(null===m.key?v:m.key),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m);return e&&f.forEach((function(e){return t(i,e)})),Ca&&Sa(i,v),c}function m(i,u,s,c){var l=R(s);if("function"!==typeof l)throw Error(a(150));if(null==(s=l.call(s)))throw Error(a(151));for(var f=l=null,v=u,m=u=0,y=null,g=s.next();null!==v&&!g.done;m++,g=s.next()){v.index>m?(y=v,v=null):y=v.sibling;var b=d(i,v,g.value,c);if(null===b){null===v&&(v=y);break}e&&v&&null===b.alternate&&t(i,v),u=o(b,u,m),null===f?l=b:f.sibling=b,f=b,v=y}if(g.done)return n(i,v),Ca&&Sa(i,m),l;if(null===v){for(;!g.done;m++,g=s.next())null!==(g=h(i,g.value,c))&&(u=o(g,u,m),null===f?l=g:f.sibling=g,f=g);return Ca&&Sa(i,m),l}for(v=r(i,v);!g.done;m++,g=s.next())null!==(g=p(v,i,m,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?m:g.key),u=o(g,u,m),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),Ca&&Sa(i,m),l}return function e(r,a,o,s){if("object"===typeof o&&null!==o&&o.type===S&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===S){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===P&&Ba(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Ua(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===S?((a=xc(o.props.children,r.mode,s,o.key)).return=r,r=a):((s=Sc(o.type,o.key,o.props,null,r.mode,s)).ref=Ua(r,a,o),s.return=r,r=s)}return u(r);case A:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Ic(o,r.mode,s)).return=r,r=a}return u(r);case P:return e(r,a,(l=o._init)(o._payload),s)}if(te(o))return v(r,a,o,s);if(R(o))return m(r,a,o,s);Va(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=_c(o,r.mode,s)).return=r,r=a),u(r)):n(r,a)}}var za=qa(!0),Ka=qa(!1),Wa={},Ha=wi(Wa),Ga=wi(Wa),Qa=wi(Wa);function Ja(e){if(e===Wa)throw Error(a(174));return e}function Ya(e,t){switch(Si(Qa,t),Si(Ga,e),Si(Ha,Wa),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:se(null,"");break;default:t=se(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ai(Ha),Si(Ha,t)}function Xa(){Ai(Ha),Ai(Ga),Ai(Qa)}function Za(e){Ja(Qa.current);var t=Ja(Ha.current),n=se(t,e.type);t!==n&&(Si(Ga,e),Si(Ha,n))}function $a(e){Ga.current===e&&(Ai(Ha),Ai(Ga))}var eo=wi(0);function to(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var no=[];function ro(){for(var e=0;e<no.length;e++)no[e]._workInProgressVersionPrimary=null;no.length=0}var io=k.ReactCurrentDispatcher,ao=k.ReactCurrentBatchConfig,oo=0,uo=null,so=null,co=null,lo=!1,fo=!1,ho=0,po=0;function vo(){throw Error(a(321))}function mo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function yo(e,t,n,r,i,o){if(oo=o,uo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,io.current=null===e||null===e.memoizedState?$o:eu,e=n(r,i),fo){o=0;do{if(fo=!1,ho=0,25<=o)throw Error(a(301));o+=1,co=so=null,t.updateQueue=null,io.current=tu,e=n(r,i)}while(fo)}if(io.current=Zo,t=null!==so&&null!==so.next,oo=0,co=so=uo=null,lo=!1,t)throw Error(a(300));return e}function go(){var e=0!==ho;return ho=0,e}function bo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===co?uo.memoizedState=co=e:co=co.next=e,co}function ko(){if(null===so){var e=uo.alternate;e=null!==e?e.memoizedState:null}else e=so.next;var t=null===co?uo.memoizedState:co.next;if(null!==t)co=t,so=e;else{if(null===e)throw Error(a(310));e={memoizedState:(so=e).memoizedState,baseState:so.baseState,baseQueue:so.baseQueue,queue:so.queue,next:null},null===co?uo.memoizedState=co=e:co=co.next=e}return co}function wo(e,t){return"function"===typeof t?t(e):t}function Ao(e){var t=ko(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=so,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var u=i.next;i.next=o.next,o.next=u}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var s=u=null,c=null,l=o;do{var f=l.lane;if((oo&f)===f)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var h={lane:f,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(s=c=h,u=r):c=c.next=h,uo.lanes|=f,Es|=f}l=l.next}while(null!==l&&l!==o);null===c?u=r:c.next=s,ar(r,t.memoizedState)||(yu=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,uo.lanes|=o,Es|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function So(e){var t=ko(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{o=e(o,u.action),u=u.next}while(u!==i);ar(o,t.memoizedState)||(yu=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function xo(){}function Eo(e,t){var n=uo,r=ko(),i=t(),o=!ar(r.memoizedState,i);if(o&&(r.memoizedState=i,yu=!0),r=r.queue,Mo(To.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==co&&1&co.memoizedState.tag){if(n.flags|=2048,Do(9,Io.bind(null,n,r,i,t),void 0,null),null===gs)throw Error(a(349));0!==(30&oo)||_o(n,t,i)}return i}function _o(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=uo.updateQueue)?(t={lastEffect:null,stores:null},uo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Io(e,t,n,r){t.value=n,t.getSnapshot=r,Co(t)&&Ks(e,1,-1)}function To(e,t,n){return n((function(){Co(t)&&Ks(e,1,-1)}))}function Co(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function No(e){var t=bo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wo,lastRenderedState:e},t.queue=e,e=e.dispatch=Go.bind(null,uo,e),[t.memoizedState,e]}function Do(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=uo.updateQueue)?(t={lastEffect:null,stores:null},uo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Po(){return ko().memoizedState}function Oo(e,t,n,r){var i=bo();uo.flags|=e,i.memoizedState=Do(1|t,n,void 0,void 0===r?null:r)}function Lo(e,t,n,r){var i=ko();r=void 0===r?null:r;var a=void 0;if(null!==so){var o=so.memoizedState;if(a=o.destroy,null!==r&&mo(r,o.deps))return void(i.memoizedState=Do(t,n,a,r))}uo.flags|=e,i.memoizedState=Do(1|t,n,a,r)}function Ro(e,t){return Oo(8390656,8,e,t)}function Mo(e,t){return Lo(2048,8,e,t)}function Fo(e,t){return Lo(4,2,e,t)}function jo(e,t){return Lo(4,4,e,t)}function Uo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Vo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Lo(4,4,Uo.bind(null,t,e),n)}function Bo(){}function qo(e,t){var n=ko();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&mo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function zo(e,t){var n=ko();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&mo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ko(e,t){var n=gt;gt=0!==n&&4>n?n:4,e(!0);var r=ao.transition;ao.transition={};try{e(!1),t()}finally{gt=n,ao.transition=r}}function Wo(){return ko().memoizedState}function Ho(e,t,n){var r=zs(e);n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Qo(e)?Jo(t,n):(Yo(e,t,n),null!==(e=Ks(e,r,n=qs()))&&Xo(e,t,r))}function Go(e,t,n){var r=zs(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Qo(e))Jo(t,i);else{Yo(e,t,i);var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,u=a(o,n);if(i.hasEagerState=!0,i.eagerState=u,ar(u,o))return}catch(s){}null!==(e=Ks(e,r,n=qs()))&&Xo(e,t,r)}}function Qo(e){var t=e.alternate;return e===uo||null!==t&&t===uo}function Jo(e,t){fo=lo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Yo(e,t,n){null!==gs&&0!==(1&e.mode)&&0===(2&ys)?(null===(e=t.interleaved)?(n.next=n,null===Xi?Xi=[t]:Xi.push(t)):(n.next=e.next,e.next=n),t.interleaved=n):(null===(e=t.pending)?n.next=n:(n.next=e.next,e.next=n),t.pending=n)}function Xo(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var Zo={readContext:Yi,useCallback:vo,useContext:vo,useEffect:vo,useImperativeHandle:vo,useInsertionEffect:vo,useLayoutEffect:vo,useMemo:vo,useReducer:vo,useRef:vo,useState:vo,useDebugValue:vo,useDeferredValue:vo,useTransition:vo,useMutableSource:vo,useSyncExternalStore:vo,useId:vo,unstable_isNewReconciler:!1},$o={readContext:Yi,useCallback:function(e,t){return bo().memoizedState=[e,void 0===t?null:t],e},useContext:Yi,useEffect:Ro,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Oo(4194308,4,Uo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Oo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Oo(4,2,e,t)},useMemo:function(e,t){var n=bo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=bo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ho.bind(null,uo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},bo().memoizedState=e},useState:No,useDebugValue:Bo,useDeferredValue:function(e){var t=No(e),n=t[0],r=t[1];return Ro((function(){var t=ao.transition;ao.transition={};try{r(e)}finally{ao.transition=t}}),[e]),n},useTransition:function(){var e=No(!1),t=e[0];return e=Ko.bind(null,e[1]),bo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=uo,i=bo();if(Ca){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===gs)throw Error(a(349));0!==(30&oo)||_o(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Ro(To.bind(null,r,o,e),[e]),r.flags|=2048,Do(9,Io.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=bo(),t=gs.identifierPrefix;if(Ca){var n=Aa;t=":"+t+"R"+(n=(wa&~(1<<32-ot(wa)-1)).toString(32)+n),0<(n=ho++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=po++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},eu={readContext:Yi,useCallback:qo,useContext:Yi,useEffect:Mo,useImperativeHandle:Vo,useInsertionEffect:Fo,useLayoutEffect:jo,useMemo:zo,useReducer:Ao,useRef:Po,useState:function(){return Ao(wo)},useDebugValue:Bo,useDeferredValue:function(e){var t=Ao(wo),n=t[0],r=t[1];return Mo((function(){var t=ao.transition;ao.transition={};try{r(e)}finally{ao.transition=t}}),[e]),n},useTransition:function(){return[Ao(wo)[0],ko().memoizedState]},useMutableSource:xo,useSyncExternalStore:Eo,useId:Wo,unstable_isNewReconciler:!1},tu={readContext:Yi,useCallback:qo,useContext:Yi,useEffect:Mo,useImperativeHandle:Vo,useInsertionEffect:Fo,useLayoutEffect:jo,useMemo:zo,useReducer:So,useRef:Po,useState:function(){return So(wo)},useDebugValue:Bo,useDeferredValue:function(e){var t=So(wo),n=t[0],r=t[1];return Mo((function(){var t=ao.transition;ao.transition={};try{r(e)}finally{ao.transition=t}}),[e]),n},useTransition:function(){return[So(wo)[0],ko().memoizedState]},useMutableSource:xo,useSyncExternalStore:Eo,useId:Wo,unstable_isNewReconciler:!1};function nu(e,t){try{var n="",r=t;do{n+=B(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i}}function ru(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var iu,au,ou,uu="function"===typeof WeakMap?WeakMap:Map;function su(e,t,n){(n=ta(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ps||(Ps=!0,Os=r),ru(0,t)},n}function cu(e,t,n){(n=ta(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){ru(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){ru(0,t),"function"!==typeof r&&(null===Ls?Ls=new Set([this]):Ls.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function lu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new uu;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=pc.bind(null,e,t,n),t.then(e,e))}function fu(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function hu(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=ta(-1,1)).tag=2,na(n,t))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}function du(e,t){if(!Ca)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function pu(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function vu(e,t,n){var r=t.pendingProps;switch(_a(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pu(t),null;case 1:case 17:return Ci(t.type)&&Ni(),pu(t),null;case 3:return r=t.stateNode,Xa(),Ai(_i),Ai(Ei),ro(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Ma(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==Na&&(Js(Na),Na=null))),pu(t),null;case 5:$a(t);var i=Ja(Qa.current);if(n=t.type,null!==e&&null!=t.stateNode)au(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return pu(t),null}if(e=Ja(Ha.current),Ma(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[ci]=t,r[li]=o,e=0!==(1&t.mode),n){case"dialog":Fr("cancel",r),Fr("close",r);break;case"iframe":case"object":case"embed":Fr("load",r);break;case"video":case"audio":for(i=0;i<Or.length;i++)Fr(Or[i],r);break;case"source":Fr("error",r);break;case"img":case"image":case"link":Fr("error",r),Fr("load",r);break;case"details":Fr("toggle",r);break;case"input":Y(r,o),Fr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Fr("invalid",r);break;case"textarea":ie(r,o),Fr("invalid",r)}for(var s in ge(n,o),i=null,o)if(o.hasOwnProperty(s)){var c=o[s];"children"===s?"string"===typeof c?r.textContent!==c&&(Yr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(Yr(r.textContent,c,e),i=["children",""+c]):u.hasOwnProperty(s)&&null!=c&&"onScroll"===s&&Fr("scroll",r)}switch(n){case"input":H(r),$(r,o,!0);break;case"textarea":H(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Xr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ue(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[ci]=t,e[li]=r,iu(e,t),t.stateNode=e;e:{switch(s=be(n,r),n){case"dialog":Fr("cancel",e),Fr("close",e),i=r;break;case"iframe":case"object":case"embed":Fr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Or.length;i++)Fr(Or[i],e);i=r;break;case"source":Fr("error",e),i=r;break;case"img":case"image":case"link":Fr("error",e),Fr("load",e),i=r;break;case"details":Fr("toggle",e),i=r;break;case"input":Y(e,r),i=J(e,r),Fr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),Fr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Fr("invalid",e)}for(o in ge(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?me(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&fe(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&he(e,l):"number"===typeof l&&he(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(u.hasOwnProperty(o)?null!=l&&"onScroll"===o&&Fr("scroll",e):null!=l&&b(e,o,l,s))}switch(n){case"input":H(e),$(e,r,!1);break;case"textarea":H(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+K(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Xr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return pu(t),null;case 6:if(e&&null!=t.stateNode)ou(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=Ja(Qa.current),Ja(Ha.current),Ma(t)){if(r=t.stateNode,n=t.memoizedProps,r[ci]=t,(o=r.nodeValue!==n)&&null!==(e=Ia))switch(s=0!==(1&e.mode),e.tag){case 3:Yr(r.nodeValue,n,s);break;case 5:!0!==e.memoizedProps[void 0]&&Yr(r.nodeValue,n,s)}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[ci]=t,t.stateNode=r}return pu(t),null;case 13:if(Ai(eo),r=t.memoizedState,Ca&&null!==Ta&&0!==(1&t.mode)&&0===(128&t.flags)){for(r=Ta;r;)r=oi(r.nextSibling);return Fa(),t.flags|=98560,t}if(null!==r&&null!==r.dehydrated){if(r=Ma(t),null===e){if(!r)throw Error(a(318));if(!(r=null!==(r=t.memoizedState)?r.dehydrated:null))throw Error(a(317));r[ci]=t}else Fa(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;return pu(t),null}return null!==Na&&(Js(Na),Na=null),0!==(128&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?Ma(t):n=null!==e.memoizedState,r&&!n&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&eo.current)?0===Ss&&(Ss=3):ic())),null!==t.updateQueue&&(t.flags|=4),pu(t),null);case 4:return Xa(),null===e&&Vr(t.stateNode.containerInfo),pu(t),null;case 10:return Gi(t.type._context),pu(t),null;case 19:if(Ai(eo),null===(o=t.memoizedState))return pu(t),null;if(r=0!==(128&t.flags),null===(s=o.rendering))if(r)du(o,!1);else{if(0!==Ss||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=to(e))){for(t.flags|=128,du(o,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(s=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Si(eo,1&eo.current|2),t.child}e=e.sibling}null!==o.tail&&Xe()>Ds&&(t.flags|=128,r=!0,du(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=to(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),du(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!Ca)return pu(t),null}else 2*Xe()-o.renderingStartTime>Ds&&1073741824!==n&&(t.flags|=128,r=!0,du(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=o.last)?n.sibling=s:t.child=s,o.last=s)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Xe(),t.sibling=null,n=eo.current,Si(eo,r?1&n|2:1&n),t):(pu(t),null);case 22:case 23:return ec(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&ws)&&(pu(t),6&t.subtreeFlags&&(t.flags|=8192)):pu(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}iu=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},au=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Ja(Ha.current);var a,o=null;switch(n){case"input":i=J(e,i),r=J(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Xr)}for(l in ge(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(u.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(s=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==s&&(null!=c||null!=s))if("style"===l)if(s){for(a in s)!s.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&s[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(u.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&Fr("scroll",e),o||s===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},ou=function(e,t,n,r){n!==r&&(t.flags|=4)};var mu=k.ReactCurrentOwner,yu=!1;function gu(e,t,n,r){t.child=null===e?Ka(t,null,n,r):za(t,e.child,n,r)}function bu(e,t,n,r,i){n=n.render;var a=t.ref;return Ji(t,i),r=yo(e,t,n,r,a,i),n=go(),null===e||yu?(Ca&&n&&Ea(t),t.flags|=1,gu(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Uu(e,t,i))}function ku(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||wc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Sc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,wu(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:or)(o,r)&&e.ref===t.ref)return Uu(e,t,i)}return t.flags|=1,(e=Ac(a,r)).ref=t.ref,e.return=t,t.child=e}function wu(e,t,n,r,i){if(null!==e&&or(e.memoizedProps,r)&&e.ref===t.ref){if(yu=!1,0===(e.lanes&i))return t.lanes=e.lanes,Uu(e,t,i);0!==(131072&e.flags)&&(yu=!0)}return xu(e,t,n,r,i)}function Au(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null},Si(As,ws),ws|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null},t.updateQueue=null,Si(As,ws),ws|=e,null;t.memoizedState={baseLanes:0,cachePool:null},r=null!==a?a.baseLanes:n,Si(As,ws),ws|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Si(As,ws),ws|=r;return gu(e,t,i,n),t.child}function Su(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function xu(e,t,n,r,i){var a=Ci(n)?Ii:Ei.current;return a=Ti(t,a),Ji(t,i),n=yo(e,t,n,r,a,i),r=go(),null===e||yu?(Ca&&r&&Ea(t),t.flags|=1,gu(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Uu(e,t,i))}function Eu(e,t,n,r,i){if(Ci(n)){var a=!0;Oi(t)}else a=!1;if(Ji(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),fa(t,n,r),da(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Yi(c):c=Ti(t,c=Ci(n)?Ii:Ei.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&ha(t,o,r,c),Zi=!1;var h=t.memoizedState;o.state=h,aa(t,r,o,i),s=t.memoizedState,u!==r||h!==s||_i.current||Zi?("function"===typeof l&&(sa(t,n,l,r),s=t.memoizedState),(u=Zi||la(t,n,u,r,h,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,ea(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:Bi(t.type,u),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=Yi(s):s=Ti(t,s=Ci(n)?Ii:Ei.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||h!==s)&&ha(t,o,r,s),Zi=!1,h=t.memoizedState,o.state=h,aa(t,r,o,i);var p=t.memoizedState;u!==f||h!==p||_i.current||Zi?("function"===typeof d&&(sa(t,n,d,r),p=t.memoizedState),(c=Zi||la(t,n,c,r,h,p,s)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return _u(e,t,n,r,a,i)}function _u(e,t,n,r,i,a){Su(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Li(t,n,!1),Uu(e,t,a);r=t.stateNode,mu.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=za(t,e.child,null,a),t.child=za(t,null,u,a)):gu(e,t,u,a),t.memoizedState=r.state,i&&Li(t,n,!0),t.child}function Iu(e){var t=e.stateNode;t.pendingContext?Di(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Di(0,t.context,!1),Ya(e,t.containerInfo)}function Tu(e,t,n,r,i){return Fa(),ja(i),t.flags|=256,gu(e,t,n,r),t.child}var Cu={dehydrated:null,treeContext:null,retryLane:0};function Nu(e){return{baseLanes:e,cachePool:null}}function Du(e,t,n){var r,i=t.pendingProps,o=eo.current,u=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(u=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Si(eo,1&o),null===e)return La(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(o=i.children,e=i.fallback,u?(i=t.mode,u=t.child,o={mode:"hidden",children:o},0===(1&i)&&null!==u?(u.childLanes=0,u.pendingProps=o):u=Ec(o,i,0,null),e=xc(e,i,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=Nu(n),t.memoizedState=Cu,e):Pu(t,o));if(null!==(o=e.memoizedState)){if(null!==(r=o.dehydrated)){if(s)return 256&t.flags?(t.flags&=-257,Ru(e,t,n,Error(a(422)))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(u=i.fallback,o=t.mode,i=Ec({mode:"visible",children:i.children},o,0,null),(u=xc(u,o,n,null)).flags|=2,i.return=t,u.return=t,i.sibling=u,t.child=i,0!==(1&t.mode)&&za(t,e.child,null,n),t.child.memoizedState=Nu(n),t.memoizedState=Cu,u);if(0===(1&t.mode))t=Ru(e,t,n,null);else if("$!"===r.data)t=Ru(e,t,n,Error(a(419)));else if(i=0!==(n&e.childLanes),yu||i){if(null!==(i=gs)){switch(n&-n){case 4:u=2;break;case 16:u=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:u=32;break;case 536870912:u=268435456;break;default:u=0}0!==(i=0!==(u&(i.suspendedLanes|n))?0:u)&&i!==o.retryLane&&(o.retryLane=i,Ks(e,i,-1))}ic(),t=Ru(e,t,n,Error(a(421)))}else"$?"===r.data?(t.flags|=128,t.child=e.child,t=mc.bind(null,e),r._reactRetry=t,t=null):(n=o.treeContext,Ta=oi(r.nextSibling),Ia=t,Ca=!0,Na=null,null!==n&&(ga[ba++]=wa,ga[ba++]=Aa,ga[ba++]=ka,wa=n.id,Aa=n.overflow,ka=t),(t=Pu(t,t.pendingProps.children)).flags|=4096);return t}return u?(i=Lu(e,t,i.children,i.fallback,n),u=t.child,o=e.child.memoizedState,u.memoizedState=null===o?Nu(n):{baseLanes:o.baseLanes|n,cachePool:null},u.childLanes=e.childLanes&~n,t.memoizedState=Cu,i):(n=Ou(e,t,i.children,n),t.memoizedState=null,n)}return u?(i=Lu(e,t,i.children,i.fallback,n),u=t.child,o=e.child.memoizedState,u.memoizedState=null===o?Nu(n):{baseLanes:o.baseLanes|n,cachePool:null},u.childLanes=e.childLanes&~n,t.memoizedState=Cu,i):(n=Ou(e,t,i.children,n),t.memoizedState=null,n)}function Pu(e,t){return(t=Ec({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ou(e,t,n,r){var i=e.child;return e=i.sibling,n=Ac(i,{mode:"visible",children:n}),0===(1&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n}function Lu(e,t,n,r,i){var a=t.mode,o=(e=e.child).sibling,u={mode:"hidden",children:n};return 0===(1&a)&&t.child!==e?((n=t.child).childLanes=0,n.pendingProps=u,t.deletions=null):(n=Ac(e,u)).subtreeFlags=14680064&e.subtreeFlags,null!==o?r=Ac(o,r):(r=xc(r,a,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function Ru(e,t,n,r){return null!==r&&ja(r),za(t,e.child,null,n),(e=Pu(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Mu(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Qi(e.return,t,n)}function Fu(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function ju(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(gu(e,t,r.children,n),0!==(2&(r=eo.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Mu(e,n,t);else if(19===e.tag)Mu(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Si(eo,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===to(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Fu(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===to(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Fu(t,!0,n,null,a);break;case"together":Fu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Uu(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Es|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Ac(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ac(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Vu(e,t){switch(_a(t),t.tag){case 1:return Ci(t.type)&&Ni(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Xa(),Ai(_i),Ai(Ei),ro(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return $a(t),null;case 13:if(Ai(eo),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));Fa()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ai(eo),null;case 4:return Xa(),null;case 10:return Gi(t.type._context),null;case 22:case 23:return ec(),null;default:return null}}var Bu=!1,qu=!1,zu="function"===typeof WeakSet?WeakSet:Set,Ku=null;function Wu(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){dc(e,t,r)}else n.current=null}function Hu(e,t,n){try{n()}catch(r){dc(e,t,r)}}var Gu=!1;function Qu(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&Hu(t,n,a)}i=i.next}while(i!==r)}}function Ju(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Yu(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function Xu(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,t)}catch(o){}switch(t.tag){case 0:case 11:case 14:case 15:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var r=e=e.next;do{var i=r,a=i.destroy;i=i.tag,void 0!==a&&(0!==(2&i)||0!==(4&i))&&Hu(t,n,a),r=r.next}while(r!==e)}break;case 1:if(Wu(t,n),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(o){dc(t,n,o)}break;case 5:Wu(t,n);break;case 4:is(e,t,n)}}function Zu(e){var t=e.alternate;null!==t&&(e.alternate=null,Zu(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[ci],delete t[li],delete t[hi],delete t[di],delete t[pi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function $u(e){return 5===e.tag||3===e.tag||4===e.tag}function es(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||$u(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ts(e){e:{for(var t=e.return;null!==t;){if($u(t))break e;t=t.return}throw Error(a(160))}var n=t;switch(n.tag){case 5:t=n.stateNode,32&n.flags&&(he(t,""),n.flags&=-33),rs(e,n=es(e),t);break;case 3:case 4:t=n.stateNode.containerInfo,ns(e,n=es(e),t);break;default:throw Error(a(161))}}function ns(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Xr));else if(4!==r&&null!==(e=e.child))for(ns(e,t,n),e=e.sibling;null!==e;)ns(e,t,n),e=e.sibling}function rs(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(rs(e,t,n),e=e.sibling;null!==e;)rs(e,t,n),e=e.sibling}function is(e,t,n){for(var r,i,o=t,u=!1;;){if(!u){u=o.return;e:for(;;){if(null===u)throw Error(a(160));switch(r=u.stateNode,u.tag){case 5:i=!1;break e;case 3:case 4:r=r.containerInfo,i=!0;break e}u=u.return}u=!0}if(5===o.tag||6===o.tag){e:for(var s=e,c=o,l=n,f=c;;)if(Xu(s,f,l),null!==f.child&&4!==f.tag)f.child.return=f,f=f.child;else{if(f===c)break e;for(;null===f.sibling;){if(null===f.return||f.return===c)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}i?(s=r,c=o.stateNode,8===s.nodeType?s.parentNode.removeChild(c):s.removeChild(c)):r.removeChild(o.stateNode)}else if(18===o.tag)i?(s=r,c=o.stateNode,8===s.nodeType?ai(s.parentNode,c):1===s.nodeType&&ai(s,c),Bt(s)):ai(r,o.stateNode);else if(4===o.tag){if(null!==o.child){r=o.stateNode.containerInfo,i=!0,o.child.return=o,o=o.child;continue}}else if(Xu(e,o,n),null!==o.child){o.child.return=o,o=o.child;continue}if(o===t)break;for(;null===o.sibling;){if(null===o.return||o.return===t)return;4===(o=o.return).tag&&(u=!1)}o.sibling.return=o.return,o=o.sibling}}function as(e,t){switch(t.tag){case 0:case 11:case 14:case 15:return Qu(3,t,t.return),Ju(3,t),void Qu(5,t,t.return);case 1:case 12:case 17:return;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps,i=null!==e?e.memoizedProps:r;e=t.type;var o=t.updateQueue;if(t.updateQueue=null,null!==o){for("input"===e&&"radio"===r.type&&null!=r.name&&X(n,r),be(e,i),t=be(e,r),i=0;i<o.length;i+=2){var u=o[i],s=o[i+1];"style"===u?me(n,s):"dangerouslySetInnerHTML"===u?fe(n,s):"children"===u?he(n,s):b(n,u,s,t)}switch(e){case"input":Z(n,r);break;case"textarea":ae(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(o=r.value)?ne(n,!!r.multiple,o,!1):e!==!!r.multiple&&(null!=r.defaultValue?ne(n,!!r.multiple,r.defaultValue,!0):ne(n,!!r.multiple,r.multiple?[]:"",!1))}n[li]=r}}return;case 6:if(null===t.stateNode)throw Error(a(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void(null!==e&&e.memoizedState.isDehydrated&&Bt(t.stateNode.containerInfo));case 13:case 19:return void os(t)}throw Error(a(163))}function os(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new zu),t.forEach((function(t){var r=yc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function us(e,t,n){Ku=e,ss(e,t,n)}function ss(e,t,n){for(var r=0!==(1&e.mode);null!==Ku;){var i=Ku,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Bu;if(!o){var u=i.alternate,s=null!==u&&null!==u.memoizedState||qu;u=Bu;var c=qu;if(Bu=o,(qu=s)&&!c)for(Ku=i;null!==Ku;)s=(o=Ku).child,22===o.tag&&null!==o.memoizedState?fs(i):null!==s?(s.return=o,Ku=s):fs(i);for(;null!==a;)Ku=a,ss(a,t,n),a=a.sibling;Ku=i,Bu=u,qu=c}cs(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Ku=a):cs(e)}}function cs(e){for(;null!==Ku;){var t=Ku;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:qu||Ju(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!qu)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Bi(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&oa(t,o,r);break;case 3:var u=t.updateQueue;if(null!==u){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}oa(t,u,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var f=l.memoizedState;if(null!==f){var h=f.dehydrated;null!==h&&Bt(h)}}}break;default:throw Error(a(163))}qu||512&t.flags&&Yu(t)}catch(d){dc(t,t.return,d)}}if(t===e){Ku=null;break}if(null!==(n=t.sibling)){n.return=t.return,Ku=n;break}Ku=t.return}}function ls(e){for(;null!==Ku;){var t=Ku;if(t===e){Ku=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Ku=n;break}Ku=t.return}}function fs(e){for(;null!==Ku;){var t=Ku;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Ju(4,t)}catch(s){dc(t,n,s)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(s){dc(t,i,s)}}var a=t.return;try{Yu(t)}catch(s){dc(t,a,s)}break;case 5:var o=t.return;try{Yu(t)}catch(s){dc(t,o,s)}}}catch(s){dc(t,t.return,s)}if(t===e){Ku=null;break}var u=t.sibling;if(null!==u){u.return=t.return,Ku=u;break}Ku=t.return}}var hs,ds=Math.ceil,ps=k.ReactCurrentDispatcher,vs=k.ReactCurrentOwner,ms=k.ReactCurrentBatchConfig,ys=0,gs=null,bs=null,ks=0,ws=0,As=wi(0),Ss=0,xs=null,Es=0,_s=0,Is=0,Ts=null,Cs=null,Ns=0,Ds=1/0,Ps=!1,Os=null,Ls=null,Rs=!1,Ms=null,Fs=0,js=0,Us=null,Vs=-1,Bs=0;function qs(){return 0!==(6&ys)?Xe():-1!==Vs?Vs:Vs=Xe()}function zs(e){return 0===(1&e.mode)?1:0!==(2&ys)&&0!==ks?ks&-ks:null!==Vi.transition?(0===Bs&&(e=ct,0===(4194240&(ct<<=1))&&(ct=64),Bs=e),Bs):0!==(e=gt)?e:e=void 0===(e=window.event)?16:Qt(e.type)}function Ks(e,t,n){if(50<js)throw js=0,Us=null,Error(a(185));var r=Ws(e,t);return null===r?null:(mt(r,t,n),0!==(2&ys)&&r===gs||(r===gs&&(0===(2&ys)&&(_s|=t),4===Ss&&Ys(r,ks)),Hs(r,n),1===t&&0===ys&&0===(1&e.mode)&&(Ds=Xe()+500,Mi&&Ui())),r)}function Ws(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function Hs(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),u=1<<o,s=i[o];-1===s?0!==(u&n)&&0===(u&r)||(i[o]=dt(u,t)):s<=t&&(e.expiredLanes|=u),a&=~u}}(e,t);var r=ht(e,e===gs?ks:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Mi=!0,ji(e)}(Xs.bind(null,e)):ji(Xs.bind(null,e)),ri((function(){0===ys&&Ui()})),n=null;else{switch(bt(r)){case 1:n=$e;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=gc(n,Gs.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Gs(e,t){if(Vs=-1,Bs=0,0!==(6&ys))throw Error(a(327));var n=e.callbackNode;if(fc()&&e.callbackNode!==n)return null;var r=ht(e,e===gs?ks:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=ac(e,r);else{t=r;var i=ys;ys|=2;var o=rc();for(gs===e&&ks===t||(Ds=Xe()+500,tc(e,t));;)try{uc();break}catch(s){nc(e,s)}Hi(),ps.current=o,ys=i,null!==bs?t=0:(gs=null,ks=0,t=Ss)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=Qs(e,i))),1===t)throw n=xs,tc(e,0),Ys(e,r),Hs(e,Xe()),n;if(6===t)Ys(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!ar(a(),i))return!1}catch(u){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=ac(e,r))&&(0!==(o=pt(e))&&(r=o,t=Qs(e,o))),1===t))throw n=xs,tc(e,0),Ys(e,r),Hs(e,Xe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:lc(e,Cs);break;case 3:if(Ys(e,r),(130023424&r)===r&&10<(t=Ns+500-Xe())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){qs(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ei(lc.bind(null,e,Cs),t);break}lc(e,Cs);break;case 4:if(Ys(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var u=31-ot(r);o=1<<u,(u=t[u])>i&&(i=u),r&=~o}if(r=i,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ds(r/1960))-r)){e.timeoutHandle=ei(lc.bind(null,e,Cs),r);break}lc(e,Cs);break;default:throw Error(a(329))}}}return Hs(e,Xe()),e.callbackNode===n?Gs.bind(null,e):null}function Qs(e,t){var n=Ts;return e.current.memoizedState.isDehydrated&&(tc(e,t).flags|=256),2!==(e=ac(e,t))&&(t=Cs,Cs=n,null!==t&&Js(t)),e}function Js(e){null===Cs?Cs=e:Cs.push.apply(Cs,e)}function Ys(e,t){for(t&=~Is,t&=~_s,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function Xs(e){if(0!==(6&ys))throw Error(a(327));fc();var t=ht(e,0);if(0===(1&t))return Hs(e,Xe()),null;var n=ac(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=Qs(e,r))}if(1===n)throw n=xs,tc(e,0),Ys(e,t),Hs(e,Xe()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,lc(e,Cs),Hs(e,Xe()),null}function Zs(e,t){var n=ys;ys|=1;try{return e(t)}finally{0===(ys=n)&&(Ds=Xe()+500,Mi&&Ui())}}function $s(e){null!==Ms&&0===Ms.tag&&0===(6&ys)&&fc();var t=ys;ys|=1;var n=ms.transition,r=gt;try{if(ms.transition=null,gt=1,e)return e()}finally{gt=r,ms.transition=n,0===(6&(ys=t))&&Ui()}}function ec(){ws=As.current,Ai(As)}function tc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ti(n)),null!==bs)for(n=bs.return;null!==n;){var r=n;switch(_a(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ni();break;case 3:Xa(),Ai(_i),Ai(Ei),ro();break;case 5:$a(r);break;case 4:Xa();break;case 13:case 19:Ai(eo);break;case 10:Gi(r.type._context);break;case 22:case 23:ec()}n=n.return}if(gs=e,bs=e=Ac(e.current,null),ks=ws=t,Ss=0,xs=null,Is=_s=Es=0,Cs=Ts=null,null!==Xi){for(t=0;t<Xi.length;t++)if(null!==(r=(n=Xi[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Xi=null}return e}function nc(e,t){for(;;){var n=bs;try{if(Hi(),io.current=Zo,lo){for(var r=uo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}lo=!1}if(oo=0,co=so=uo=null,fo=!1,ho=0,vs.current=null,null===n||null===n.return){Ss=1,xs=t,bs=null;break}e:{var o=e,u=n.return,s=n,c=t;if(t=ks,s.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,f=s,h=f.tag;if(0===(1&f.mode)&&(0===h||11===h||15===h)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=fu(u);if(null!==p){p.flags&=-257,hu(p,u,s,0,t),1&p.mode&&lu(o,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var m=new Set;m.add(c),t.updateQueue=m}else v.add(c);break e}if(0===(1&t)){lu(o,l,t),ic();break e}c=Error(a(426))}else if(Ca&&1&s.mode){var y=fu(u);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),hu(y,u,s,0,t),ja(c);break e}}o=c,4!==Ss&&(Ss=2),null===Ts?Ts=[o]:Ts.push(o),c=nu(c,s),s=u;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,ia(s,su(0,c,t));break e;case 1:o=c;var g=s.type,b=s.stateNode;if(0===(128&s.flags)&&("function"===typeof g.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Ls||!Ls.has(b)))){s.flags|=65536,t&=-t,s.lanes|=t,ia(s,cu(s,o,t));break e}}s=s.return}while(null!==s)}cc(n)}catch(k){t=k,bs===n&&null!==n&&(bs=n=n.return);continue}break}}function rc(){var e=ps.current;return ps.current=Zo,null===e?Zo:e}function ic(){0!==Ss&&3!==Ss&&2!==Ss||(Ss=4),null===gs||0===(268435455&Es)&&0===(268435455&_s)||Ys(gs,ks)}function ac(e,t){var n=ys;ys|=2;var r=rc();for(gs===e&&ks===t||tc(e,t);;)try{oc();break}catch(i){nc(e,i)}if(Hi(),ys=n,ps.current=r,null!==bs)throw Error(a(261));return gs=null,ks=0,Ss}function oc(){for(;null!==bs;)sc(bs)}function uc(){for(;null!==bs&&!Je();)sc(bs)}function sc(e){var t=hs(e.alternate,e,ws);e.memoizedProps=e.pendingProps,null===t?cc(e):bs=t,vs.current=null}function cc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=vu(n,t,ws)))return void(bs=n)}else{if(null!==(n=Vu(n,t)))return n.flags&=32767,void(bs=n);if(null===e)return Ss=6,void(bs=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(bs=t);bs=t=e}while(null!==t);0===Ss&&(Ss=5)}function lc(e,t){var n=gt,r=ms.transition;try{ms.transition=null,gt=1,function(e,t,n){do{fc()}while(null!==Ms);if(0!==(6&ys))throw Error(a(327));var r=e.finishedWork,i=e.finishedLanes;if(null===r)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=r.lanes|r.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===gs&&(bs=gs=null,ks=0),0===(2064&r.subtreeFlags)&&0===(2064&r.flags)||Rs||(Rs=!0,gc(tt,(function(){return fc(),null}))),o=0!==(15990&r.flags),0!==(15990&r.subtreeFlags)||o){o=ms.transition,ms.transition=null;var u=gt;gt=1;var s=ys;ys|=4,vs.current=null,function(e,t){if(fr(e=lr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(A){n=null;break e}var u=0,s=-1,c=-1,l=0,f=0,h=e,d=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(s=u+i),h!==o||0!==r&&3!==h.nodeType||(c=u+r),3===h.nodeType&&(u+=h.nodeValue.length),null!==(p=h.firstChild);)d=h,h=p;for(;;){if(h===e)break t;if(d===n&&++l===i&&(s=u),d===o&&++f===r&&(c=u),null!==(p=h.nextSibling))break;d=(h=d).parentNode}h=p}n=-1===s||-1===c?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Zr={focusedElem:e,selectionRange:n},Ku=t;null!==Ku;)if(e=(t=Ku).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Ku=e;else for(;null!==Ku;){t=Ku;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var m=v.memoizedProps,y=v.memoizedState,g=t.stateNode,b=g.getSnapshotBeforeUpdate(t.elementType===t.type?m:Bi(t.type,m),y);g.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var k=t.stateNode.containerInfo;if(1===k.nodeType)k.textContent="";else if(9===k.nodeType){var w=k.body;null!=w&&(w.textContent="")}break;default:throw Error(a(163))}}catch(A){dc(t,t.return,A)}if(null!==(e=t.sibling)){e.return=t.return,Ku=e;break}Ku=t.return}v=Gu,Gu=!1}(e,r),function(e,t){for(Ku=t;null!==Ku;){var n=(t=Ku).deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{is(e,i,t);var a=i.alternate;null!==a&&(a.return=null),i.return=null}catch(x){dc(i,t,x)}}if(n=t.child,0!==(12854&t.subtreeFlags)&&null!==n)n.return=t,Ku=n;else for(;null!==Ku;){t=Ku;try{var o=t.flags;if(32&o&&he(t.stateNode,""),512&o){var u=t.alternate;if(null!==u){var s=u.ref;null!==s&&("function"===typeof s?s(null):s.current=null)}}if(8192&o)switch(t.tag){case 13:if(null!==t.memoizedState){var c=t.alternate;null!==c&&null!==c.memoizedState||(Ns=Xe())}break;case 22:var l=null!==t.memoizedState,f=t.alternate,h=null!==f&&null!==f.memoizedState;e:{i=l;for(var d=null,p=r=n=t;;){if(5===p.tag){if(null===d){d=p;var v=p.stateNode;if(i){var m=v.style;"function"===typeof m.setProperty?m.setProperty("display","none","important"):m.display="none"}else{var y=p.stateNode,g=p.memoizedProps.style,b=void 0!==g&&null!==g&&g.hasOwnProperty("display")?g.display:null;y.style.display=ve("display",b)}}}else if(6===p.tag)null===d&&(p.stateNode.nodeValue=i?"":p.memoizedProps);else if((22!==p.tag&&23!==p.tag||null===p.memoizedState||p===r)&&null!==p.child){p.child.return=p,p=p.child;continue}if(p===r)break;for(;null===p.sibling;){if(null===p.return||p.return===r)break e;d===p&&(d=null),p=p.return}d===p&&(d=null),p.sibling.return=p.return,p=p.sibling}}if(l&&!h&&0!==(1&n.mode)){Ku=n;for(var k=n.child;null!==k;){for(n=Ku=k;null!==Ku;){var w=(r=Ku).child;switch(r.tag){case 0:case 11:case 14:case 15:Qu(4,r,r.return);break;case 1:Wu(r,r.return);var A=r.stateNode;if("function"===typeof A.componentWillUnmount){var S=r.return;try{A.props=r.memoizedProps,A.state=r.memoizedState,A.componentWillUnmount()}catch(x){dc(r,S,x)}}break;case 5:Wu(r,r.return);break;case 22:if(null!==r.memoizedState){ls(n);continue}}null!==w?(w.return=r,Ku=w):ls(n)}k=k.sibling}}}switch(4102&o){case 2:ts(t),t.flags&=-3;break;case 6:ts(t),t.flags&=-3,as(t.alternate,t);break;case 4096:t.flags&=-4097;break;case 4100:t.flags&=-4097,as(t.alternate,t);break;case 4:as(t.alternate,t)}}catch(x){dc(t,t.return,x)}if(null!==(n=t.sibling)){n.return=t.return,Ku=n;break}Ku=t.return}}}(e,r),hr(Zr),Zr=null,e.current=r,us(r,e,i),Ye(),ys=s,gt=u,ms.transition=o}else e.current=r;if(Rs&&(Rs=!1,Ms=e,Fs=i),0===(o=e.pendingLanes)&&(Ls=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(r.stateNode),Hs(e,Xe()),null!==t)for(n=e.onRecoverableError,r=0;r<t.length;r++)n(t[r]);if(Ps)throw Ps=!1,e=Os,Os=null,e;0!==(1&Fs)&&0!==e.tag&&fc(),0!==(1&(o=e.pendingLanes))?e===Us?js++:(js=0,Us=e):js=0,Ui()}(e,t,n)}finally{ms.transition=r,gt=n}return null}function fc(){if(null!==Ms){var e=bt(Fs),t=ms.transition,n=gt;try{if(ms.transition=null,gt=16>e?16:e,null===Ms)var r=!1;else{if(e=Ms,Ms=null,Fs=0,0!==(6&ys))throw Error(a(331));var i=ys;for(ys|=4,Ku=e.current;null!==Ku;){var o=Ku,u=o.child;if(0!==(16&Ku.flags)){var s=o.deletions;if(null!==s){for(var c=0;c<s.length;c++){var l=s[c];for(Ku=l;null!==Ku;){var f=Ku;switch(f.tag){case 0:case 11:case 15:Qu(8,f,o)}var h=f.child;if(null!==h)h.return=f,Ku=h;else for(;null!==Ku;){var d=(f=Ku).sibling,p=f.return;if(Zu(f),f===l){Ku=null;break}if(null!==d){d.return=p,Ku=d;break}Ku=p}}}var v=o.alternate;if(null!==v){var m=v.child;if(null!==m){v.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}Ku=o}}if(0!==(2064&o.subtreeFlags)&&null!==u)u.return=o,Ku=u;else e:for(;null!==Ku;){if(0!==(2048&(o=Ku).flags))switch(o.tag){case 0:case 11:case 15:Qu(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Ku=g;break e}Ku=o.return}}var b=e.current;for(Ku=b;null!==Ku;){var k=(u=Ku).child;if(0!==(2064&u.subtreeFlags)&&null!==k)k.return=u,Ku=k;else e:for(u=b;null!==Ku;){if(0!==(2048&(s=Ku).flags))try{switch(s.tag){case 0:case 11:case 15:Ju(9,s)}}catch(A){dc(s,s.return,A)}if(s===u){Ku=null;break e}var w=s.sibling;if(null!==w){w.return=s.return,Ku=w;break e}Ku=s.return}}if(ys=i,Ui(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(A){}r=!0}return r}finally{gt=n,ms.transition=t}}return!1}function hc(e,t,n){na(e,t=su(0,t=nu(n,t),1)),t=qs(),null!==(e=Ws(e,1))&&(mt(e,1,t),Hs(e,t))}function dc(e,t,n){if(3===e.tag)hc(e,e,n);else for(;null!==t;){if(3===t.tag){hc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Ls||!Ls.has(r))){na(t,e=cu(t,e=nu(n,e),1)),e=qs(),null!==(t=Ws(t,1))&&(mt(t,1,e),Hs(t,e));break}}t=t.return}}function pc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=qs(),e.pingedLanes|=e.suspendedLanes&n,gs===e&&(ks&n)===n&&(4===Ss||3===Ss&&(130023424&ks)===ks&&500>Xe()-Ns?tc(e,0):Is|=n),Hs(e,t)}function vc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=qs();null!==(e=Ws(e,t))&&(mt(e,t,n),Hs(e,n))}function mc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),vc(e,n)}function yc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),vc(e,n)}function gc(e,t){return Ge(e,t)}function bc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function kc(e,t,n,r){return new bc(e,t,n,r)}function wc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ac(e,t){var n=e.alternate;return null===n?((n=kc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Sc(e,t,n,r,i,o){var u=2;if(r=e,"function"===typeof e)wc(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case S:return xc(n.children,i,o,t);case x:u=8,i|=8;break;case E:return(e=kc(12,n,t,2|i)).elementType=E,e.lanes=o,e;case C:return(e=kc(13,n,t,i)).elementType=C,e.lanes=o,e;case N:return(e=kc(19,n,t,i)).elementType=N,e.lanes=o,e;case O:return Ec(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case _:u=10;break e;case I:u=9;break e;case T:u=11;break e;case D:u=14;break e;case P:u=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=kc(u,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function xc(e,t,n,r){return(e=kc(7,e,r,t)).lanes=n,e}function Ec(e,t,n,r){return(e=kc(22,e,r,t)).elementType=O,e.lanes=n,e.stateNode={},e}function _c(e,t,n){return(e=kc(6,e,null,t)).lanes=n,e}function Ic(e,t,n){return(t=kc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Tc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vt(0),this.expirationTimes=vt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Cc(e,t,n,r,i,a,o,u,s){return e=new Tc(e,t,n,u,s),1===t?(t=1,!0===a&&(t|=8)):t=0,a=kc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null},$i(a),e}function Nc(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:A,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Dc(e){if(!e)return xi;e:{if(qe(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ci(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Ci(n))return Pi(e,n,t)}return t}function Pc(e,t,n,r,i,a,o,u,s){return(e=Cc(n,r,!0,e,0,a,0,u,s)).context=Dc(null),n=e.current,(a=ta(r=qs(),i=zs(n))).callback=void 0!==t&&null!==t?t:null,na(n,a),e.current.lanes=i,mt(e,i,r),Hs(e,r),e}function Oc(e,t,n,r){var i=t.current,a=qs(),o=zs(i);return n=Dc(n),null===t.context?t.context=n:t.pendingContext=n,(t=ta(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),na(i,t),null!==(e=Ks(i,o,a))&&ra(e,i,o),o}function Lc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Rc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Mc(e,t){Rc(e,t),(e=e.alternate)&&Rc(e,t)}hs=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||_i.current)yu=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return yu=!1,function(e,t,n){switch(t.tag){case 3:Iu(t),Fa();break;case 5:Za(t);break;case 1:Ci(t.type)&&Oi(t);break;case 4:Ya(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Si(qi,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Si(eo,1&eo.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Du(e,t,n):(Si(eo,1&eo.current),null!==(e=Uu(e,t,n))?e.sibling:null);Si(eo,1&eo.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return ju(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Si(eo,eo.current),r)break;return null;case 22:case 23:return t.lanes=0,Au(e,t,n)}return Uu(e,t,n)}(e,t,n);yu=0!==(131072&e.flags)}else yu=!1,Ca&&0!==(1048576&t.flags)&&xa(t,ya,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps;var i=Ti(t,Ei.current);Ji(t,n),i=yo(null,t,r,e,i,n);var o=go();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ci(r)?(o=!0,Oi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,$i(t),i.updater=ca,t.stateNode=i,i._reactInternals=t,da(t,r,e,n),t=_u(null,t,r,!0,o,n)):(t.tag=0,Ca&&o&&Ea(t),gu(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return wc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===T)return 11;if(e===D)return 14}return 2}(r),e=Bi(r,e),i){case 0:t=xu(null,t,r,e,n);break e;case 1:t=Eu(null,t,r,e,n);break e;case 11:t=bu(null,t,r,e,n);break e;case 14:t=ku(null,t,r,Bi(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,xu(e,t,r,i=t.elementType===r?i:Bi(r,i),n);case 1:return r=t.type,i=t.pendingProps,Eu(e,t,r,i=t.elementType===r?i:Bi(r,i),n);case 3:e:{if(Iu(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,ea(e,t),aa(t,r,null,n);var u=t.memoizedState;if(r=u.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:u.cache,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Tu(e,t,r,n,i=Error(a(423)));break e}if(r!==i){t=Tu(e,t,r,n,i=Error(a(424)));break e}for(Ta=oi(t.stateNode.containerInfo.firstChild),Ia=t,Ca=!0,Na=null,n=Ka(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(Fa(),r===i){t=Uu(e,t,n);break e}gu(e,t,r,n)}t=t.child}return t;case 5:return Za(t),null===e&&La(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,u=i.children,$r(r,i)?u=null:null!==o&&$r(r,o)&&(t.flags|=32),Su(e,t),gu(e,t,u,n),t.child;case 6:return null===e&&La(t),null;case 13:return Du(e,t,n);case 4:return Ya(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=za(t,null,r,n):gu(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,bu(e,t,r,i=t.elementType===r?i:Bi(r,i),n);case 7:return gu(e,t,t.pendingProps,n),t.child;case 8:case 12:return gu(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,u=i.value,Si(qi,r._currentValue),r._currentValue=u,null!==o)if(ar(o.value,u)){if(o.children===i.children&&!_i.current){t=Uu(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var s=o.dependencies;if(null!==s){u=o.child;for(var c=s.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=ta(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var f=(l=l.shared).pending;null===f?c.next=c:(c.next=f.next,f.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),Qi(o.return,n,t),s.lanes|=n;break}c=c.next}}else if(10===o.tag)u=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(u=o.return))throw Error(a(341));u.lanes|=n,null!==(s=u.alternate)&&(s.lanes|=n),Qi(u,n,t),u=o.sibling}else u=o.child;if(null!==u)u.return=o;else for(u=o;null!==u;){if(u===t){u=null;break}if(null!==(o=u.sibling)){o.return=u.return,u=o;break}u=u.return}o=u}gu(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ji(t,n),r=r(i=Yi(i)),t.flags|=1,gu(e,t,r,n),t.child;case 14:return i=Bi(r=t.type,t.pendingProps),ku(e,t,r,i=Bi(r.type,i),n);case 15:return wu(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Bi(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,Ci(r)?(e=!0,Oi(t)):e=!1,Ji(t,n),fa(t,r,i),da(t,r,i,n),_u(null,t,r,!0,e,n);case 19:return ju(e,t,n);case 22:return Au(e,t,n)}throw Error(a(156,t.tag))};var Fc="function"===typeof reportError?reportError:function(e){console.error(e)};function jc(e){this._internalRoot=e}function Uc(e){this._internalRoot=e}function Vc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Bc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function qc(){}function zc(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var u=i;i=function(){var e=Lc(o);u.call(e)}}Oc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Lc(o);a.call(e)}}var o=Pc(t,r,e,0,null,!1,0,"",qc);return e._reactRootContainer=o,e[fi]=o.current,Vr(8===e.nodeType?e.parentNode:e),$s(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var u=r;r=function(){var e=Lc(s);u.call(e)}}var s=Cc(e,0,!1,null,0,!1,0,"",qc);return e._reactRootContainer=s,e[fi]=s.current,Vr(8===e.nodeType?e.parentNode:e),$s((function(){Oc(t,s,n,r)})),s}(n,t,e,i,r);return Lc(o)}Uc.prototype.render=jc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Oc(e,t,null,null)},Uc.prototype.unmount=jc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;$s((function(){Oc(null,e,null,null)})),t[fi]=null}},Uc.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Pt.length&&0!==t&&t<Pt[n].priority;n++);Pt.splice(n,0,e),0===n&&Mt(e)}},kt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(yt(t,1|n),Hs(t,Xe()),0===(6&ys)&&(Ds=Xe()+500,Ui()))}break;case 13:var r=qs();$s((function(){return Ks(e,1,r)})),Mc(e,1)}},wt=function(e){13===e.tag&&(Ks(e,134217728,qs()),Mc(e,134217728))},At=function(e){if(13===e.tag){var t=qs(),n=zs(e);Ks(e,n,t),Mc(e,n)}},St=function(){return gt},xt=function(e,t){var n=gt;try{return gt=e,t()}finally{gt=n}},Ae=function(e,t,n){switch(t){case"input":if(Z(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=gi(r);if(!i)throw Error(a(90));G(r),Z(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Te=Zs,Ce=$s;var Kc={usingClientEntryPoint:!1,Events:[mi,yi,gi,_e,Ie,Zs]},Wc={findFiberByHostInstance:vi,bundleType:0,version:"18.0.0-fc46dba67-20220329",rendererPackageName:"react-dom"},Hc={bundleType:Wc.bundleType,version:Wc.version,rendererPackageName:Wc.rendererPackageName,rendererConfig:Wc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:k.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:Wc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Gc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gc.isDisabled&&Gc.supportsFiber)try{it=Gc.inject(Hc),at=Gc}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Kc,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Vc(t))throw Error(a(200));return Nc(e,t,null,n)},t.createRoot=function(e,t){if(!Vc(e))throw Error(a(299));var n=!1,r="",i=Fc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Cc(e,1,!1,null,0,n,0,r,i),e[fi]=t.current,Vr(8===e.nodeType?e.parentNode:e),new jc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return $s(e)},t.hydrate=function(e,t,n){if(!Bc(t))throw Error(a(200));return zc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Vc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",u=Fc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(u=n.onRecoverableError)),t=Pc(t,null,e,1,null!=n?n:null,i,0,o,u),e[fi]=t.current,Vr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Uc(t)},t.render=function(e,t,n){if(!Bc(t))throw Error(a(200));return zc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Bc(e))throw Error(a(40));return!!e._reactRootContainer&&($s((function(){zc(null,null,e,!1,(function(){e._reactRootContainer=null,e[fi]=null}))})),!0)},t.unstable_batchedUpdates=Zs,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Bc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return zc(e,t,n,!1,r)},t.version="18.0.0-fc46dba67-20220329"},250:function(e,t,n){"use strict";var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},540:function(e,t,n){var r,i,a;i=[t,n(233)],r=function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(t);function r(e){return e&&e.__esModule?e:{default:e}}e.default=n.default},void 0===(a="function"===typeof r?r.apply(t,i):r)||(e.exports=a)},233:function(e,t,n){var r,i,a;i=[t,n(791),n(7)],r=function(e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setHasSupportToCaptureOption=d;var r=a(t),i=a(n);function a(e){return e&&e.__esModule?e:{default:e}}var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function u(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function f(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h=!1;function d(e){h=e}try{addEventListener("test",null,Object.defineProperty({},"capture",{get:function(){d(!0)}}))}catch(y){}function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{capture:!0};return h?e:e.capture}function v(e){if("touches"in e){var t=e.touches[0];return{x:t.pageX,y:t.pageY}}return{x:e.screenX,y:e.screenY}}var m=function(e){function t(){var e;s(this,t);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var a=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r)));return a._handleSwipeStart=a._handleSwipeStart.bind(a),a._handleSwipeMove=a._handleSwipeMove.bind(a),a._handleSwipeEnd=a._handleSwipeEnd.bind(a),a._onMouseDown=a._onMouseDown.bind(a),a._onMouseMove=a._onMouseMove.bind(a),a._onMouseUp=a._onMouseUp.bind(a),a._setSwiperRef=a._setSwiperRef.bind(a),a}return f(t,e),c(t,[{key:"componentDidMount",value:function(){this.swiper&&this.swiper.addEventListener("touchmove",this._handleSwipeMove,p({capture:!0,passive:!1}))}},{key:"componentWillUnmount",value:function(){this.swiper&&this.swiper.removeEventListener("touchmove",this._handleSwipeMove,p({capture:!0,passive:!1}))}},{key:"_onMouseDown",value:function(e){this.props.allowMouseEvents&&(this.mouseDown=!0,document.addEventListener("mouseup",this._onMouseUp),document.addEventListener("mousemove",this._onMouseMove),this._handleSwipeStart(e))}},{key:"_onMouseMove",value:function(e){this.mouseDown&&this._handleSwipeMove(e)}},{key:"_onMouseUp",value:function(e){this.mouseDown=!1,document.removeEventListener("mouseup",this._onMouseUp),document.removeEventListener("mousemove",this._onMouseMove),this._handleSwipeEnd(e)}},{key:"_handleSwipeStart",value:function(e){var t=v(e),n=t.x,r=t.y;this.moveStart={x:n,y:r},this.props.onSwipeStart(e)}},{key:"_handleSwipeMove",value:function(e){if(this.moveStart){var t=v(e),n=t.x,r=t.y,i=n-this.moveStart.x,a=r-this.moveStart.y;this.moving=!0,this.props.onSwipeMove({x:i,y:a},e)&&e.cancelable&&e.preventDefault(),this.movePosition={deltaX:i,deltaY:a}}}},{key:"_handleSwipeEnd",value:function(e){this.props.onSwipeEnd(e);var t=this.props.tolerance;this.moving&&this.movePosition&&(this.movePosition.deltaX<-t?this.props.onSwipeLeft(1,e):this.movePosition.deltaX>t&&this.props.onSwipeRight(1,e),this.movePosition.deltaY<-t?this.props.onSwipeUp(1,e):this.movePosition.deltaY>t&&this.props.onSwipeDown(1,e)),this.moveStart=null,this.moving=!1,this.movePosition=null}},{key:"_setSwiperRef",value:function(e){this.swiper=e,this.props.innerRef(e)}},{key:"render",value:function(){var e=this.props,t=(e.tagName,e.className),n=e.style,i=e.children,a=(e.allowMouseEvents,e.onSwipeUp,e.onSwipeDown,e.onSwipeLeft,e.onSwipeRight,e.onSwipeStart,e.onSwipeMove,e.onSwipeEnd,e.innerRef,e.tolerance,u(e,["tagName","className","style","children","allowMouseEvents","onSwipeUp","onSwipeDown","onSwipeLeft","onSwipeRight","onSwipeStart","onSwipeMove","onSwipeEnd","innerRef","tolerance"]));return r.default.createElement(this.props.tagName,o({ref:this._setSwiperRef,onMouseDown:this._onMouseDown,onTouchStart:this._handleSwipeStart,onTouchEnd:this._handleSwipeEnd,className:t,style:n},a),i)}}]),t}(t.Component);m.displayName="ReactSwipe",m.propTypes={tagName:i.default.string,className:i.default.string,style:i.default.object,children:i.default.node,allowMouseEvents:i.default.bool,onSwipeUp:i.default.func,onSwipeDown:i.default.func,onSwipeLeft:i.default.func,onSwipeRight:i.default.func,onSwipeStart:i.default.func,onSwipeMove:i.default.func,onSwipeEnd:i.default.func,innerRef:i.default.func,tolerance:i.default.number.isRequired},m.defaultProps={tagName:"div",allowMouseEvents:!1,onSwipeUp:function(){},onSwipeDown:function(){},onSwipeLeft:function(){},onSwipeRight:function(){},onSwipeStart:function(){},onSwipeMove:function(){},onSwipeEnd:function(){},innerRef:function(){},tolerance:0},e.default=m},void 0===(a="function"===typeof r?r.apply(t,i):r)||(e.exports=a)},988:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=function(e,t,n){var r=0===e?e:e+t;return"translate3d"+("("+("horizontal"===n?[r,0,0]:[0,r,0]).join(",")+")")}},80:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fadeAnimationHandler=t.slideStopSwipingHandler=t.slideSwipeAnimationHandler=t.slideAnimationHandler=void 0;var r,i=n(791),a=(r=n(988))&&r.__esModule?r:{default:r},o=n(735);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.slideAnimationHandler=function(e,t){var n={},r=t.selectedItem,u=r,c=i.Children.count(e.children)-1;if(e.infiniteLoop&&(r<0||r>c))return u<0?e.centerMode&&e.centerSlidePercentage&&"horizontal"===e.axis?n.itemListStyle=(0,o.setPosition)(-(c+2)*e.centerSlidePercentage-(100-e.centerSlidePercentage)/2,e.axis):n.itemListStyle=(0,o.setPosition)(100*-(c+2),e.axis):u>c&&(n.itemListStyle=(0,o.setPosition)(0,e.axis)),n;var l=(0,o.getPosition)(r,e),f=(0,a.default)(l,"%",e.axis),h=e.transitionTime+"ms";return n.itemListStyle={WebkitTransform:f,msTransform:f,OTransform:f,transform:f},t.swiping||(n.itemListStyle=s(s({},n.itemListStyle),{},{WebkitTransitionDuration:h,MozTransitionDuration:h,OTransitionDuration:h,transitionDuration:h,msTransitionDuration:h})),n};t.slideSwipeAnimationHandler=function(e,t,n,r){var a={},u="horizontal"===t.axis,s=i.Children.count(t.children),c=(0,o.getPosition)(n.selectedItem,t),l=t.infiniteLoop?(0,o.getPosition)(s-1,t)-100:(0,o.getPosition)(s-1,t),f=u?e.x:e.y,h=f;0===c&&f>0&&(h=0),c===l&&f<0&&(h=0);var d=c+100/(n.itemSize/h),p=Math.abs(f)>t.swipeScrollTolerance;return t.infiniteLoop&&p&&(0===n.selectedItem&&d>-100?d-=100*s:n.selectedItem===s-1&&d<100*-s&&(d+=100*s)),(!t.preventMovementUntilSwipeScrollTolerance||p||n.swipeMovementStarted)&&(n.swipeMovementStarted||r({swipeMovementStarted:!0}),a.itemListStyle=(0,o.setPosition)(d,t.axis)),p&&!n.cancelClick&&r({cancelClick:!0}),a};t.slideStopSwipingHandler=function(e,t){var n=(0,o.getPosition)(t.selectedItem,e);return{itemListStyle:(0,o.setPosition)(n,e.axis)}};t.fadeAnimationHandler=function(e,t){var n=e.transitionTime+"ms",r="ease-in-out",i={position:"absolute",display:"block",zIndex:-2,minHeight:"100%",opacity:0,top:0,right:0,left:0,bottom:0,transitionTimingFunction:r,msTransitionTimingFunction:r,MozTransitionTimingFunction:r,WebkitTransitionTimingFunction:r,OTransitionTimingFunction:r};return t.swiping||(i=s(s({},i),{},{WebkitTransitionDuration:n,MozTransitionDuration:n,OTransitionDuration:n,transitionDuration:n,msTransitionDuration:n})),{slideStyle:i,selectedStyle:s(s({},i),{},{opacity:1,position:"relative"}),prevStyle:s({},i)}}},594:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==d(e)&&"function"!==typeof e)return{default:e};var t=h();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=r?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}n.default=e,t&&t.set(e,n);return n}(n(791)),i=f(n(540)),a=f(n(887)),o=f(n(625)),u=f(n(149)),s=f(n(962)),c=n(735),l=n(80);function f(e){return e&&e.__esModule?e:{default:e}}function h(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return h=function(){return e},e}function d(e){return d="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function p(){return p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},p.apply(this,arguments)}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){S(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t){return g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},g(e,t)}function b(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A(e);if(t){var i=A(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return k(this,n)}}function k(e,t){return!t||"object"!==d(t)&&"function"!==typeof t?w(e):t}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(e){return A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},A(e)}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var x=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(d,e);var t,n,f,h=b(d);function d(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),S(w(t=h.call(this,e)),"thumbsRef",void 0),S(w(t),"carouselWrapperRef",void 0),S(w(t),"listRef",void 0),S(w(t),"itemsRef",void 0),S(w(t),"timer",void 0),S(w(t),"animationHandler",void 0),S(w(t),"setThumbsRef",(function(e){t.thumbsRef=e})),S(w(t),"setCarouselWrapperRef",(function(e){t.carouselWrapperRef=e})),S(w(t),"setListRef",(function(e){t.listRef=e})),S(w(t),"setItemsRef",(function(e,n){t.itemsRef||(t.itemsRef=[]),t.itemsRef[n]=e})),S(w(t),"autoPlay",(function(){r.Children.count(t.props.children)<=1||(t.clearAutoPlay(),t.props.autoPlay&&(t.timer=setTimeout((function(){t.increment()}),t.props.interval)))})),S(w(t),"clearAutoPlay",(function(){t.timer&&clearTimeout(t.timer)})),S(w(t),"resetAutoPlay",(function(){t.clearAutoPlay(),t.autoPlay()})),S(w(t),"stopOnHover",(function(){t.setState({isMouseEntered:!0},t.clearAutoPlay)})),S(w(t),"startOnLeave",(function(){t.setState({isMouseEntered:!1},t.autoPlay)})),S(w(t),"isFocusWithinTheCarousel",(function(){return!!t.carouselWrapperRef&&!((0,u.default)().activeElement!==t.carouselWrapperRef&&!t.carouselWrapperRef.contains((0,u.default)().activeElement))})),S(w(t),"navigateWithKeyboard",(function(e){if(t.isFocusWithinTheCarousel()){var n="horizontal"===t.props.axis,r=n?37:38;(n?39:40)===e.keyCode?t.increment():r===e.keyCode&&t.decrement()}})),S(w(t),"updateSizes",(function(){if(t.state.initialized&&t.itemsRef&&0!==t.itemsRef.length){var e="horizontal"===t.props.axis,n=t.itemsRef[0];if(n){var r=e?n.clientWidth:n.clientHeight;t.setState({itemSize:r}),t.thumbsRef&&t.thumbsRef.updateSizes()}}})),S(w(t),"setMountState",(function(){t.setState({hasMount:!0}),t.updateSizes()})),S(w(t),"handleClickItem",(function(e,n){0!==r.Children.count(t.props.children)&&(t.state.cancelClick?t.setState({cancelClick:!1}):(t.props.onClickItem(e,n),e!==t.state.selectedItem&&t.setState({selectedItem:e})))})),S(w(t),"handleOnChange",(function(e,n){r.Children.count(t.props.children)<=1||t.props.onChange(e,n)})),S(w(t),"handleClickThumb",(function(e,n){t.props.onClickThumb(e,n),t.moveTo(e)})),S(w(t),"onSwipeStart",(function(e){t.setState({swiping:!0}),t.props.onSwipeStart(e)})),S(w(t),"onSwipeEnd",(function(e){t.setState({swiping:!1,cancelClick:!1,swipeMovementStarted:!1}),t.props.onSwipeEnd(e),t.clearAutoPlay(),t.state.autoPlay&&t.autoPlay()})),S(w(t),"onSwipeMove",(function(e,n){t.props.onSwipeMove(n);var r=t.props.swipeAnimationHandler(e,t.props,t.state,t.setState.bind(w(t)));return t.setState(m({},r)),!!Object.keys(r).length})),S(w(t),"decrement",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;t.moveTo(t.state.selectedItem-("number"===typeof e?e:1))})),S(w(t),"increment",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;t.moveTo(t.state.selectedItem+("number"===typeof e?e:1))})),S(w(t),"moveTo",(function(e){if("number"===typeof e){var n=r.Children.count(t.props.children)-1;e<0&&(e=t.props.infiniteLoop?n:0),e>n&&(e=t.props.infiniteLoop?0:n),t.selectItem({selectedItem:e}),t.state.autoPlay&&!1===t.state.isMouseEntered&&t.resetAutoPlay()}})),S(w(t),"onClickNext",(function(){t.increment(1)})),S(w(t),"onClickPrev",(function(){t.decrement(1)})),S(w(t),"onSwipeForward",(function(){t.increment(1),t.props.emulateTouch&&t.setState({cancelClick:!0})})),S(w(t),"onSwipeBackwards",(function(){t.decrement(1),t.props.emulateTouch&&t.setState({cancelClick:!0})})),S(w(t),"changeItem",(function(e){return function(n){(0,c.isKeyboardEvent)(n)&&"Enter"!==n.key||t.moveTo(e)}})),S(w(t),"selectItem",(function(e){t.setState(m({previousItem:t.state.selectedItem},e),(function(){t.setState(t.animationHandler(t.props,t.state))})),t.handleOnChange(e.selectedItem,r.Children.toArray(t.props.children)[e.selectedItem])})),S(w(t),"getInitialImage",(function(){var e=t.props.selectedItem,n=t.itemsRef&&t.itemsRef[e];return(n&&n.getElementsByTagName("img")||[])[0]})),S(w(t),"getVariableItemHeight",(function(e){var n=t.itemsRef&&t.itemsRef[e];if(t.state.hasMount&&n&&n.children.length){var r=n.children[0].getElementsByTagName("img")||[];if(r.length>0){var i=r[0];if(!i.complete){i.addEventListener("load",(function e(){t.forceUpdate(),i.removeEventListener("load",e)}))}}var a=(r[0]||n.children[0]).clientHeight;return a>0?a:null}return null}));var n={initialized:!1,previousItem:e.selectedItem,selectedItem:e.selectedItem,hasMount:!1,isMouseEntered:!1,autoPlay:e.autoPlay,swiping:!1,swipeMovementStarted:!1,cancelClick:!1,itemSize:1,itemListStyle:{},slideStyle:{},selectedStyle:{},prevStyle:{}};return t.animationHandler="function"===typeof e.animationHandler&&e.animationHandler||"fade"===e.animationHandler&&l.fadeAnimationHandler||l.slideAnimationHandler,t.state=m(m({},n),t.animationHandler(e,n)),t}return t=d,(n=[{key:"componentDidMount",value:function(){this.props.children&&this.setupCarousel()}},{key:"componentDidUpdate",value:function(e,t){e.children||!this.props.children||this.state.initialized||this.setupCarousel(),!e.autoFocus&&this.props.autoFocus&&this.forceFocus(),t.swiping&&!this.state.swiping&&this.setState(m({},this.props.stopSwipingHandler(this.props,this.state))),e.selectedItem===this.props.selectedItem&&e.centerMode===this.props.centerMode||(this.updateSizes(),this.moveTo(this.props.selectedItem)),e.autoPlay!==this.props.autoPlay&&(this.props.autoPlay?this.setupAutoPlay():this.destroyAutoPlay(),this.setState({autoPlay:this.props.autoPlay}))}},{key:"componentWillUnmount",value:function(){this.destroyCarousel()}},{key:"setupCarousel",value:function(){var e=this;this.bindEvents(),this.state.autoPlay&&r.Children.count(this.props.children)>1&&this.setupAutoPlay(),this.props.autoFocus&&this.forceFocus(),this.setState({initialized:!0},(function(){var t=e.getInitialImage();t&&!t.complete?t.addEventListener("load",e.setMountState):e.setMountState()}))}},{key:"destroyCarousel",value:function(){this.state.initialized&&(this.unbindEvents(),this.destroyAutoPlay())}},{key:"setupAutoPlay",value:function(){this.autoPlay();var e=this.carouselWrapperRef;this.props.stopOnHover&&e&&(e.addEventListener("mouseenter",this.stopOnHover),e.addEventListener("mouseleave",this.startOnLeave))}},{key:"destroyAutoPlay",value:function(){this.clearAutoPlay();var e=this.carouselWrapperRef;this.props.stopOnHover&&e&&(e.removeEventListener("mouseenter",this.stopOnHover),e.removeEventListener("mouseleave",this.startOnLeave))}},{key:"bindEvents",value:function(){(0,s.default)().addEventListener("resize",this.updateSizes),(0,s.default)().addEventListener("DOMContentLoaded",this.updateSizes),this.props.useKeyboardArrows&&(0,u.default)().addEventListener("keydown",this.navigateWithKeyboard)}},{key:"unbindEvents",value:function(){(0,s.default)().removeEventListener("resize",this.updateSizes),(0,s.default)().removeEventListener("DOMContentLoaded",this.updateSizes);var e=this.getInitialImage();e&&e.removeEventListener("load",this.setMountState),this.props.useKeyboardArrows&&(0,u.default)().removeEventListener("keydown",this.navigateWithKeyboard)}},{key:"forceFocus",value:function(){var e;null===(e=this.carouselWrapperRef)||void 0===e||e.focus()}},{key:"renderItems",value:function(e){var t=this;return this.props.children?r.Children.map(this.props.children,(function(n,i){var o=i===t.state.selectedItem,u=i===t.state.previousItem,s=o&&t.state.selectedStyle||u&&t.state.prevStyle||t.state.slideStyle||{};t.props.centerMode&&"horizontal"===t.props.axis&&(s=m(m({},s),{},{minWidth:t.props.centerSlidePercentage+"%"})),t.state.swiping&&t.state.swipeMovementStarted&&(s=m(m({},s),{},{pointerEvents:"none"}));var c={ref:function(e){return t.setItemsRef(e,i)},key:"itemKey"+i+(e?"clone":""),className:a.default.ITEM(!0,i===t.state.selectedItem,i===t.state.previousItem),onClick:t.handleClickItem.bind(t,i,n),style:s};return r.default.createElement("li",c,t.props.renderItem(n,{isSelected:i===t.state.selectedItem,isPrevious:i===t.state.previousItem}))})):[]}},{key:"renderControls",value:function(){var e=this,t=this.props,n=t.showIndicators,i=t.labels,a=t.renderIndicator,o=t.children;return n?r.default.createElement("ul",{className:"control-dots"},r.Children.map(o,(function(t,n){return a&&a(e.changeItem(n),n===e.state.selectedItem,n,i.item)}))):null}},{key:"renderStatus",value:function(){return this.props.showStatus?r.default.createElement("p",{className:"carousel-status"},this.props.statusFormatter(this.state.selectedItem+1,r.Children.count(this.props.children))):null}},{key:"renderThumbs",value:function(){return this.props.showThumbs&&this.props.children&&0!==r.Children.count(this.props.children)?r.default.createElement(o.default,{ref:this.setThumbsRef,onSelectItem:this.handleClickThumb,selectedItem:this.state.selectedItem,transitionTime:this.props.transitionTime,thumbWidth:this.props.thumbWidth,labels:this.props.labels,emulateTouch:this.props.emulateTouch},this.props.renderThumbs(this.props.children)):null}},{key:"render",value:function(){var e=this;if(!this.props.children||0===r.Children.count(this.props.children))return null;var t=this.props.swipeable&&r.Children.count(this.props.children)>1,n="horizontal"===this.props.axis,o=this.props.showArrows&&r.Children.count(this.props.children)>1,u=o&&(this.state.selectedItem>0||this.props.infiniteLoop)||!1,s=o&&(this.state.selectedItem<r.Children.count(this.props.children)-1||this.props.infiniteLoop)||!1,c=this.renderItems(!0),l=c.shift(),f=c.pop(),h={className:a.default.SLIDER(!0,this.state.swiping),onSwipeMove:this.onSwipeMove,onSwipeStart:this.onSwipeStart,onSwipeEnd:this.onSwipeEnd,style:this.state.itemListStyle,tolerance:this.props.swipeScrollTolerance},d={};if(n){if(h.onSwipeLeft=this.onSwipeForward,h.onSwipeRight=this.onSwipeBackwards,this.props.dynamicHeight){var v=this.getVariableItemHeight(this.state.selectedItem);d.height=v||"auto"}}else h.onSwipeUp="natural"===this.props.verticalSwipe?this.onSwipeBackwards:this.onSwipeForward,h.onSwipeDown="natural"===this.props.verticalSwipe?this.onSwipeForward:this.onSwipeBackwards,h.style=m(m({},h.style),{},{height:this.state.itemSize}),d.height=this.state.itemSize;return r.default.createElement("div",{"aria-label":this.props.ariaLabel,className:a.default.ROOT(this.props.className),ref:this.setCarouselWrapperRef,tabIndex:this.props.useKeyboardArrows?0:void 0},r.default.createElement("div",{className:a.default.CAROUSEL(!0),style:{width:this.props.width}},this.renderControls(),this.props.renderArrowPrev(this.onClickPrev,u,this.props.labels.leftArrow),r.default.createElement("div",{className:a.default.WRAPPER(!0,this.props.axis),style:d},t?r.default.createElement(i.default,p({tagName:"ul",innerRef:this.setListRef},h,{allowMouseEvents:this.props.emulateTouch}),this.props.infiniteLoop&&f,this.renderItems(),this.props.infiniteLoop&&l):r.default.createElement("ul",{className:a.default.SLIDER(!0,this.state.swiping),ref:function(t){return e.setListRef(t)},style:this.state.itemListStyle||{}},this.props.infiniteLoop&&f,this.renderItems(),this.props.infiniteLoop&&l)),this.props.renderArrowNext(this.onClickNext,s,this.props.labels.rightArrow),this.renderStatus()),this.renderThumbs())}}])&&y(t.prototype,n),f&&y(t,f),d}(r.default.Component);t.default=x,S(x,"displayName","Carousel"),S(x,"defaultProps",{ariaLabel:void 0,axis:"horizontal",centerSlidePercentage:80,interval:3e3,labels:{leftArrow:"previous slide / item",rightArrow:"next slide / item",item:"slide item"},onClickItem:c.noop,onClickThumb:c.noop,onChange:c.noop,onSwipeStart:function(){},onSwipeEnd:function(){},onSwipeMove:function(){return!1},preventMovementUntilSwipeScrollTolerance:!1,renderArrowPrev:function(e,t,n){return r.default.createElement("button",{type:"button","aria-label":n,className:a.default.ARROW_PREV(!t),onClick:e})},renderArrowNext:function(e,t,n){return r.default.createElement("button",{type:"button","aria-label":n,className:a.default.ARROW_NEXT(!t),onClick:e})},renderIndicator:function(e,t,n,i){return r.default.createElement("li",{className:a.default.DOT(t),onClick:e,onKeyDown:e,value:n,key:n,role:"button",tabIndex:0,"aria-label":"".concat(i," ").concat(n+1)})},renderItem:function(e){return e},renderThumbs:function(e){var t=r.Children.map(e,(function(e){var t=e;if("img"!==e.type&&(t=r.Children.toArray(e.props.children).find((function(e){return"img"===e.type}))),t)return t}));return 0===t.filter((function(e){return e})).length?(console.warn("No images found! Can't build the thumb list without images. If you don't need thumbs, set showThumbs={false} in the Carousel. Note that it's not possible to get images rendered inside custom components. More info at https://github.com/leandrowd/react-responsive-carousel/blob/master/TROUBLESHOOTING.md"),[]):t},statusFormatter:c.defaultStatusFormatter,selectedItem:0,showArrows:!0,showIndicators:!0,showStatus:!0,showThumbs:!0,stopOnHover:!0,swipeScrollTolerance:5,swipeable:!0,transitionTime:350,verticalSwipe:"standard",width:"100%",animationHandler:"slide",swipeAnimationHandler:l.slideSwipeAnimationHandler,stopSwipingHandler:l.slideStopSwipingHandler})},103:function(){},735:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setPosition=t.getPosition=t.isKeyboardEvent=t.defaultStatusFormatter=t.noop=void 0;var r,i=n(791),a=(r=n(988))&&r.__esModule?r:{default:r};t.noop=function(){};t.defaultStatusFormatter=function(e,t){return"".concat(e," of ").concat(t)};t.isKeyboardEvent=function(e){return!!e&&e.hasOwnProperty("key")};t.getPosition=function(e,t){if(t.infiniteLoop&&++e,0===e)return 0;var n=i.Children.count(t.children);if(t.centerMode&&"horizontal"===t.axis){var r=-e*t.centerSlidePercentage,a=n-1;return e&&(e!==a||t.infiniteLoop)?r+=(100-t.centerSlidePercentage)/2:e===a&&(r+=100-t.centerSlidePercentage),r}return 100*-e};t.setPosition=function(e,t){var n={};return["WebkitTransform","MozTransform","MsTransform","OTransform","transform","msTransform"].forEach((function(r){n[r]=(0,a.default)(e,"%",t)})),n}},625:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==f(e)&&"function"!==typeof e)return{default:e};var t=l();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=r?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}n.default=e,t&&t.set(e,n);return n}(n(791)),i=c(n(887)),a=n(970),o=c(n(988)),u=c(n(540)),s=c(n(962));function c(e){return e&&e.__esModule?e:{default:e}}function l(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return l=function(){return e},e}function f(e){return f="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function h(){return h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},h.apply(this,arguments)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},p(e,t)}function v(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g(e);if(t){var i=g(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return m(this,n)}}function m(e,t){return!t||"object"!==f(t)&&"function"!==typeof t?y(e):t}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var k=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(f,e);var t,n,c,l=v(f);function f(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),b(y(t=l.call(this,e)),"itemsWrapperRef",void 0),b(y(t),"itemsListRef",void 0),b(y(t),"thumbsRef",void 0),b(y(t),"setItemsWrapperRef",(function(e){t.itemsWrapperRef=e})),b(y(t),"setItemsListRef",(function(e){t.itemsListRef=e})),b(y(t),"setThumbsRef",(function(e,n){t.thumbsRef||(t.thumbsRef=[]),t.thumbsRef[n]=e})),b(y(t),"updateSizes",(function(){if(t.props.children&&t.itemsWrapperRef&&t.thumbsRef){var e=r.Children.count(t.props.children),n=t.itemsWrapperRef.clientWidth,i=t.props.thumbWidth?t.props.thumbWidth:(0,a.outerWidth)(t.thumbsRef[0]),o=Math.floor(n/i),u=o<e,s=u?e-o:0;t.setState((function(e,n){return{itemSize:i,visibleItems:o,firstItem:u?t.getFirstItem(n.selectedItem):0,lastPosition:s,showArrows:u}}))}})),b(y(t),"handleClickItem",(function(e,n,r){if(!function(e){return e.hasOwnProperty("key")}(r)||"Enter"===r.key){var i=t.props.onSelectItem;"function"===typeof i&&i(e,n)}})),b(y(t),"onSwipeStart",(function(){t.setState({swiping:!0})})),b(y(t),"onSwipeEnd",(function(){t.setState({swiping:!1})})),b(y(t),"onSwipeMove",(function(e){var n=e.x;if(!t.state.itemSize||!t.itemsWrapperRef||!t.state.visibleItems)return!1;var i=r.Children.count(t.props.children),a=-100*t.state.firstItem/t.state.visibleItems;0===a&&n>0&&(n=0),a===100*-Math.max(i-t.state.visibleItems,0)/t.state.visibleItems&&n<0&&(n=0);var u=a+100/(t.itemsWrapperRef.clientWidth/n);return t.itemsListRef&&["WebkitTransform","MozTransform","MsTransform","OTransform","transform","msTransform"].forEach((function(e){t.itemsListRef.style[e]=(0,o.default)(u,"%",t.props.axis)})),!0})),b(y(t),"slideRight",(function(e){t.moveTo(t.state.firstItem-("number"===typeof e?e:1))})),b(y(t),"slideLeft",(function(e){t.moveTo(t.state.firstItem+("number"===typeof e?e:1))})),b(y(t),"moveTo",(function(e){e=(e=e<0?0:e)>=t.state.lastPosition?t.state.lastPosition:e,t.setState({firstItem:e})})),t.state={selectedItem:e.selectedItem,swiping:!1,showArrows:!1,firstItem:0,visibleItems:0,lastPosition:0},t}return t=f,(n=[{key:"componentDidMount",value:function(){this.setupThumbs()}},{key:"componentDidUpdate",value:function(e){this.props.selectedItem!==this.state.selectedItem&&this.setState({selectedItem:this.props.selectedItem,firstItem:this.getFirstItem(this.props.selectedItem)}),this.props.children!==e.children&&this.updateSizes()}},{key:"componentWillUnmount",value:function(){this.destroyThumbs()}},{key:"setupThumbs",value:function(){(0,s.default)().addEventListener("resize",this.updateSizes),(0,s.default)().addEventListener("DOMContentLoaded",this.updateSizes),this.updateSizes()}},{key:"destroyThumbs",value:function(){(0,s.default)().removeEventListener("resize",this.updateSizes),(0,s.default)().removeEventListener("DOMContentLoaded",this.updateSizes)}},{key:"getFirstItem",value:function(e){var t=e;return e>=this.state.lastPosition&&(t=this.state.lastPosition),e<this.state.firstItem+this.state.visibleItems&&(t=this.state.firstItem),e<this.state.firstItem&&(t=e),t}},{key:"renderItems",value:function(){var e=this;return this.props.children.map((function(t,n){var a=i.default.ITEM(!1,n===e.state.selectedItem),o={key:n,ref:function(t){return e.setThumbsRef(t,n)},className:a,onClick:e.handleClickItem.bind(e,n,e.props.children[n]),onKeyDown:e.handleClickItem.bind(e,n,e.props.children[n]),"aria-label":"".concat(e.props.labels.item," ").concat(n+1),style:{width:e.props.thumbWidth}};return r.default.createElement("li",h({},o,{role:"button",tabIndex:0}),t)}))}},{key:"render",value:function(){var e=this;if(!this.props.children)return null;var t,n=r.Children.count(this.props.children)>1,a=this.state.showArrows&&this.state.firstItem>0,s=this.state.showArrows&&this.state.firstItem<this.state.lastPosition,c=-this.state.firstItem*(this.state.itemSize||0),l=(0,o.default)(c,"px",this.props.axis),f=this.props.transitionTime+"ms";return t={WebkitTransform:l,MozTransform:l,MsTransform:l,OTransform:l,transform:l,msTransform:l,WebkitTransitionDuration:f,MozTransitionDuration:f,MsTransitionDuration:f,OTransitionDuration:f,transitionDuration:f,msTransitionDuration:f},r.default.createElement("div",{className:i.default.CAROUSEL(!1)},r.default.createElement("div",{className:i.default.WRAPPER(!1),ref:this.setItemsWrapperRef},r.default.createElement("button",{type:"button",className:i.default.ARROW_PREV(!a),onClick:function(){return e.slideRight()},"aria-label":this.props.labels.leftArrow}),n?r.default.createElement(u.default,{tagName:"ul",className:i.default.SLIDER(!1,this.state.swiping),onSwipeLeft:this.slideLeft,onSwipeRight:this.slideRight,onSwipeMove:this.onSwipeMove,onSwipeStart:this.onSwipeStart,onSwipeEnd:this.onSwipeEnd,style:t,innerRef:this.setItemsListRef,allowMouseEvents:this.props.emulateTouch},this.renderItems()):r.default.createElement("ul",{className:i.default.SLIDER(!1,this.state.swiping),ref:function(t){return e.setItemsListRef(t)},style:t},this.renderItems()),r.default.createElement("button",{type:"button",className:i.default.ARROW_NEXT(!s),onClick:function(){return e.slideLeft()},"aria-label":this.props.labels.rightArrow})))}}])&&d(t.prototype,n),c&&d(t,c),f}(r.Component);t.default=k,b(k,"displayName","Thumbs"),b(k,"defaultProps",{axis:"horizontal",labels:{leftArrow:"previous slide / item",rightArrow:"next slide / item",item:"slide item"},selectedItem:0,thumbWidth:80,transitionTime:350})},887:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,i=(r=n(694))&&r.__esModule?r:{default:r};var a={ROOT:function(e){return(0,i.default)(function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({"carousel-root":!0},e||"",!!e))},CAROUSEL:function(e){return(0,i.default)({carousel:!0,"carousel-slider":e})},WRAPPER:function(e,t){return(0,i.default)({"thumbs-wrapper":!e,"slider-wrapper":e,"axis-horizontal":"horizontal"===t,"axis-vertical":"horizontal"!==t})},SLIDER:function(e,t){return(0,i.default)({thumbs:!e,slider:e,animated:!t})},ITEM:function(e,t,n){return(0,i.default)({thumb:!e,slide:e,selected:t,previous:n})},ARROW_PREV:function(e){return(0,i.default)({"control-arrow control-prev":!0,"control-disabled":e})},ARROW_NEXT:function(e){return(0,i.default)({"control-arrow control-next":!0,"control-disabled":e})},DOT:function(e){return(0,i.default)({dot:!0,selected:e})}};t.default=a},970:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.outerWidth=void 0;t.outerWidth=function(e){var t=e.offsetWidth,n=getComputedStyle(e);return t+=parseInt(n.marginLeft)+parseInt(n.marginRight)}},197:function(e,t,n){"use strict";Object.defineProperty(t,"lr",{enumerable:!0,get:function(){return r.default}});var r=o(n(594)),i=n(103),a=o(n(625));function o(e){return e&&e.__esModule?e:{default:e}}},149:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=function(){return document}},962:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=function(){return window}},374:function(e,t,n){"use strict";var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:u.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function g(){}function b(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=y.prototype;var k=b.prototype=new g;k.constructor=b,v(k,y.prototype),k.isPureReactComponent=!0;var w=Array.isArray,A=Object.prototype.hasOwnProperty,S={current:null},x={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var i,a={},o=null,u=null;if(null!=t)for(i in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)A.call(t,i)&&!x.hasOwnProperty(i)&&(a[i]=t[i]);var s=arguments.length-2;if(1===s)a.children=r;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===a[i]&&(a[i]=s[i]);return{$$typeof:n,type:e,key:o,ref:u,props:a,_owner:S.current}}function _(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var I=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function C(e,t,i,a,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case r:s=!0}}if(s)return o=o(s=e),e=""===a?"."+T(s,0):a,w(o)?(i="",null!=e&&(i=e.replace(I,"$&/")+"/"),C(o,t,i,"",(function(e){return e}))):null!=o&&(_(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(I,"$&/")+"/")+e)),t.push(o)),1;if(s=0,a=""===a?".":a+":",w(e))for(var c=0;c<e.length;c++){var l=a+T(u=e[c],c);s+=C(u,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=C(u=u.value,t,i,l=a+T(u,c++),o);else if("object"===u)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function N(e,t,n){if(null==e)return e;var r=[],i=0;return C(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function D(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},O={transition:null},L={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:O,ReactCurrentOwner:S};t.Children={map:N,forEach:function(e,t,n){N(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return N(e,(function(){t++})),t},toArray:function(e){return N(e,(function(e){return e}))||[]},only:function(e){if(!_(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=b,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,u=S.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)A.call(t,c)&&!x.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];i.children=s}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:u}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=_,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:D}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=O.transition;O.transition={};try{e()}finally{O.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return P.current.useCallback(e,t)},t.useContext=function(e){return P.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return P.current.useDeferredValue(e)},t.useEffect=function(e,t){return P.current.useEffect(e,t)},t.useId=function(){return P.current.useId()},t.useImperativeHandle=function(e,t,n){return P.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return P.current.useMemo(e,t)},t.useReducer=function(e,t,n){return P.current.useReducer(e,t,n)},t.useRef=function(e){return P.current.useRef(e)},t.useState=function(e){return P.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return P.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return P.current.useTransition()},t.version="18.0.0-fc46dba67-20220329"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},727:function(e){var t=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(D){s=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof m?t:m,a=Object.create(i.prototype),o=new T(r||[]);return a._invoke=function(e,t,n){var r=f;return function(i,a){if(r===d)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw a;return N()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=E(o,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var s=l(e,t,n);if("normal"===s.type){if(r=n.done?p:h,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r=p,n.method="throw",n.arg=s.arg)}}}(e,n,o),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(D){return{type:"throw",arg:D}}}e.wrap=c;var f="suspendedStart",h="suspendedYield",d="executing",p="completed",v={};function m(){}function y(){}function g(){}var b={};s(b,a,(function(){return this}));var k=Object.getPrototypeOf,w=k&&k(k(C([])));w&&w!==n&&r.call(w,a)&&(b=w);var A=g.prototype=m.prototype=Object.create(b);function S(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(i,a,o,u){var s=l(e[i],e,a);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"===typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,o,u)}),(function(e){n("throw",e,o,u)})):t.resolve(f).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,u)}))}u(s.arg)}var i;this._invoke=function(e,r){function a(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(a,a):a()}}function E(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,E(e,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=l(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function C(e){if(e){var n=e[a];if(n)return n.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}return{next:N}}function N(){return{value:t,done:!0}}return y.prototype=g,s(A,"constructor",g),s(g,"constructor",y),y.displayName=s(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,s(e,u,"GeneratorFunction")),e.prototype=Object.create(A),e},e.awrap=function(e){return{__await:e}},S(x.prototype),s(x.prototype,o,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new x(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},S(A),s(A,u,"Generator"),s(A,a,(function(){return this})),s(A,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=C,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(I),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return u.type="throw",u.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],u=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),I(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;I(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:C(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}(e.exports);try{regeneratorRuntime=t}catch(n){"object"===typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var u=2*(r+1)-1,s=e[u],c=u+1,l=e[c];if(0>a(s,n))c<i&&0>a(l,s)?(e[r]=l,e[c]=n,r=c):(e[r]=s,e[u]=n,r=u);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}var c=[],l=[],f=1,h=null,d=3,p=!1,v=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function k(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function w(e){if(m=!1,k(e),!v)if(null!==r(c))v=!0,O(A);else{var t=r(l);null!==t&&L(w,t.startTime-e)}}function A(e,n){v=!1,m&&(m=!1,g(_),_=-1),p=!0;var a=d;try{for(k(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!C());){var o=h.callback;if("function"===typeof o){h.callback=null,d=h.priorityLevel;var u=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?h.callback=u:h===r(c)&&i(c),k(n)}else i(c);h=r(c)}if(null!==h)var s=!0;else{var f=r(l);null!==f&&L(w,f.startTime-n),s=!1}return s}finally{h=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,x=!1,E=null,_=-1,I=5,T=-1;function C(){return!(t.unstable_now()-T<I)}function N(){if(null!==E){var e=t.unstable_now();T=e;var n=!0;try{n=E(!0,e)}finally{n?S():(x=!1,E=null)}}else x=!1}if("function"===typeof b)S=function(){b(N)};else if("undefined"!==typeof MessageChannel){var D=new MessageChannel,P=D.port2;D.port1.onmessage=N,S=function(){P.postMessage(null)}}else S=function(){y(N,0)};function O(e){E=e,x||(x=!0,S())}function L(e,n){_=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,O(A))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:f++,callback:i,priorityLevel:e,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(m?(g(_),_=-1):m=!0,L(w,a-o))):(e.sortIndex=u,n(c,e),v||p||(v=!0,O(A))),e},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,n),a.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/ecommerce-project/",function(){"use strict";var e={};n.r(e),n.d(e,{FirebaseError:function(){return Ke},SDK_VERSION:function(){return jt},_DEFAULT_ENTRY_NAME:function(){return Et},_addComponent:function(){return Ct},_addOrOverwriteComponent:function(){return Nt},_apps:function(){return It},_clearComponents:function(){return Lt},_components:function(){return Tt},_getProvider:function(){return Pt},_registerComponent:function(){return Dt},_removeServiceInstance:function(){return Ot},deleteApp:function(){return qt},getApp:function(){return Vt},getApps:function(){return Bt},initializeApp:function(){return Ut},onLog:function(){return Wt},registerVersion:function(){return Kt},setLogLevel:function(){return Ht}});var t,r=n(791),i=n(250),a="App_App__p1qEK";function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){if(e){if("string"===typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(s){u=!0,i=s}finally{try{o||null==n.return||n.return()}finally{if(u)throw i}}return a}}(e,t)||u(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(){return c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(t||(t={}));var l=function(e){return e};var f="beforeunload",h="popstate";function d(e){e.preventDefault(),e.returnValue=""}function p(){var e=[];return{get length(){return e.length},push:function(t){return e.push(t),function(){e=e.filter((function(e){return e!==t}))}},call:function(t){e.forEach((function(e){return e&&e(t)}))}}}function v(){return Math.random().toString(36).substr(2,8)}function m(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function y(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}var g=(0,r.createContext)(null);var b=(0,r.createContext)(null);var k=(0,r.createContext)({outlet:null,matches:[]});function w(e,t){if(!e)throw new Error(t)}function A(e,t,n){void 0===n&&(n="/");var r=N(("string"===typeof t?y(t):t).pathname||"/",n);if(null==r)return null;var i=S(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=I(i[o],r);return a}function S(e,t,n,r){return void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r=""),e.forEach((function(e,i){var a={relativePath:e.path||"",caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};a.relativePath.startsWith("/")&&(a.relativePath.startsWith(r)||w(!1),a.relativePath=a.relativePath.slice(r.length));var o=D([r,a.relativePath]),u=n.concat(a);e.children&&e.children.length>0&&(!0===e.index&&w(!1),S(e.children,t,u,o)),(null!=e.path||e.index)&&t.push({path:o,score:_(o,e.index),routesMeta:u})})),t}var x=/^:\w+$/,E=function(e){return"*"===e};function _(e,t){var n=e.split("/"),r=n.length;return n.some(E)&&(r+=-2),t&&(r+=2),n.filter((function(e){return!E(e)})).reduce((function(e,t){return e+(x.test(t)?3:""===t?1:10)}),r)}function I(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var u=n[o],s=o===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=T({path:u.relativePath,caseSensitive:u.caseSensitive,end:s},c);if(!l)return null;Object.assign(r,l.params);var f=u.route;a.push({params:r,pathname:D([i,l.pathname]),pathnameBase:P(D([i,l.pathnameBase])),route:f}),"/"!==l.pathnameBase&&(i=D([i,l.pathnameBase]))}return a}function T(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(function(e,t){return r.push(t),"([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):i+=n?"\\/*$":"(?:(?=[.~-]|%[0-9A-F]{2})|\\b|\\/|$)";return[new RegExp(i,t?void 0:"i"),r]}(e.path,e.caseSensitive,e.end),r=s(n,2),i=r[0],a=r[1],o=t.match(i);if(!o)return null;var u=o[0],c=u.replace(/(.)\/+$/,"$1"),l=o.slice(1);return{params:a.reduce((function(e,t,n){if("*"===t){var r=l[n]||"";c=u.slice(0,u.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return e}}(l[n]||""),e}),{}),pathname:u,pathnameBase:c,pattern:e}}function C(e,t,n){var r,i="string"===typeof e?y(e):e,a=""===e||""===i.pathname?"/":i.pathname;if(null==a)r=n;else{var o=t.length-1;if(a.startsWith("..")){for(var u=a.split("/");".."===u[0];)u.shift(),o-=1;i.pathname=u.join("/")}r=o>=0?t[o]:"/"}var s=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?y(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,o=n.hash,u=void 0===o?"":o,s=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:s,search:O(a),hash:L(u)}}(i,r);return a&&"/"!==a&&a.endsWith("/")&&!s.pathname.endsWith("/")&&(s.pathname+="/"),s}function N(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=e.charAt(t.length);return n&&"/"!==n?null:e.slice(t.length)||"/"}var D=function(e){return e.join("/").replace(/\/\/+/g,"/")},P=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},O=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},L=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""};function R(e){M()||w(!1);var t=(0,r.useContext)(g),n=t.basename,i=t.navigator,a=V(e),o=a.hash,u=a.pathname,s=a.search,c=u;if("/"!==n){var l=function(e){return""===e||""===e.pathname?"/":"string"===typeof e?y(e).pathname:e.pathname}(e),f=null!=l&&l.endsWith("/");c="/"===u?n+(f?"/":""):D([n,u])}return i.createHref({pathname:c,search:s,hash:o})}function M(){return null!=(0,r.useContext)(b)}function F(){return M()||w(!1),(0,r.useContext)(b).location}function j(){M()||w(!1);var e=(0,r.useContext)(g),t=e.basename,n=e.navigator,i=(0,r.useContext)(k).matches,a=F().pathname,o=JSON.stringify(i.map((function(e){return e.pathnameBase}))),u=(0,r.useRef)(!1);(0,r.useEffect)((function(){u.current=!0}));var s=(0,r.useCallback)((function(e,r){if(void 0===r&&(r={}),u.current)if("number"!==typeof e){var i=C(e,JSON.parse(o),a);"/"!==t&&(i.pathname=D([t,i.pathname])),(r.replace?n.replace:n.push)(i,r.state)}else n.go(e)}),[t,n,o,a]);return s}function U(){var e=(0,r.useContext)(k).matches,t=e[e.length-1];return t?t.params:{}}function V(e){var t=(0,r.useContext)(k).matches,n=F().pathname,i=JSON.stringify(t.map((function(e){return e.pathnameBase})));return(0,r.useMemo)((function(){return C(e,JSON.parse(i),n)}),[e,i,n])}function B(e,t){return void 0===t&&(t=[]),null==e?null:e.reduceRight((function(n,i,a){return(0,r.createElement)(k.Provider,{children:void 0!==i.route.element?i.route.element:n,value:{outlet:n,matches:t.concat(e.slice(0,a+1))}})}),null)}function q(e){w(!1)}function z(e){var n=e.basename,i=void 0===n?"/":n,a=e.children,o=void 0===a?null:a,u=e.location,s=e.navigationType,c=void 0===s?t.Pop:s,l=e.navigator,f=e.static,h=void 0!==f&&f;M()&&w(!1);var d=P(i),p=(0,r.useMemo)((function(){return{basename:d,navigator:l,static:h}}),[d,l,h]);"string"===typeof u&&(u=y(u));var v=u,m=v.pathname,k=void 0===m?"/":m,A=v.search,S=void 0===A?"":A,x=v.hash,E=void 0===x?"":x,_=v.state,I=void 0===_?null:_,T=v.key,C=void 0===T?"default":T,D=(0,r.useMemo)((function(){var e=N(k,d);return null==e?null:{pathname:e,search:S,hash:E,state:I,key:C}}),[d,k,S,E,I,C]);return null==D?null:(0,r.createElement)(g.Provider,{value:p},(0,r.createElement)(b.Provider,{children:o,value:{location:D,navigationType:c}}))}function K(e){var t=e.children,n=e.location;return function(e,t){M()||w(!1);var n,i=(0,r.useContext)(k).matches,a=i[i.length-1],o=a?a.params:{},u=(a&&a.pathname,a?a.pathnameBase:"/"),s=(a&&a.route,F());if(t){var c,l="string"===typeof t?y(t):t;"/"===u||(null==(c=l.pathname)?void 0:c.startsWith(u))||w(!1),n=l}else n=s;var f=n.pathname||"/",h=A(e,{pathname:"/"===u?f:f.slice(u.length)||"/"});return B(h&&h.map((function(e){return Object.assign({},e,{params:Object.assign({},o,e.params),pathname:D([u,e.pathname]),pathnameBase:"/"===e.pathnameBase?u:D([u,e.pathnameBase])})})),i)}(W(t),n)}function W(e){var t=[];return r.Children.forEach(e,(function(e){if((0,r.isValidElement)(e))if(e.type!==r.Fragment){e.type!==q&&w(!1);var n={caseSensitive:e.props.caseSensitive,element:e.props.element,index:e.props.index,path:e.props.path};e.props.children&&(n.children=W(e.props.children)),t.push(n)}else t.push.apply(t,W(e.props.children))})),t}function H(){return H=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},H.apply(this,arguments)}function G(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var Q=["onClick","reloadDocument","replace","state","target","to"];function J(e){var n=e.basename,i=e.children,a=e.window,o=(0,r.useRef)();null==o.current&&(o.current=function(e){void 0===e&&(e={});var n=e.window,r=void 0===n?document.defaultView:n,i=r.history;function a(){var e=r.location,t=e.pathname,n=e.search,a=e.hash,o=i.state||{};return[o.idx,l({pathname:t,search:n,hash:a,state:o.usr||null,key:o.key||"default"})]}var o=null;r.addEventListener(h,(function(){if(o)w.call(o),o=null;else{var e=t.Pop,n=a(),r=n[0],i=n[1];if(w.length){if(null!=r){var u=g-r;u&&(o={action:e,location:i,retry:function(){I(-1*u)}},I(u))}}else _(e)}}));var u=t.Pop,s=a(),g=s[0],b=s[1],k=p(),w=p();function A(e){return"string"===typeof e?e:m(e)}function S(e,t){return void 0===t&&(t=null),l(c({pathname:b.pathname,hash:"",search:""},"string"===typeof e?y(e):e,{state:t,key:v()}))}function x(e,t){return[{usr:e.state,key:e.key,idx:t},A(e)]}function E(e,t,n){return!w.length||(w.call({action:e,location:t,retry:n}),!1)}function _(e){u=e;var t=a();g=t[0],b=t[1],k.call({action:u,location:b})}function I(e){i.go(e)}null==g&&(g=0,i.replaceState(c({},i.state,{idx:g}),""));var T={get action(){return u},get location(){return b},createHref:A,push:function e(n,a){var o=t.Push,u=S(n,a);if(E(o,u,(function(){e(n,a)}))){var s=x(u,g+1),c=s[0],l=s[1];try{i.pushState(c,"",l)}catch(f){r.location.assign(l)}_(o)}},replace:function e(n,r){var a=t.Replace,o=S(n,r);if(E(a,o,(function(){e(n,r)}))){var u=x(o,g),s=u[0],c=u[1];i.replaceState(s,"",c),_(a)}},go:I,back:function(){I(-1)},forward:function(){I(1)},listen:function(e){return k.push(e)},block:function(e){var t=w.push(e);return 1===w.length&&r.addEventListener(f,d),function(){t(),w.length||r.removeEventListener(f,d)}}};return T}({window:a}));var u=o.current,g=s((0,r.useState)({action:u.action,location:u.location}),2),b=g[0],k=g[1];return(0,r.useLayoutEffect)((function(){return u.listen(k)}),[u]),(0,r.createElement)(z,{basename:n,children:i,location:b.location,navigationType:b.action,navigator:u})}var Y=(0,r.forwardRef)((function(e,t){var n=e.onClick,i=e.reloadDocument,a=e.replace,o=void 0!==a&&a,u=e.state,s=e.target,c=e.to,l=G(e,Q),f=R(c),h=function(e,t){var n=void 0===t?{}:t,i=n.target,a=n.replace,o=n.state,u=j(),s=F(),c=V(e);return(0,r.useCallback)((function(t){if(0===t.button&&(!i||"_self"===i)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(t)){t.preventDefault();var n=!!a||m(s)===m(c);u(e,{replace:n,state:o})}}),[s,u,c,a,o,i,e])}(c,{replace:o,state:u,target:s});return(0,r.createElement)("a",H({},l,{href:f,onClick:function(e){n&&n(e),e.defaultPrevented||i||h(e)},ref:t,target:s}))}));function X(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,i)}function Z(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){X(a,r,i,o,u,"next",e)}function u(e){X(a,r,i,o,u,"throw",e)}o(void 0)}))}}var $=n(757),ee=n.n($),te="CardContainer_CardContainer__FC9fV",ne="CardContainer_CardContainer__placeholder__PlAxA",re=n(184),ie=function(e){return(0,re.jsx)("div",{className:te,children:e.children.length>0?e.children:(0,re.jsx)("div",{className:ne,children:(0,re.jsx)("p",{children:"Nothing here."})})})},ae="ProductCard_ProductCard__pIx+9",oe="ProductCard_ProductCard__imageContainer__WNGsV",ue="ProductCard_ProductCard__img__oUzof",se="ProductCard_ProductCard__OutOfStock__XPGp5",ce="ProductCard_ProductCard__favIcon__ZSd+2";function le(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function he(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fe(Object(n),!0).forEach((function(t){le(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function de(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var pe=["count","wrapper","className","containerClassName","containerTestId","circle","style"],ve=r.createContext({});function me(e){for(var t,n,i,a=e.count,o=void 0===a?1:a,u=e.wrapper,c=e.className,l=e.containerClassName,f=e.containerTestId,h=e.circle,d=void 0!==h&&h,p=e.style,v=de(e,pe),m=r.useContext(ve),y=he({},v),g=0,b=Object.entries(v);g<b.length;g++){var k=s(b[g],2),w=k[0];"undefined"===typeof k[1]&&delete y[w]}var A=he(he(he({},m),y),{},{circle:d}),S=he(he({},p),function(e){var t=e.baseColor,n=e.highlightColor,r=e.width,i=e.height,a=e.borderRadius,o=e.circle,u=e.direction,s=e.duration,c=e.enableAnimation,l=void 0===c||c,f={};return"rtl"===u&&(f["--animation-direction"]="reverse"),"number"===typeof s&&(f["--animation-duration"]="".concat(s,"s")),l||(f["--pseudo-element-display"]="none"),"string"!==typeof r&&"number"!==typeof r||(f.width=r),"string"!==typeof i&&"number"!==typeof i||(f.height=i),"string"!==typeof a&&"number"!==typeof a||(f.borderRadius=a),o&&(f.borderRadius="50%"),"undefined"!==typeof t&&(f["--base-color"]=t),"undefined"!==typeof n&&(f["--highlight-color"]=n),f}(A)),x="react-loading-skeleton";c&&(x+=" ".concat(c));for(var E=null!==(t=A.inline)&&void 0!==t&&t,_=[],I=Math.ceil(o),T=0;T<I;T++){var C=S;if(I>o&&T===I-1){var N=null!==(n=C.width)&&void 0!==n?n:"100%",D=o%1,P="number"===typeof N?N*D:"calc(".concat(N," * ").concat(D,")");C=he(he({},C),{},{width:P})}var O=r.createElement("span",{className:x,style:C,key:T},"\u200c");E?_.push(O):_.push(r.createElement(r.Fragment,{key:T},O,r.createElement("br",null)))}return r.createElement("span",{className:l,"data-testid":f,"aria-live":"polite","aria-busy":null===(i=A.enableAnimation)||void 0===i||i},u?_.map((function(e,t){return r.createElement(u,{key:t},e)})):_)}var ye=function(){var e=s((0,r.useState)({visibleAfterImageLoads:{display:"none"},visibleBeforeImageLoads:{display:"block"}}),2),t=e[0],n=e[1];return[t,function(){n({visibleAfterImageLoads:{display:"block"},visibleBeforeImageLoads:{display:"none"}})},function(){n({visibleAfterImageLoads:{display:"none"},visibleBeforeImageLoads:{display:"block"}})}]};n.p;var ge=n.p+"static/media/red-heart.db5f2c5f77bae45dfa1986fa8b9fc6c7.svg",be=function(e){var t=[];null===localStorage.getItem("favourites")?localStorage.setItem("favourites",JSON.stringify(t)):o();var n=s((0,r.useState)(function(e){if("string"!==typeof e)return null;return o(),t.some((function(t){return t===e}))}(e)),2),i=n[0],a=n[1];function o(){t=JSON.parse(localStorage.getItem("favourites"))}return{isFavourite:i,pushFavouritedItem:function(e){return"string"!==typeof e?null:(o(),t.push(e),localStorage.setItem("favourites",JSON.stringify(t)),a(!0),t)},removeFavouritedItem:function(e){if("string"!==typeof e)return null;o();var n=t.filter((function(t){return t!==e}));return localStorage.setItem("favourites",JSON.stringify(n)),a(!1),o(),t},clearFavourites:function(){t=[],localStorage.setItem("favourites",JSON.stringify(t)),a(!1)}}},ke=function(e){var t,n,r,i,a,o,u,c=s(ye(),2),l=c[0],f=c[1],h=be(null===(t=e.product)||void 0===t?void 0:t.id).isFavourite;return(0,re.jsxs)(Y,{to:"/".concat(null===(n=e.product)||void 0===n?void 0:n.category,"/").concat(null===(r=e.product)||void 0===r?void 0:r.id),className:ae,children:[(0,re.jsxs)("div",{className:oe,children:[(0,re.jsx)("img",{src:null===(i=e.product)||void 0===i?void 0:i.images.thumb,alt:null===(a=e.product)||void 0===a?void 0:a.title,className:ue,onLoad:f,style:l.visibleAfterImageLoads}),(0,re.jsx)(me,{className:ue,style:l.visibleBeforeImageLoads}),0===(null===(o=e.product)||void 0===o?void 0:o.quantity)?(0,re.jsx)("div",{className:"".concat(ue," ").concat(se),children:(0,re.jsx)("p",{children:"Out of stock!"})}):null,h?(0,re.jsx)("img",{src:ge,alt:h?"favourited product":"add favourite product",className:ce}):null]}),(0,re.jsx)("h3",{children:(null===e||void 0===e||null===(u=e.product)||void 0===u?void 0:u.title)||(0,re.jsx)(me,{})}),(0,re.jsx)("p",{children:e.product?"$".concat(e.product.price.toFixed(2)):(0,re.jsx)(me,{})})]})};function we(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Se(e,t,n){return t&&Ae(e.prototype,t),n&&Ae(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function xe(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=u(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function Ee(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _e(e,t){return _e=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},_e(e,t)}function Ie(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_e(e,t)}function Te(e){return Te=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Te(e)}function Ce(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function Ne(e){return Ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ne(e)}function De(e,t){if(t&&("object"===Ne(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ee(e)}function Pe(e){var t=Ce();return function(){var n,r=Te(e);if(t){var i=Te(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return De(this,n)}}function Oe(e,t,n){return Oe=Ce()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&_e(i,n.prototype),i},Oe.apply(null,arguments)}function Le(e){var t="function"===typeof Map?new Map:void 0;return Le=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return Oe(e,arguments,Te(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),_e(n,e)},Le(e)}var Re=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Me={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Re(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw Error();var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},Fe=function(e){return function(e){var t=Re(e);return Me.encodeByteArray(t,!0)}(e).replace(/\./g,"")};function je(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=je(e[n],t[n]));return e}var Ue=function(){function e(){var t=this;we(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return Se(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function Ve(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Fe(JSON.stringify({alg:"none",type:"JWT"})),Fe(JSON.stringify(a)),""].join(".")}function Be(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function qe(){return!function(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}}()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ze(){return"object"===typeof indexedDB}var Ke=function(e){Ie(n,e);var t=Pe(n);function n(e,r,i){var a;return we(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(Ee(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(Ee(a),We.prototype.create),a}return Se(n)}(Le(Error)),We=function(){function e(t,n,r){we(this,e),this.service=t,this.serviceName=n,this.errors=r}return Se(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?He(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),o=new Ke(n,a,t);return o}}]),e}();function He(e,t){return e.replace(Ge,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var Ge=/\{\$([^}]+)}/g;function Qe(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Je(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(Ye(u)&&Ye(s)){if(!Je(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function Ye(e){return null!==e&&"object"===typeof e}function Xe(e,t){var n=new Ze(e,t);return n.subscribe.bind(n)}var Ze=function(){function e(t,n){var r=this;we(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return Se(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=xe(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=$e),void 0===r.error&&(r.error=$e),void 0===r.complete&&(r.complete=$e);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function $e(){}function et(e){return e&&e._delegate?e._delegate:e}function tt(e,t){return new Promise((function(n,r){e.onsuccess=function(e){n(e.target.result)},e.onerror=function(e){var n;r("".concat(t,": ").concat(null===(n=e.target.error)||void 0===n?void 0:n.message))}}))}var nt=function(){function e(t){we(this,e),this._db=t,this.objectStoreNames=this._db.objectStoreNames}return Se(e,[{key:"transaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"readonly";return new rt(this._db.transaction.call(this._db,e,t))}},{key:"createObjectStore",value:function(e,t){return new it(this._db.createObjectStore(e,t))}},{key:"close",value:function(){this._db.close()}}]),e}(),rt=function(){function e(t){var n=this;we(this,e),this._transaction=t,this.complete=new Promise((function(e,t){n._transaction.oncomplete=function(){e()},n._transaction.onerror=function(){t(n._transaction.error)},n._transaction.onabort=function(){t(n._transaction.error)}}))}return Se(e,[{key:"objectStore",value:function(e){return new it(this._transaction.objectStore(e))}}]),e}(),it=function(){function e(t){we(this,e),this._store=t}return Se(e,[{key:"index",value:function(e){return new at(this._store.index(e))}},{key:"createIndex",value:function(e,t,n){return new at(this._store.createIndex(e,t,n))}},{key:"get",value:function(e){return tt(this._store.get(e),"Error reading from IndexedDB")}},{key:"put",value:function(e,t){return tt(this._store.put(e,t),"Error writing to IndexedDB")}},{key:"delete",value:function(e){return tt(this._store.delete(e),"Error deleting from IndexedDB")}},{key:"clear",value:function(){return tt(this._store.clear(),"Error clearing IndexedDB object store")}}]),e}(),at=function(){function e(t){we(this,e),this._index=t}return Se(e,[{key:"get",value:function(e){return tt(this._index.get(e),"Error reading from IndexedDB")}}]),e}();function ot(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||u(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ut=function(){function e(t,n,r){we(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return Se(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),st="[DEFAULT]",ct=function(){function e(t,n){we(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return Se(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new Ue;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:st})}catch(c){}var t,n=xe(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=s(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(c){}}}catch(l){n.e(l)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:st;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=Z($.mark((function e(){var t;return $.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(ot(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),ot(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:st;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:st;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=xe(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=s(i.value,2),c=u[0],l=u[1],f=this.normalizeInstanceIdentifier(c);r===f&&l.resolve(a)}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=xe(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(Lv){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===st?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(Lv){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:st;return this.component?this.component.multipleInstances?e:st:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var lt,ft,ht=function(){function e(t){we(this,e),this.name=t,this.providers=new Map}return Se(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new ct(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),dt=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(ft||(ft={}));var pt,vt,mt={debug:ft.DEBUG,verbose:ft.VERBOSE,info:ft.INFO,warn:ft.WARN,error:ft.ERROR,silent:ft.SILENT},yt=ft.INFO,gt=(le(lt={},ft.DEBUG,"log"),le(lt,ft.VERBOSE,"log"),le(lt,ft.INFO,"info"),le(lt,ft.WARN,"warn"),le(lt,ft.ERROR,"error"),lt),bt=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=gt[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},kt=function(){function e(t){we(this,e),this.name=t,this._logLevel=yt,this._logHandler=bt,this._userLogHandler=null,dt.push(this)}return Se(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in ft))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?mt[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ft.DEBUG].concat(t)),this._logHandler.apply(this,[this,ft.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ft.VERBOSE].concat(t)),this._logHandler.apply(this,[this,ft.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ft.INFO].concat(t)),this._logHandler.apply(this,[this,ft.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ft.WARN].concat(t)),this._logHandler.apply(this,[this,ft.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ft.ERROR].concat(t)),this._logHandler.apply(this,[this,ft.ERROR].concat(t))}}]),e}();var wt=function(){function e(t){we(this,e),this.container=t}return Se(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var At="@firebase/app",St="0.7.21",xt=new kt("@firebase/app"),Et="[DEFAULT]",_t=(le(pt={},At,"fire-core"),le(pt,"@firebase/app-compat","fire-core-compat"),le(pt,"@firebase/analytics","fire-analytics"),le(pt,"@firebase/analytics-compat","fire-analytics-compat"),le(pt,"@firebase/app-check","fire-app-check"),le(pt,"@firebase/app-check-compat","fire-app-check-compat"),le(pt,"@firebase/auth","fire-auth"),le(pt,"@firebase/auth-compat","fire-auth-compat"),le(pt,"@firebase/database","fire-rtdb"),le(pt,"@firebase/database-compat","fire-rtdb-compat"),le(pt,"@firebase/functions","fire-fn"),le(pt,"@firebase/functions-compat","fire-fn-compat"),le(pt,"@firebase/installations","fire-iid"),le(pt,"@firebase/installations-compat","fire-iid-compat"),le(pt,"@firebase/messaging","fire-fcm"),le(pt,"@firebase/messaging-compat","fire-fcm-compat"),le(pt,"@firebase/performance","fire-perf"),le(pt,"@firebase/performance-compat","fire-perf-compat"),le(pt,"@firebase/remote-config","fire-rc"),le(pt,"@firebase/remote-config-compat","fire-rc-compat"),le(pt,"@firebase/storage","fire-gcs"),le(pt,"@firebase/storage-compat","fire-gcs-compat"),le(pt,"@firebase/firestore","fire-fst"),le(pt,"@firebase/firestore-compat","fire-fst-compat"),le(pt,"fire-js","fire-js"),le(pt,"firebase","fire-js-all"),pt),It=new Map,Tt=new Map;function Ct(e,t){try{e.container.addComponent(t)}catch(n){xt.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Nt(e,t){e.container.addOrOverwriteComponent(t)}function Dt(e){var t=e.name;if(Tt.has(t))return xt.debug("There were multiple attempts to register component ".concat(t,".")),!1;Tt.set(t,e);var n,r=xe(It.values());try{for(r.s();!(n=r.n()).done;){Ct(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function Pt(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Ot(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Et;Pt(e,t).clearInstance(n)}function Lt(){Tt.clear()}var Rt=(le(vt={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),le(vt,"bad-app-name","Illegal App name: '{$appName}"),le(vt,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),le(vt,"app-deleted","Firebase App named '{$appName}' already deleted"),le(vt,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),le(vt,"invalid-log-argument","First argument to `onLog` must be null or a function."),le(vt,"storage-open","Error thrown when opening storage. Original error: {$originalErrorMessage}."),le(vt,"storage-get","Error thrown when reading from storage. Original error: {$originalErrorMessage}."),le(vt,"storage-set","Error thrown when writing to storage. Original error: {$originalErrorMessage}."),le(vt,"storage-delete","Error thrown when deleting from storage. Original error: {$originalErrorMessage}."),vt),Mt=new We("app","Firebase",Rt),Ft=function(){function e(t,n,r){var i=this;we(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ut("app",(function(){return i}),"PUBLIC"))}return Se(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw Mt.create("app-deleted",{appName:this._name})}}]),e}(),jt="9.6.11";function Ut(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"!==typeof t){var n=t;t={name:n}}var r=Object.assign({name:Et,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Mt.create("bad-app-name",{appName:String(i)});var a=It.get(i);if(a){if(Je(e,a.options)&&Je(r,a.config))return a;throw Mt.create("duplicate-app",{appName:i})}var o,u=new ht(i),s=xe(Tt.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u.addComponent(c)}}catch(f){s.e(f)}finally{s.f()}var l=new Ft(e,r,u);return It.set(i,l),l}function Vt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Et,t=It.get(e);if(!t)throw Mt.create("no-app",{appName:e});return t}function Bt(){return Array.from(It.values())}function qt(e){return zt.apply(this,arguments)}function zt(){return(zt=Z($.mark((function e(t){var n;return $.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!It.has(n)){e.next=6;break}return It.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Kt(e,t,n){var r,i=null!==(r=_t[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void xt.warn(u.join(" "))}Dt(new ut("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function Wt(e,t){if(null!==e&&"function"!==typeof e)throw Mt.create("invalid-log-argument");!function(e,t){var n,r=xe(dt);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=mt[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:ft[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function Ht(e){var t;t=e,dt.forEach((function(e){e.setLogLevel(t)}))}var Gt="firebase-heartbeat-store",Qt=null;function Jt(){var e,t,n;return Qt||(Qt=(e="firebase-heartbeat-database",t=1,n=function(e,t){0===t&&e.createObjectStore(Gt)},new Promise((function(r,i){try{var a=indexedDB.open(e,t);a.onsuccess=function(e){r(new nt(e.target.result))},a.onerror=function(e){var t;i("Error opening indexedDB: ".concat(null===(t=e.target.error)||void 0===t?void 0:t.message))},a.onupgradeneeded=function(e){n(new nt(a.result),e.oldVersion,e.newVersion,new rt(a.transaction))}}catch(o){i("Error opening indexedDB: ".concat(o.message))}}))).catch((function(e){throw Mt.create("storage-open",{originalErrorMessage:e.message})}))),Qt}function Yt(e){return Xt.apply(this,arguments)}function Xt(){return Xt=Z($.mark((function e(t){var n;return $.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Jt();case 3:return n=e.sent,e.abrupt("return",n.transaction(Gt).objectStore(Gt).get(en(t)));case 7:throw e.prev=7,e.t0=e.catch(0),Mt.create("storage-get",{originalErrorMessage:e.t0.message});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),Xt.apply(this,arguments)}function Zt(e,t){return $t.apply(this,arguments)}function $t(){return $t=Z($.mark((function e(t,n){var r,i,a;return $.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Jt();case 3:return r=e.sent,i=r.transaction(Gt,"readwrite"),a=i.objectStore(Gt),e.next=8,a.put(n,en(t));case 8:return e.abrupt("return",i.complete);case 11:throw e.prev=11,e.t0=e.catch(0),Mt.create("storage-set",{originalErrorMessage:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),$t.apply(this,arguments)}function en(e){return"".concat(e.name,"!").concat(e.options.appId)}var tn=function(){function e(t){var n=this;we(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new un(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return Se(e,[{key:"triggerHeartbeat",value:function(){var e=Z($.mark((function e(){var t,n,r;return $.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=nn(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=Z($.mark((function e(){var t,n,r,i,a;return $.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=nn(),n=rn(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=Fe(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function nn(){return(new Date).toISOString().substring(0,10)}function rn(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=xe(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),sn(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),sn(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){var u=o();if("break"===u)break}}catch(s){a.e(s)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var an,on,un=function(){function e(t){we(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return Se(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=Z($.mark((function e(){return $.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ze()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=Z($.mark((function e(){var t;return $.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,Yt(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=Z($.mark((function e(t){var n,r;return $.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Zt(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=Z($.mark((function e(t){var n,r;return $.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Zt(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(ot(r.heartbeats),ot(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function sn(e){return Fe(JSON.stringify({version:2,heartbeats:e})).length}an="",Dt(new ut("platform-logger",(function(e){return new wt(e)}),"PRIVATE")),Dt(new ut("heartbeat",(function(e){return new tn(e)}),"PRIVATE")),Kt(At,St,an),Kt(At,St,"esm2017"),Kt("fire-js","");var cn=function(){function e(t,n){var r=this;we(this,e),this._delegate=t,this.firebase=n,Ct(t,new ut("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return Se(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),qt(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Et;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Et;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){Ct(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){Nt(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),ln=(le(on={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),le(on,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),on),fn=new We("app-compat","Firebase",ln);var hn=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=Ut(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(Qe(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:Kt,setLogLevel:Ht,onLog:Wt,apps:null,SDK_VERSION:jt,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(Dt(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw fn.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&je(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!Qe(n,e=e||Et))throw fn.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(cn);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){je(n,e)},createSubscribe:Xe,ErrorFactory:We,deepExtend:je}),n}(),dn=new kt("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){dn.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var pn=self.firebase.SDK_VERSION;pn&&pn.indexOf("LITE")>=0&&dn.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var vn=hn;!function(e){Kt("@firebase/app-compat","0.1.22",e)}();function mn(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Te(e)););return e}function yn(){return yn="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=mn(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},yn.apply(this,arguments)}vn.registerVersion("firebase","9.6.11","app-compat");var gn,bn="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},kn={},wn=wn||{},An=bn||self;function Sn(){}function xn(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function En(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var _n="closure_uid_"+(1e9*Math.random()>>>0),In=0;function Tn(e,t,n){return e.call.apply(e.bind,arguments)}function Cn(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Nn(e,t,n){return(Nn=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Tn:Cn).apply(null,arguments)}function Dn(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Pn(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function On(){this.s=this.s,this.o=this.o}var Ln={};On.prototype.s=!1,On.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,_n)&&e[_n]||(e[_n]=++In)}(this);delete Ln[e]}},On.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Rn=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},Mn=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"===typeof e?e.split(""):e,a=0;a<r;a++)a in i&&t.call(n,i[a],a,e)};function Fn(e){return Array.prototype.concat.apply([],arguments)}function jn(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function Un(e){return/^[\s\xa0]*$/.test(e)}var Vn,Bn=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function qn(e,t){return-1!=e.indexOf(t)}function zn(e,t){return e<t?-1:e>t?1:0}e:{var Kn=An.navigator;if(Kn){var Wn=Kn.userAgent;if(Wn){Vn=Wn;break e}}Vn=""}function Hn(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function Gn(e){var t={};for(var n in e)t[n]=e[n];return t}var Qn="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Jn(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<Qn.length;a++)n=Qn[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Yn(e){return Yn[" "](e),e}Yn[" "]=Sn;var Xn,Zn=qn(Vn,"Opera"),$n=qn(Vn,"Trident")||qn(Vn,"MSIE"),er=qn(Vn,"Edge"),tr=er||$n,nr=qn(Vn,"Gecko")&&!(qn(Vn.toLowerCase(),"webkit")&&!qn(Vn,"Edge"))&&!(qn(Vn,"Trident")||qn(Vn,"MSIE"))&&!qn(Vn,"Edge"),rr=qn(Vn.toLowerCase(),"webkit")&&!qn(Vn,"Edge");function ir(){var e=An.document;return e?e.documentMode:void 0}e:{var ar="",or=function(){var e=Vn;return nr?/rv:([^\);]+)(\)|;)/.exec(e):er?/Edge\/([\d\.]+)/.exec(e):$n?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):rr?/WebKit\/(\S+)/.exec(e):Zn?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(or&&(ar=or?or[1]:""),$n){var ur=ir();if(null!=ur&&ur>parseFloat(ar)){Xn=String(ur);break e}}Xn=ar}var sr,cr={};function lr(){return function(e){var t=cr;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=Bn(String(Xn)).split("."),n=Bn("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=zn(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||zn(0==a[2].length,0==o[2].length)||zn(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(An.document&&$n){var fr=ir();sr=fr||(parseInt(Xn,10)||void 0)}else sr=void 0;var hr=sr,dr=function(){if(!An.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{An.addEventListener("test",Sn,t),An.removeEventListener("test",Sn,t)}catch(n){}return e}();function pr(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function vr(e,t){if(pr.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(nr){e:{try{Yn(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:mr[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&vr.Z.h.call(this)}}pr.prototype.h=function(){this.defaultPrevented=!0},Pn(vr,pr);var mr={2:"touch",3:"pen",4:"mouse"};vr.prototype.h=function(){vr.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var yr="closure_listenable_"+(1e6*Math.random()|0),gr=0;function br(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++gr,this.ca=this.fa=!1}function kr(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function wr(e){this.src=e,this.g={},this.h=0}function Ar(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=Rn(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(kr(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Sr(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ca&&a.listener==t&&a.capture==!!n&&a.ia==r)return i}return-1}wr.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=Sr(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new br(t,this.src,a,!!r,i)).fa=n,e.push(t)),t};var xr="closure_lm_"+(1e6*Math.random()|0),Er={};function _r(e,t,n,r,i){if(r&&r.once)return Tr(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)_r(e,t[a],n,r,i);return null}return n=Rr(n),e&&e[yr]?e.N(t,n,En(r)?!!r.capture:!!r,i):Ir(e,t,n,!1,r,i)}function Ir(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=En(i)?!!i.capture:!!i,u=Or(e);if(u||(e[xr]=u=new wr(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=Pr;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)dr||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Dr(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Tr(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)Tr(e,t[a],n,r,i);return null}return n=Rr(n),e&&e[yr]?e.O(t,n,En(r)?!!r.capture:!!r,i):Ir(e,t,n,!0,r,i)}function Cr(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)Cr(e,t[a],n,r,i);else r=En(r)?!!r.capture:!!r,n=Rr(n),e&&e[yr]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Sr(a=e.g[t],n,r,i))&&(kr(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=Or(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Sr(t,n,r,i)),(n=-1<e?t[e]:null)&&Nr(n))}function Nr(e){if("number"!==typeof e&&e&&!e.ca){var t=e.src;if(t&&t[yr])Ar(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Dr(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Or(t))?(Ar(n,e),0==n.h&&(n.src=null,t[xr]=null)):kr(e)}}}function Dr(e){return e in Er?Er[e]:Er[e]="on"+e}function Pr(e,t){if(e.ca)e=!0;else{t=new vr(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&Nr(e),e=n.call(r,t)}return e}function Or(e){return(e=e[xr])instanceof wr?e:null}var Lr="__closure_events_fn_"+(1e9*Math.random()>>>0);function Rr(e){return"function"===typeof e?e:(e[Lr]||(e[Lr]=function(t){return e.handleEvent(t)}),e[Lr])}function Mr(){On.call(this),this.i=new wr(this),this.P=this,this.I=null}function Fr(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new pr(t,e);else if(t instanceof pr)t.target=t.target||e;else{var i=t;Jn(t=new pr(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=jr(o,r,!0,t)&&i}if(i=jr(o=t.g=e,r,!0,t)&&i,i=jr(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=jr(o=t.g=n[a],r,!1,t)&&i}function jr(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ca&&o.capture==n){var u=o.listener,s=o.ia||o.src;o.fa&&Ar(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}Pn(Mr,On),Mr.prototype[yr]=!0,Mr.prototype.removeEventListener=function(e,t,n,r){Cr(this,e,t,n,r)},Mr.prototype.M=function(){if(Mr.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)kr(n[r]);delete t.g[e],t.h--}}this.I=null},Mr.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Mr.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Ur=An.JSON.stringify;function Vr(){var e=Qr,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Br,qr=function(){function e(){we(this,e),this.h=this.g=null}return Se(e,[{key:"add",value:function(e,t){var n=zr.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),zr=new(function(){function e(t,n){we(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return Se(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new Kr}),(function(e){return e.reset()})),Kr=function(){function e(){we(this,e),this.next=this.g=this.h=null}return Se(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function Wr(e){An.setTimeout((function(){throw e}),0)}function Hr(e,t){Br||function(){var e=An.Promise.resolve(void 0);Br=function(){e.then(Jr)}}(),Gr||(Br(),Gr=!0),Qr.add(e,t)}var Gr=!1,Qr=new qr;function Jr(){for(var e;e=Vr();){try{e.h.call(e.g)}catch(n){Wr(n)}var t=zr;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Gr=!1}function Yr(e,t){Mr.call(this),this.h=e||1,this.g=t||An,this.j=Nn(this.kb,this),this.l=Date.now()}function Xr(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function Zr(e,t,n){if("function"===typeof e)n&&(e=Nn(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Nn(e.handleEvent,e)}return 2147483647<Number(t)?-1:An.setTimeout(e,t||0)}function $r(e){e.g=Zr((function(){e.g=null,e.i&&(e.i=!1,$r(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}Pn(Yr,Mr),(gn=Yr.prototype).da=!1,gn.S=null,gn.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Fr(this,"tick"),this.da&&(Xr(this),this.start()))}},gn.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},gn.M=function(){Yr.Z.M.call(this),Xr(this),delete this.g};var ei=function(e){Ie(n,e);var t=Pe(n);function n(e,r){var i;return we(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return Se(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:$r(this)}},{key:"M",value:function(){yn(Te(n.prototype),"M",this).call(this),this.g&&(An.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(On);function ti(e){On.call(this),this.h=e,this.g={}}Pn(ti,On);var ni=[];function ri(e,t,n,r){Array.isArray(n)||(n&&(ni[0]=n.toString()),n=ni);for(var i=0;i<n.length;i++){var a=_r(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function ii(e){Hn(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Nr(e)}),e),e.g={}}function ai(){this.g=!0}function oi(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return Ur(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}ti.prototype.M=function(){ti.Z.M.call(this),ii(this)},ti.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ai.prototype.Aa=function(){this.g=!1},ai.prototype.info=function(){};var ui={},si=null;function ci(){return si=si||new Mr}function li(e){pr.call(this,ui.Ma,e)}function fi(e){var t=ci();Fr(t,new li(t,e))}function hi(e,t){pr.call(this,ui.STAT_EVENT,e),this.stat=t}function di(e){var t=ci();Fr(t,new hi(t,e))}function pi(e,t){pr.call(this,ui.Na,e),this.size=t}function vi(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return An.setTimeout((function(){e()}),t)}ui.Ma="serverreachability",Pn(li,pr),ui.STAT_EVENT="statevent",Pn(hi,pr),ui.Na="timingevent",Pn(pi,pr);var mi={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},yi={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function gi(){}function bi(e){return e.h||(e.h=e.i())}function ki(){}gi.prototype.h=null;var wi,Ai={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Si(){pr.call(this,"d")}function xi(){pr.call(this,"c")}function Ei(){}function _i(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new ti(this),this.P=Ti,e=tr?125:void 0,this.W=new Yr(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Ii}function Ii(){this.i=null,this.g="",this.h=!1}Pn(Si,pr),Pn(xi,pr),Pn(Ei,gi),Ei.prototype.g=function(){return new XMLHttpRequest},Ei.prototype.i=function(){return{}},wi=new Ei;var Ti=45e3,Ci={},Ni={};function Di(e,t,n){e.K=1,e.v=ea(Qi(t)),e.s=n,e.U=!0,Pi(e,null)}function Pi(e,t){e.F=Date.now(),Mi(e),e.A=Qi(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),da(n.h,"t",r),e.C=0,n=e.l.H,e.h=new Ii,e.g=mo(e.l,n?t:null,!e.s),0<e.O&&(e.L=new ei(Nn(e.Ia,e,e.g),e.O)),ri(e.V,e.g,"readystatechange",e.gb),t=e.H?Gn(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),fi(1),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function Oi(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Ba)}function Li(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=Ri(e,n))==Ni){4==t&&(e.o=4,di(14),i=!1),oi(e.j,e.m,null,"[Incomplete Response]");break}if(r==Ci){e.o=4,di(15),oi(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}oi(e.j,e.m,r,null),Bi(e,r)}Oi(e)&&r!=Ni&&r!=Ci&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,di(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),uo(t),t.L=!0,di(11))):(oi(e.j,e.m,n,"[Invalid Chunked Response]"),Vi(e),Ui(e))}function Ri(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Ni:(n=Number(t.substring(n,r)),isNaN(n)?Ci:(r+=1)+n>t.length?Ni:(t=t.substr(r,n),e.C=r+n,t))}function Mi(e){e.Y=Date.now()+e.P,Fi(e,e.P)}function Fi(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=vi(Nn(e.eb,e),t)}function ji(e){e.B&&(An.clearTimeout(e.B),e.B=null)}function Ui(e){0==e.l.G||e.I||lo(e.l,e)}function Vi(e){ji(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,Xr(e.W),ii(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function Bi(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||wa(n.i,e)))if(n.I=e.N,!e.J&&wa(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;co(n),Za(n)}oo(n),di(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=vi(Nn(n.ab,n),6e3));if(1>=ka(n.i)&&n.ka){try{n.ka()}catch(a){}n.ka=void 0}}else ho(n,11)}else if((e.J||n.g==e)&&co(n),!Un(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.U=a[0],a=a[1],2==n.G)if("c"==a[0]){n.J=a[1],n.la=a[2];var o=a[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var u=a[4];null!=u&&(n.za=u,n.h.info("SVER="+n.za));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.i;!f.g&&(qn(l,"spdy")||qn(l,"quic")||qn(l,"h2"))&&(f.j=f.l,f.g=new Set,f.h&&(Aa(f,f.h),f.h=null))}if(r.D){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.sa=h,$i(r.F,r.D,h))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=e;if((r=n).oa=vo(r,r.H?r.la:null,r.W),d.J){Sa(r.i,d);var p=d,v=r.K;v&&p.setTimeout(v),p.B&&(ji(p),Mi(p)),r.g=d}else ao(r);0<n.l.length&&to(n)}else"stop"!=a[0]&&"close"!=a[0]||ho(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?ho(n,7):Xa(n):"noop"!=a[0]&&n.j&&n.j.wa(a),n.A=0)}fi(4)}catch(a){}}function qi(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(xn(e)||"string"===typeof e)Mn(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(xn(e)||"string"===typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"===typeof e)return e.split("");if(xn(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length;for(var a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}}function zi(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof zi)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function Ki(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];Wi(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)Wi(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function Wi(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(gn=_i.prototype).setTimeout=function(e){this.P=e},gn.gb=function(e){e=e.target;var t=this.L;t&&3==Ha(e)?t.l():this.Ia(e)},gn.Ia=function(e){try{if(e==this.g)e:{var t=Ha(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||tr||this.g&&(this.h.h||this.g.ga()||Ga(this.g)))){this.I||4!=t||7==n||fi(8==n||0>=r?3:2),ji(this);var i=this.g.ba();this.N=i;t:if(Oi(this)){var a=Ga(this.g);e="";var o=a.length,u=4==Ha(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Vi(this),Ui(this);var s="";break t}this.h.i=new An.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(a[n],{stream:u&&n==o-1});a.splice(0,o),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Un(c)){var f=c;break t}}f=null}if(!(i=f)){this.i=!1,this.o=3,di(12),Vi(this),Ui(this);break e}oi(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Bi(this,i)}this.U?(Li(this,t,s),tr&&this.i&&3==t&&(ri(this.V,this.W,"tick",this.fb),this.W.start())):(oi(this.j,this.m,s,null),Bi(this,s)),4==t&&Vi(this),this.i&&!this.I&&(4==t?lo(this.l,this):(this.i=!1,Mi(this)))}else 400==i&&0<s.indexOf("Unknown SID")?(this.o=3,di(12)):(this.o=0,di(13)),Vi(this),Ui(this)}}}catch(t){}},gn.fb=function(){if(this.g){var e=Ha(this.g),t=this.g.ga();this.C<t.length&&(ji(this),Li(this,e,t),this.i&&4!=e&&Mi(this))}},gn.cancel=function(){this.I=!0,Vi(this)},gn.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(fi(3),di(17)),Vi(this),this.o=2,Ui(this)):Fi(this,this.Y-e)},(gn=zi.prototype).R=function(){Ki(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},gn.T=function(){return Ki(this),this.g.concat()},gn.get=function(e,t){return Wi(this.h,e)?this.h[e]:t},gn.set=function(e,t){Wi(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},gn.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],a=this.get(i);e.call(t,a,i,this)}};var Hi=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Gi(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof Gi){this.g=void 0!==t?t:e.g,Ji(this,e.j),this.s=e.s,Yi(this,e.i),Xi(this,e.m),this.l=e.l,t=e.h;var n=new ca;n.i=t.i,t.g&&(n.g=new zi(t.g),n.h=t.h),Zi(this,n),this.o=e.o}else e&&(n=String(e).match(Hi))?(this.g=!!t,Ji(this,n[1]||"",!0),this.s=ta(n[2]||""),Yi(this,n[3]||"",!0),Xi(this,n[4]),this.l=ta(n[5]||"",!0),Zi(this,n[6]||"",!0),this.o=ta(n[7]||"")):(this.g=!!t,this.h=new ca(null,this.g))}function Qi(e){return new Gi(e)}function Ji(e,t,n){e.j=n?ta(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Yi(e,t,n){e.i=n?ta(t,!0):t}function Xi(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Zi(e,t,n){t instanceof ca?(e.h=t,function(e,t){t&&!e.j&&(la(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(fa(this,t),da(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=na(t,ua)),e.h=new ca(t,e.g))}function $i(e,t,n){e.h.set(t,n)}function ea(e){return $i(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ta(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function na(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,ra),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function ra(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Gi.prototype.toString=function(){var e=[],t=this.j;t&&e.push(na(t,ia,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(na(t,ia,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(na(n,"/"==n.charAt(0)?oa:aa,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",na(n,sa)),e.join("")};var ia=/[#\/\?@]/g,aa=/[#\?:]/g,oa=/[#\?]/g,ua=/[#\?@]/g,sa=/#/g;function ca(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function la(e){e.g||(e.g=new zi,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function fa(e,t){la(e),t=pa(e,t),Wi(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,Wi((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&Ki(e)))}function ha(e,t){return la(e),t=pa(e,t),Wi(e.g.h,t)}function da(e,t,n){fa(e,t),0<n.length&&(e.i=null,e.g.set(pa(e,t),jn(n)),e.h+=n.length)}function pa(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(gn=ca.prototype).add=function(e,t){la(this),this.i=null,e=pa(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},gn.forEach=function(e,t){la(this),this.g.forEach((function(n,r){Mn(n,(function(n){e.call(t,n,r,this)}),this)}),this)},gn.T=function(){la(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},gn.R=function(e){la(this);var t=[];if("string"===typeof e)ha(this,e)&&(t=Fn(t,this.g.get(pa(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=Fn(t,e[n])}return t},gn.set=function(e,t){return la(this),this.i=null,ha(this,e=pa(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},gn.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},gn.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var o=i;""!==r[a]&&(o+="="+encodeURIComponent(String(r[a]))),e.push(o)}}return this.i=e.join("&")};var va=Se((function e(t,n){we(this,e),this.h=t,this.g=n}));function ma(e){this.l=e||ga,An.PerformanceNavigationTiming?e=0<(e=An.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(An.g&&An.g.Ea&&An.g.Ea()&&An.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var ya,ga=10;function ba(e){return!!e.h||!!e.g&&e.g.size>=e.j}function ka(e){return e.h?1:e.g?e.g.size:0}function wa(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Aa(e,t){e.g?e.g.add(t):e.h=t}function Sa(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function xa(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=xe(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return jn(e.i)}function Ea(){}function _a(){this.g=new Ea}function Ia(e,t,n){var r=n||"";try{qi(e,(function(e,n){var i=e;En(e)&&(i=Ur(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Ta(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function Ca(e){this.l=e.$b||null,this.j=e.ib||!1}function Na(e,t){Mr.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=Da,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ma.prototype.cancel=function(){if(this.i=xa(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=xe(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},Ea.prototype.stringify=function(e){return An.JSON.stringify(e,void 0)},Ea.prototype.parse=function(e){return An.JSON.parse(e,void 0)},Pn(Ca,gi),Ca.prototype.g=function(){return new Na(this.l,this.j)},Ca.prototype.i=(ya={},function(){return ya}),Pn(Na,Mr);var Da=0;function Pa(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function Oa(e){e.readyState=4,e.l=null,e.j=null,e.A=null,La(e)}function La(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(gn=Na.prototype).open=function(e,t){if(this.readyState!=Da)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,La(this)},gn.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||An).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},gn.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Oa(this)),this.readyState=Da},gn.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,La(this)),this.g&&(this.readyState=3,La(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof An.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Pa(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},gn.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Oa(this):La(this),3==this.readyState&&Pa(this)}},gn.Ua=function(e){this.g&&(this.response=this.responseText=e,Oa(this))},gn.Ta=function(e){this.g&&(this.response=e,Oa(this))},gn.ha=function(){this.g&&Oa(this)},gn.setRequestHeader=function(e,t){this.v.append(e,t)},gn.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},gn.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Na.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Ra=An.JSON.parse;function Ma(e){Mr.call(this),this.headers=new zi,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Fa,this.K=this.L=!1}Pn(Ma,Mr);var Fa="",ja=/^https?$/i,Ua=["POST","PUT"];function Va(e){return"content-type"==e.toLowerCase()}function Ba(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,qa(e),Ka(e)}function qa(e){e.D||(e.D=!0,Fr(e,"complete"),Fr(e,"error"))}function za(e){if(e.h&&"undefined"!=typeof wn&&(!e.C[1]||4!=Ha(e)||2!=e.ba()))if(e.v&&4==Ha(e))Zr(e.Fa,0,e);else if(Fr(e,"readystatechange"),4==Ha(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(Hi)[1]||null;if(!a&&An.self&&An.self.location){var o=An.self.location.protocol;a=o.substr(0,o.length-1)}i=!ja.test(a?a.toLowerCase():"")}t=i}if(t)Fr(e,"complete"),Fr(e,"success");else{e.m=6;try{var u=2<Ha(e)?e.g.statusText:""}catch(s){u=""}e.j=u+" ["+e.ba()+"]",qa(e)}}finally{Ka(e)}}}function Ka(e,t){if(e.g){Wa(e);var n=e.g,r=e.C[0]?Sn:null;e.g=null,e.C=null,t||Fr(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function Wa(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(An.clearTimeout(e.A),e.A=null)}function Ha(e){return e.g?e.g.readyState:0}function Ga(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case Fa:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Qa(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return Hn(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):$i(e,t,n))}function Ja(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Ya(e){this.za=0,this.l=[],this.h=new ai,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Ja("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Ja("baseRetryDelayMs",5e3,e),this.$a=Ja("retryDelaySeedMs",1e4,e),this.Ya=Ja("forwardChannelMaxRetries",2,e),this.ra=Ja("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new ma(e&&e.concurrentRequestLimit),this.Ca=new _a,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function Xa(e){if($a(e),3==e.G){var t=e.V++,n=Qi(e.F);$i(n,"SID",e.J),$i(n,"RID",t),$i(n,"TYPE","terminate"),ro(e,n),(t=new _i(e,e.h,t,void 0)).K=2,t.v=ea(Qi(n)),n=!1,An.navigator&&An.navigator.sendBeacon&&(n=An.navigator.sendBeacon(t.v.toString(),"")),!n&&An.Image&&((new Image).src=t.v,n=!0),n||(t.g=mo(t.l,null),t.g.ea(t.v)),t.F=Date.now(),Mi(t)}po(e)}function Za(e){e.g&&(uo(e),e.g.cancel(),e.g=null)}function $a(e){Za(e),e.u&&(An.clearTimeout(e.u),e.u=null),co(e),e.i.cancel(),e.m&&("number"===typeof e.m&&An.clearTimeout(e.m),e.m=null)}function eo(e,t){e.l.push(new va(e.Za++,t)),3==e.G&&to(e)}function to(e){ba(e.i)||e.m||(e.m=!0,Hr(e.Ha,e),e.C=0)}function no(e,t){var n;n=t?t.m:e.V++;var r=Qi(e.F);$i(r,"SID",e.J),$i(r,"RID",n),$i(r,"AID",e.U),ro(e,r),e.o&&e.s&&Qa(r,e.o,e.s),n=new _i(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=io(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),Aa(e.i,n),Di(n,r,t)}function ro(e,t){e.j&&qi({},(function(e,n){$i(t,n,e)}))}function io(e,t,n){n=Math.min(e.l.length,n);var r=e.j?Nn(e.j.Oa,e.j,e):null;e:for(var i=e.l,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].h,l=i[s].g;if(0>(c-=a))a=Math.max(0,i[s].h-100),u=!1;else try{Ia(l,o,"req"+c+"_")}catch(Ko){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function ao(e){e.g||e.u||(e.Y=1,Hr(e.Ga,e),e.A=0)}function oo(e){return!(e.g||e.u||3<=e.A)&&(e.Y++,e.u=vi(Nn(e.Ga,e),fo(e,e.A)),e.A++,!0)}function uo(e){null!=e.B&&(An.clearTimeout(e.B),e.B=null)}function so(e){e.g=new _i(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=Qi(e.oa);$i(t,"RID","rpc"),$i(t,"SID",e.J),$i(t,"CI",e.N?"0":"1"),$i(t,"AID",e.U),ro(e,t),$i(t,"TYPE","xmlhttp"),e.o&&e.s&&Qa(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=ea(Qi(t)),n.s=null,n.U=!0,Pi(n,e)}function co(e){null!=e.v&&(An.clearTimeout(e.v),e.v=null)}function lo(e,t){var n=null;if(e.g==t){co(e),uo(e),e.g=null;var r=2}else{if(!wa(e.i,t))return;n=t.D,Sa(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;Fr(r=ci(),new pi(r,n,t,i)),to(e)}else ao(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(ka(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.l=t.D.concat(e.l),!0):!(1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya))&&(e.m=vi(Nn(e.Ha,e,t),fo(e,e.C)),e.C++,!0))}(e,t)||2==r&&oo(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:ho(e,5);break;case 4:ho(e,10);break;case 3:ho(e,6);break;default:ho(e,2)}}function fo(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function ho(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=Nn(e.jb,e);n||(n=new Gi("//www.google.com/images/cleardot.gif"),An.location&&"http"==An.location.protocol||Ji(n,"https"),ea(n)),function(e,t){var n=new ai;if(An.Image){var r=new Image;r.onload=Dn(Ta,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Dn(Ta,n,r,"TestLoadImage: error",!1,t),r.onabort=Dn(Ta,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Dn(Ta,n,r,"TestLoadImage: timeout",!1,t),An.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else di(2);e.G=0,e.j&&e.j.va(t),po(e),$a(e)}function po(e){e.G=0,e.I=-1,e.j&&(0==xa(e.i).length&&0==e.l.length||(e.i.i.length=0,jn(e.l),e.l.length=0),e.j.ua())}function vo(e,t,n){var r=function(e){return e instanceof Gi?Qi(e):new Gi(e,void 0)}(n);if(""!=r.i)t&&Yi(r,t+"."+r.i),Xi(r,r.m);else{var i=An.location;r=function(e,t,n,r){var i=new Gi(null,void 0);return e&&Ji(i,e),t&&Yi(i,t),n&&Xi(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&Hn(e.aa,(function(e,t){$i(r,t,e)})),t=e.D,n=e.sa,t&&n&&$i(r,t,n),$i(r,"VER",e.ma),ro(e,r),r}function mo(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new Ma(new Ca({ib:!0})):new Ma(e.qa)).L=e.H,t}function yo(){}function go(){if($n&&!(10<=Number(hr)))throw Error("Environmental error: no available transport.")}function bo(e,t){Mr.call(this),this.g=new Ya(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!Un(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Un(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Ao(this)}function ko(e){Si.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function wo(){xi.call(this),this.status=1}function Ao(e){this.g=e}(gn=Ma.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():wi.g(),this.C=this.u?bi(this.u):bi(wi),this.g.onreadystatechange=Nn(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(a){return void Ba(this,a)}e=n||"";var i=new zi(this.headers);r&&qi(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=Va,n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}(i.T()),n=An.FormData&&e instanceof An.FormData,!(0<=Rn(Ua,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Wa(this),0<this.B&&((this.K=function(e){return $n&&lr()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Nn(this.pa,this)):this.A=Zr(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(a){Ba(this,a)}},gn.pa=function(){"undefined"!=typeof wn&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Fr(this,"timeout"),this.abort(8))},gn.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Fr(this,"complete"),Fr(this,"abort"),Ka(this))},gn.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ka(this,!0)),Ma.Z.M.call(this)},gn.Fa=function(){this.s||(this.F||this.v||this.l?za(this):this.cb())},gn.cb=function(){za(this)},gn.ba=function(){try{return 2<Ha(this)?this.g.status:-1}catch(ya){return-1}},gn.ga=function(){try{return this.g?this.g.responseText:""}catch(ya){return""}},gn.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Ra(t)}},gn.Da=function(){return this.m},gn.La=function(){return"string"===typeof this.j?this.j:String(this.j)},(gn=Ya.prototype).ma=8,gn.G=1,gn.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(t){}},gn.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new _i(this,this.h,e,void 0),n=this.s;if(this.P&&(n?Jn(n=Gn(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var a=this.l[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=io(this,t,r),$i(i=Qi(this.F),"RID",e),$i(i,"CVER",22),this.D&&$i(i,"X-HTTP-Session-Id",this.D),ro(this,i),this.o&&n&&Qa(i,this.o,n),Aa(this.i,t),this.Ra&&$i(i,"TYPE","init"),this.ja?($i(i,"$req",r),$i(i,"SID","null"),t.$=!0,Di(t,i,null)):Di(t,i,r),this.G=2}}else 3==this.G&&(e?no(this,e):0==this.l.length||ba(this.i)||no(this))},gn.Ga=function(){if(this.u=null,so(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=vi(Nn(this.bb,this),e)}},gn.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,di(10),Za(this),so(this))},gn.ab=function(){null!=this.v&&(this.v=null,Za(this),oo(this),di(19))},gn.jb=function(e){e?(this.h.info("Successfully pinged google.com"),di(2)):(this.h.info("Failed to ping google.com"),di(1))},(gn=yo.prototype).xa=function(){},gn.wa=function(){},gn.va=function(){},gn.ua=function(){},gn.Oa=function(){},go.prototype.g=function(e,t){return new bo(e,t)},Pn(bo,Mr),bo.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),Hr(Nn(e.hb,e,t))),di(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=vo(e,null,e.W),to(e)},bo.prototype.close=function(){Xa(this.g)},bo.prototype.u=function(e){if("string"===typeof e){var t={};t.__data__=e,eo(this.g,t)}else this.v?((t={}).__data__=Ur(e),eo(this.g,t)):eo(this.g,e)},bo.prototype.M=function(){this.g.j=null,delete this.j,Xa(this.g),delete this.g,bo.Z.M.call(this)},Pn(ko,Si),Pn(wo,xi),Pn(Ao,yo),Ao.prototype.xa=function(){Fr(this.g,"a")},Ao.prototype.wa=function(e){Fr(this.g,new ko(e))},Ao.prototype.va=function(e){Fr(this.g,new wo(e))},Ao.prototype.ua=function(){Fr(this.g,"b")},go.prototype.createWebChannel=go.prototype.g,bo.prototype.send=bo.prototype.u,bo.prototype.open=bo.prototype.m,bo.prototype.close=bo.prototype.close,mi.NO_ERROR=0,mi.TIMEOUT=8,mi.HTTP_ERROR=6,yi.COMPLETE="complete",ki.EventType=Ai,Ai.OPEN="a",Ai.CLOSE="b",Ai.ERROR="c",Ai.MESSAGE="d",Mr.prototype.listen=Mr.prototype.N,Ma.prototype.listenOnce=Ma.prototype.O,Ma.prototype.getLastError=Ma.prototype.La,Ma.prototype.getLastErrorCode=Ma.prototype.Da,Ma.prototype.getStatus=Ma.prototype.ba,Ma.prototype.getResponseJson=Ma.prototype.Qa,Ma.prototype.getResponseText=Ma.prototype.ga,Ma.prototype.send=Ma.prototype.ea;var So=kn.createWebChannelTransport=function(){return new go},xo=kn.getStatEventTarget=function(){return ci()},Eo=kn.ErrorCode=mi,_o=kn.EventType=yi,Io=kn.Event=ui,To=kn.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Co=kn.FetchXmlHttpFactory=Ca,No=kn.WebChannel=ki,Do=kn.XhrIo=Ma,Po="@firebase/firestore",Oo=function(){function e(t){we(this,e),this.uid=t}return Se(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();Oo.UNAUTHENTICATED=new Oo(null),Oo.GOOGLE_CREDENTIALS=new Oo("google-credentials-uid"),Oo.FIRST_PARTY=new Oo("first-party-uid"),Oo.MOCK_USER=new Oo("mock-user");var Lo="9.6.11",Ro=new kt("@firebase/firestore");function Mo(){return Ro.logLevel}function Fo(e){if(Ro.logLevel<=ft.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Vo);Ro.debug.apply(Ro,["Firestore (".concat(Lo,"): ").concat(e)].concat(ot(i)))}}function jo(e){if(Ro.logLevel<=ft.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Vo);Ro.error.apply(Ro,["Firestore (".concat(Lo,"): ").concat(e)].concat(ot(i)))}}function Uo(e){if(Ro.logLevel<=ft.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Vo);Ro.warn.apply(Ro,["Firestore (".concat(Lo,"): ").concat(e)].concat(ot(i)))}}function Vo(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function Bo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(Lo,") INTERNAL ASSERTION FAILED: ")+e;throw jo(t),new Error(t)}function qo(e,t){e||Bo()}function zo(e,t){return e}var Ko={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Wo=function(e){Ie(n,e);var t=Pe(n);function n(e,r){var i;return we(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return Se(n)}(Ke),Ho=Se((function e(){var t=this;we(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),Go=Se((function e(t,n){we(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),Qo=function(){function e(){we(this,e)}return Se(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Oo.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),Jo=function(){function e(t){we(this,e),this.token=t,this.changeListener=null}return Se(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),Yo=function(){function e(t){we(this,e),this.t=t,this.currentUser=Oo.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return Se(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new Ho;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new Ho,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(Z(ee().mark((function e(){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){Fo("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(Fo("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Ho)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(Fo("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(qo("string"==typeof n.accessToken),new Go(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return qo(null===e||"string"==typeof e),new Oo(e)}}]),e}(),Xo=Se((function e(t,n,r){we(this,e),this.type="FirstParty",this.user=Oo.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);var i=t.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)})),Zo=function(){function e(t,n,r){we(this,e),this.h=t,this.l=n,this.m=r}return Se(e,[{key:"getToken",value:function(){return Promise.resolve(new Xo(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Oo.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),$o=Se((function e(t){we(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),eu=function(){function e(t){we(this,e),this.g=t,this.forceRefresh=!1,this.appCheck=null,this.p=null}return Se(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&Fo("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.p;return n.p=e.token,Fo("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){Fo("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.g.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.g.getImmediate({optional:!0});e?i(e):Fo("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(qo("string"==typeof t.token),e.p=t.token,new $o(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}(),tu=function(){function e(t,n){var r=this;we(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.I(e)},this.T=function(e){return n.writeSequenceNumber(e)})}return Se(e,[{key:"I",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.T&&this.T(e),e}}]),e}();function nu(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}tu.A=-1;var ru=function(){function e(){we(this,e)}return Se(e,null,[{key:"R",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=nu(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function iu(e,t){return e<t?-1:e>t?1:0}function au(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function ou(e){return e+"\0"}var uu=function(){function e(t,n){if(we(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new Wo(Ko.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Wo(Ko.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new Wo(Ko.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Wo(Ko.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return Se(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?iu(this.nanoseconds,e.nanoseconds):iu(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),su=function(){function e(t){we(this,e),this.timestamp=t}return Se(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new uu(0,0))}},{key:"max",value:function(){return new e(new uu(253402300799,999999999))}}]),e}();function cu(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function lu(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function fu(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var hu=function(){function e(t,n,r){we(this,e),void 0===n?n=0:n>t.length&&Bo(),void 0===r?r=t.length-n:r>t.length-n&&Bo(),this.segments=t,this.offset=n,this.len=r}return Se(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),du=function(e){Ie(n,e);var t=Pe(n);function n(){return we(this,n),t.apply(this,arguments)}return Se(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new Wo(Ko.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,ot(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(hu),pu=/^[_a-zA-Z][_a-zA-Z0-9]*$/,vu=function(e){Ie(n,e);var t=Pe(n);function n(){return we(this,n),t.apply(this,arguments)}return Se(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return pu.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new Wo(Ko.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new Wo(Ko.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new Wo(Ko.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new Wo(Ko.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(hu),mu=function(){function e(t){we(this,e),this.fields=t,t.sort(vu.comparator)}return Se(e,[{key:"covers",value:function(e){var t,n=xe(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return au(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}]),e}();var yu=function(e){function t(e){we(this,t),this.binaryString=e}return Se(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return iu(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(atob(e))}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();yu.EMPTY_BYTE_STRING=new yu("");var gu=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function bu(e){if(qo(!!e),"string"==typeof e){var t=0,n=gu.exec(e);if(qo(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:ku(e.seconds),nanos:ku(e.nanos)}}function ku(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function wu(e){return"string"==typeof e?yu.fromBase64String(e):yu.fromUint8Array(e)}function Au(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Su(e){var t=e.mapValue.fields.__previous_value__;return Au(t)?Su(t):t}function xu(e){var t=bu(e.mapValue.fields.__local_write_time__.timestampValue);return new uu(t.seconds,t.nanos)}var Eu=Se((function e(t,n,r,i,a,o,u,s){we(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.useFetchStreams=s})),_u=function(){function e(t,n){we(this,e),this.projectId=t,this.database=n||"(default)"}return Se(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function Iu(e){return null==e}function Tu(e){return 0===e&&1/e==-1/0}function Cu(e){return"number"==typeof e&&Number.isInteger(e)&&!Tu(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var Nu=function(){function e(t){we(this,e),this.path=t}return Se(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===du.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(du.fromString(t))}},{key:"fromName",value:function(t){return new e(du.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(du.emptyPath())}},{key:"comparator",value:function(e,t){return du.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new du(t.slice()))}}]),e}(),Du={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Pu={nullValue:"NULL_VALUE"};function Ou(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Au(e)?4:Gu(e)?9:10:Bo()}function Lu(e,t){if(e===t)return!0;var n=Ou(e);if(n!==Ou(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return xu(e).isEqual(xu(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=bu(e.timestampValue),r=bu(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return wu(e.bytesValue).isEqual(wu(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return ku(e.geoPointValue.latitude)===ku(t.geoPointValue.latitude)&&ku(e.geoPointValue.longitude)===ku(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return ku(e.integerValue)===ku(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=ku(e.doubleValue),r=ku(t.doubleValue);return n===r?Tu(n)===Tu(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return au(e.arrayValue.values||[],t.arrayValue.values||[],Lu);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(cu(n)!==cu(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Lu(n[i],r[i])))return!1;return!0}(e,t);default:return Bo()}}function Ru(e,t){return void 0!==(e.values||[]).find((function(e){return Lu(e,t)}))}function Mu(e,t){if(e===t)return 0;var n=Ou(e),r=Ou(t);if(n!==r)return iu(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return iu(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=ku(e.integerValue||e.doubleValue),r=ku(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Fu(e.timestampValue,t.timestampValue);case 4:return Fu(xu(e),xu(t));case 5:return iu(e.stringValue,t.stringValue);case 6:return function(e,t){var n=wu(e),r=wu(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=iu(n[i],r[i]);if(0!==a)return a}return iu(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=iu(ku(e.latitude),ku(t.latitude));return 0!==n?n:iu(ku(e.longitude),ku(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=Mu(n[i],r[i]);if(a)return a}return iu(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=iu(r[o],a[o]);if(0!==u)return u;var s=Mu(n[r[o]],i[a[o]]);if(0!==s)return s}return iu(r.length,a.length)}(e.mapValue,t.mapValue);default:throw Bo()}}function Fu(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return iu(e,t);var n=bu(e),r=bu(t),i=iu(n.seconds,r.seconds);return 0!==i?i:iu(n.nanos,r.nanos)}function ju(e){return Uu(e)}function Uu(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=bu(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?wu(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,Nu.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=xe(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=Uu(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=xe(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(Uu(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):Bo();var t,n}function Vu(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Bu(e){return!!e&&"integerValue"in e}function qu(e){return!!e&&"arrayValue"in e}function zu(e){return!!e&&"nullValue"in e}function Ku(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Wu(e){return!!e&&"mapValue"in e}function Hu(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return lu(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=Hu(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Hu(e.arrayValue.values[r]);return n}return Object.assign({},e)}function Gu(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function Qu(e){return"nullValue"in e?Pu:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?Vu(_u.empty(),Nu.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:Bo()}function Ju(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?Vu(_u.empty(),Nu.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?Du:Bo()}function Yu(e,t){return void 0===e?t:void 0===t||Mu(e,t)>0?e:t}function Xu(e,t){return void 0===e?t:void 0===t||Mu(e,t)<0?e:t}var Zu=function(){function e(t){we(this,e),this.value=t}return Se(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!Wu(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Hu(t)}},{key:"setAll",value:function(e){var t=this,n=vu.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=Hu(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());Wu(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return Lu(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];Wu(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){lu(t,(function(t,n){return e[t]=n}));var r,i=xe(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(Hu(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function $u(e){var t=[];return lu(e.fields,(function(e,n){var r=new vu([e]);if(Wu(n)){var i=$u(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=xe(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new mu(t)}var es=function(){function e(t,n,r,i,a,o){we(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.data=a,this.documentState=o}return Se(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=Zu.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=Zu.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,su.min(),su.min(),Zu.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,su.min(),r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,su.min(),Zu.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,su.min(),Zu.empty(),2)}}]),e}(),ts=Se((function e(t,n,r,i){we(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function ns(e){return e.fields.find((function(e){return 2===e.kind}))}function rs(e){return e.fields.filter((function(e){return 2!==e.kind}))}ts.UNKNOWN_ID=-1;var is=Se((function e(t,n){we(this,e),this.fieldPath=t,this.kind=n})),as=function(){function e(t,n){we(this,e),this.sequenceNumber=t,this.offset=n}return Se(e,null,[{key:"empty",value:function(){return new e(0,ss.min())}}]),e}();function os(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=su.fromTimestamp(1e9===r?new uu(n+1,0):new uu(n,r));return new ss(i,Nu.empty(),t)}function us(e){return new ss(e.readTime,e.key,-1)}var ss=function(){function e(t,n,r){we(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return Se(e,null,[{key:"min",value:function(){return new e(su.min(),Nu.empty(),-1)}},{key:"max",value:function(){return new e(su.max(),Nu.empty(),-1)}}]),e}();function cs(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=Nu.comparator(e.documentKey,t.documentKey))?n:iu(e.largestBatchId,t.largestBatchId)}var ls=Se((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;we(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.P=null}));function fs(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new ls(e,t,n,r,i,a,o)}function hs(e){var t=zo(e);if(null===t.P){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return(t=e).field.canonicalString()+t.op.toString()+ju(t.value);var t})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),Iu(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return ju(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return ju(e)})).join(",")),t.P=n}return t.P}function ds(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!Cs(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],a=t.filters[r],i.op!==a.op||!i.field.isEqual(a.field)||!Lu(i.value,a.value))return!1;var i,a;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Ds(e.startAt,t.startAt)&&Ds(e.endAt,t.endAt)}function ps(e){return Nu.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function vs(e,t){return e.filters.filter((function(e){return e instanceof gs&&e.field.isEqual(t)}))}function ms(e,t,n){var r,i,a=!0,o=xe(vs(e,t));try{for(o.s();!(i=o.n()).done;){var u=i.value,s=void 0,c=!0;switch(u.op){case"<":case"<=":s=Qu(u.value);break;case"==":case"in":case">=":s=u.value;break;case">":s=u.value,c=!1;break;case"!=":case"not-in":s=Pu}Yu(r,s)===s&&(r=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];Yu(r,f)===f&&(r=f,a=n.inclusive);break}return{value:r,inclusive:a}}function ys(e,t,n){var r,i,a=!0,o=xe(vs(e,t));try{for(o.s();!(i=o.n()).done;){var u=i.value,s=void 0,c=!0;switch(u.op){case">=":case">":s=Ju(u.value),c=!1;break;case"==":case"in":case"<=":s=u.value;break;case"<":s=u.value,c=!1;break;case"!=":case"not-in":s=Du}Xu(r,s)===s&&(r=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];Xu(r,f)===f&&(r=f,a=n.inclusive);break}return{value:r,inclusive:a}}var gs=function(e){Ie(n,e);var t=Pe(n);function n(e,r,i){var a;return we(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return Se(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(Mu(t,this.value)):null!==t&&Ou(this.value)===Ou(t)&&this.v(Mu(t,this.value))}},{key:"v",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Bo()}}},{key:"S",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new bs(e,t,r):"array-contains"===t?new Ss(e,r):"in"===t?new xs(e,r):"not-in"===t?new Es(e,r):"array-contains-any"===t?new _s(e,r):new n(e,t,r)}},{key:"V",value:function(e,t,n){return"in"===t?new ks(e,n):new ws(e,n)}}]),n}(function(){return Se((function e(){we(this,e)}))}()),bs=function(e){Ie(n,e);var t=Pe(n);function n(e,r,i){var a;return we(this,n),(a=t.call(this,e,r,i)).key=Nu.fromName(i.referenceValue),a}return Se(n,[{key:"matches",value:function(e){var t=Nu.comparator(e.key,this.key);return this.v(t)}}]),n}(gs),ks=function(e){Ie(n,e);var t=Pe(n);function n(e,r){var i;return we(this,n),(i=t.call(this,e,"in",r)).keys=As("in",r),i}return Se(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(gs),ws=function(e){Ie(n,e);var t=Pe(n);function n(e,r){var i;return we(this,n),(i=t.call(this,e,"not-in",r)).keys=As("not-in",r),i}return Se(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(gs);function As(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return Nu.fromName(e.referenceValue)}))}var Ss=function(e){Ie(n,e);var t=Pe(n);function n(e,r){return we(this,n),t.call(this,e,"array-contains",r)}return Se(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return qu(t)&&Ru(t.arrayValue,this.value)}}]),n}(gs),xs=function(e){Ie(n,e);var t=Pe(n);function n(e,r){return we(this,n),t.call(this,e,"in",r)}return Se(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&Ru(this.value.arrayValue,t)}}]),n}(gs),Es=function(e){Ie(n,e);var t=Pe(n);function n(e,r){return we(this,n),t.call(this,e,"not-in",r)}return Se(n,[{key:"matches",value:function(e){if(Ru(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!Ru(this.value.arrayValue,t)}}]),n}(gs),_s=function(e){Ie(n,e);var t=Pe(n);function n(e,r){return we(this,n),t.call(this,e,"array-contains-any",r)}return Se(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!qu(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return Ru(t.value.arrayValue,e)}))}}]),n}(gs),Is=Se((function e(t,n){we(this,e),this.position=t,this.inclusive=n})),Ts=Se((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";we(this,e),this.field=t,this.dir=n}));function Cs(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function Ns(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?Nu.comparator(Nu.fromName(o.referenceValue),n.key):Mu(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function Ds(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!Lu(e.position[n],t.position[n]))return!1;return!0}var Ps=Se((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;we(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.D=null,this.C=null,this.startAt,this.endAt}));function Os(e,t,n,r,i,a,o,u){return new Ps(e,t,n,r,i,a,o,u)}function Ls(e){return new Ps(e)}function Rs(e){return!Iu(e.limit)&&"F"===e.limitType}function Ms(e){return!Iu(e.limit)&&"L"===e.limitType}function Fs(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function js(e){var t,n=xe(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.S())return r.field}}catch(i){n.e(i)}finally{n.f()}return null}function Us(e){return null!==e.collectionGroup}function Vs(e){var t=zo(e);if(null===t.D){t.D=[];var n=js(t),r=Fs(t);if(null!==n&&null===r)n.isKeyField()||t.D.push(new Ts(n)),t.D.push(new Ts(vu.keyField(),"asc"));else{var i,a=!1,o=xe(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.D.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.D.push(new Ts(vu.keyField(),s))}}}return t.D}function Bs(e){var t=zo(e);if(!t.C)if("F"===t.limitType)t.C=fs(t.path,t.collectionGroup,Vs(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=xe(Vs(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new Ts(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new Is(t.endAt.position,!t.endAt.inclusive):null,s=t.startAt?new Is(t.startAt.position,!t.startAt.inclusive):null;t.C=fs(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t.C}function qs(e,t,n){return new Ps(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function zs(e,t){return ds(Bs(e),Bs(t))&&e.limitType===t.limitType}function Ks(e){return"".concat(hs(Bs(e)),"|lt:").concat(e.limitType)}function Ws(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(ju(t.value));var t})).join(", "),"]")),Iu(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return ju(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return ju(e)})).join(",")),"Target(".concat(t,")")}(Bs(e)),"; limitType=").concat(e.limitType,")")}function Hs(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Nu.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=xe(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=xe(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=Ns(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Vs(e),t))&&!(e.endAt&&!function(e,t,n){var r=Ns(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Vs(e),t))}(e,t)}function Gs(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Qs(e){return function(t,n){var r,i=!1,a=xe(Vs(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=Js(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function Js(e,t,n){var r=e.field.isKeyField()?Nu.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Mu(r,i):Bo()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Bo()}}function Ys(e,t){if(e.N){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Tu(t)?"-0":t}}function Xs(e){return{integerValue:""+e}}function Zs(e,t){return Cu(t)?Xs(t):Ys(e,t)}var $s=Se((function e(){we(this,e),this._=void 0}));function ec(e,t,n){return e instanceof rc?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof ic?ac(e,t):e instanceof oc?uc(e,t):function(e,t){var n=nc(e,t),r=cc(n)+cc(e.k);return Bu(n)&&Bu(e.k)?Xs(r):Ys(e.M,r)}(e,t)}function tc(e,t,n){return e instanceof ic?ac(e,t):e instanceof oc?uc(e,t):n}function nc(e,t){return e instanceof sc?Bu(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var rc=function(e){Ie(n,e);var t=Pe(n);function n(){return we(this,n),t.apply(this,arguments)}return Se(n)}($s),ic=function(e){Ie(n,e);var t=Pe(n);function n(e){var r;return we(this,n),(r=t.call(this)).elements=e,r}return Se(n)}($s);function ac(e,t){var n,r=lc(t),i=xe(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return Lu(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var oc=function(e){Ie(n,e);var t=Pe(n);function n(e){var r;return we(this,n),(r=t.call(this)).elements=e,r}return Se(n)}($s);function uc(e,t){var n,r=lc(t),i=xe(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!Lu(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var sc=function(e){Ie(n,e);var t=Pe(n);function n(e,r){var i;return we(this,n),(i=t.call(this)).M=e,i.k=r,i}return Se(n)}($s);function cc(e){return ku(e.integerValue||e.doubleValue)}function lc(e){return qu(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var fc=Se((function e(t,n){we(this,e),this.field=t,this.transform=n}));var hc=Se((function e(t,n){we(this,e),this.version=t,this.transformResults=n})),dc=function(){function e(t,n){we(this,e),this.updateTime=t,this.exists=n}return Se(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function pc(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var vc=Se((function e(){we(this,e)}));function mc(e,t,n){e instanceof wc?function(e,t,n){var r=e.value.clone(),i=xc(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Ac?function(e,t,n){if(pc(e.precondition,t)){var r=xc(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Sc(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function yc(e,t,n){e instanceof wc?function(e,t,n){if(pc(e.precondition,t)){var r=e.value.clone(),i=Ec(e.fieldTransforms,n,t);r.setAll(i),t.convertToFoundDocument(kc(t),r).setHasLocalMutations()}}(e,t,n):e instanceof Ac?function(e,t,n){if(pc(e.precondition,t)){var r=Ec(e.fieldTransforms,n,t),i=t.data;i.setAll(Sc(e)),i.setAll(r),t.convertToFoundDocument(kc(t),i).setHasLocalMutations()}}(e,t,n):function(e,t){pc(e.precondition,t)&&t.convertToNoDocument(su.min())}(e,t)}function gc(e,t){var n,r=null,i=xe(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=nc(a.transform,o||null);null!=u&&(null==r&&(r=Zu.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function bc(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&au(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof ic&&t instanceof ic||e instanceof oc&&t instanceof oc?au(e.elements,t.elements,Lu):e instanceof sc&&t instanceof sc?Lu(e.k,t.k):e instanceof rc&&t instanceof rc}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function kc(e){return e.isFoundDocument()?e.version:su.min()}var wc=function(e){Ie(n,e);var t=Pe(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return we(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return Se(n)}(vc),Ac=function(e){Ie(n,e);var t=Pe(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return we(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return Se(n)}(vc);function Sc(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function xc(e,t,n){var r=new Map;qo(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,tc(o,u,n[i]))}return r}function Ec(e,t,n){var r,i=new Map,a=xe(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,ec(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var _c,Ic,Tc=function(e){Ie(n,e);var t=Pe(n);function n(e,r){var i;return we(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return Se(n)}(vc),Cc=function(e){Ie(n,e);var t=Pe(n);function n(e,r){var i;return we(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return Se(n)}(vc),Nc=Se((function e(t){we(this,e),this.count=t}));function Dc(e){switch(e){default:return Bo();case Ko.CANCELLED:case Ko.UNKNOWN:case Ko.DEADLINE_EXCEEDED:case Ko.RESOURCE_EXHAUSTED:case Ko.INTERNAL:case Ko.UNAVAILABLE:case Ko.UNAUTHENTICATED:return!1;case Ko.INVALID_ARGUMENT:case Ko.NOT_FOUND:case Ko.ALREADY_EXISTS:case Ko.PERMISSION_DENIED:case Ko.FAILED_PRECONDITION:case Ko.ABORTED:case Ko.OUT_OF_RANGE:case Ko.UNIMPLEMENTED:case Ko.DATA_LOSS:return!0}}function Pc(e){if(void 0===e)return jo("GRPC error has no .code"),Ko.UNKNOWN;switch(e){case _c.OK:return Ko.OK;case _c.CANCELLED:return Ko.CANCELLED;case _c.UNKNOWN:return Ko.UNKNOWN;case _c.DEADLINE_EXCEEDED:return Ko.DEADLINE_EXCEEDED;case _c.RESOURCE_EXHAUSTED:return Ko.RESOURCE_EXHAUSTED;case _c.INTERNAL:return Ko.INTERNAL;case _c.UNAVAILABLE:return Ko.UNAVAILABLE;case _c.UNAUTHENTICATED:return Ko.UNAUTHENTICATED;case _c.INVALID_ARGUMENT:return Ko.INVALID_ARGUMENT;case _c.NOT_FOUND:return Ko.NOT_FOUND;case _c.ALREADY_EXISTS:return Ko.ALREADY_EXISTS;case _c.PERMISSION_DENIED:return Ko.PERMISSION_DENIED;case _c.FAILED_PRECONDITION:return Ko.FAILED_PRECONDITION;case _c.ABORTED:return Ko.ABORTED;case _c.OUT_OF_RANGE:return Ko.OUT_OF_RANGE;case _c.UNIMPLEMENTED:return Ko.UNIMPLEMENTED;case _c.DATA_LOSS:return Ko.DATA_LOSS;default:return Bo()}}(Ic=_c||(_c={}))[Ic.OK=0]="OK",Ic[Ic.CANCELLED=1]="CANCELLED",Ic[Ic.UNKNOWN=2]="UNKNOWN",Ic[Ic.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ic[Ic.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ic[Ic.NOT_FOUND=5]="NOT_FOUND",Ic[Ic.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ic[Ic.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ic[Ic.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ic[Ic.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ic[Ic.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ic[Ic.ABORTED=10]="ABORTED",Ic[Ic.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ic[Ic.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ic[Ic.INTERNAL=13]="INTERNAL",Ic[Ic.UNAVAILABLE=14]="UNAVAILABLE",Ic[Ic.DATA_LOSS=15]="DATA_LOSS";var Oc=function(){function e(t,n){we(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return Se(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=xe(n);try{for(i.s();!(r=i.n()).done;){var a=s(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(c){i.e(c)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){lu(this.inner,(function(t,n){var r,i=xe(n);try{for(i.s();!(r=i.n()).done;){var a=s(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(c){i.e(c)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return fu(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),Lc=function(){function e(t,n){we(this,e),this.comparator=t,this.root=n||Mc.EMPTY}return Se(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Mc.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Mc.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new Rc(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new Rc(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new Rc(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new Rc(this.root,e,this.comparator,!0)}}]),e}(),Rc=function(){function e(t,n,r,i){we(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return Se(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),Mc=function(){function e(t,n,r,i,a){we(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return Se(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw Bo();if(this.right.isRed())throw Bo();var e=this.left.check();if(e!==this.right.check())throw Bo();return e+(this.isRed()?0:1)}}]),e}();Mc.EMPTY=null,Mc.RED=!0,Mc.BLACK=!1,Mc.EMPTY=new(function(){function e(){we(this,e),this.size=0}return Se(e,[{key:"key",get:function(){throw Bo()}},{key:"value",get:function(){throw Bo()}},{key:"color",get:function(){throw Bo()}},{key:"left",get:function(){throw Bo()}},{key:"right",get:function(){throw Bo()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Mc(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var Fc=function(){function e(t){we(this,e),this.comparator=t,this.data=new Lc(this.comparator)}return Se(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new jc(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new jc(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),jc=function(){function e(t){we(this,e),this.iter=t}return Se(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function Uc(e){return e.hasNext()?e.getNext():void 0}var Vc=new Lc(Nu.comparator);function Bc(){return Vc}var qc=new Lc(Nu.comparator);function zc(){return qc}function Kc(){return new Oc((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var Wc=new Lc(Nu.comparator),Hc=new Fc(Nu.comparator);function Gc(){for(var e=Hc,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var Qc=new Fc(iu);function Jc(){return Qc}var Yc=function(){function e(t,n,r,i,a){we(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return Se(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n){var r=new Map;return r.set(t,Xc.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(su.min(),r,Jc(),Bc(),Gc())}}]),e}(),Xc=function(){function e(t,n,r,i,a){we(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return Se(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n){return new e(yu.EMPTY_BYTE_STRING,n,Gc(),Gc(),Gc())}}]),e}(),Zc=Se((function e(t,n,r,i){we(this,e),this.O=t,this.removedTargetIds=n,this.key=r,this.F=i})),$c=Se((function e(t,n){we(this,e),this.targetId=t,this.$=n})),el=Se((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:yu.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;we(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),tl=function(){function e(){we(this,e),this.B=0,this.L=il(),this.U=yu.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}return Se(e,[{key:"current",get:function(){return this.q}},{key:"resumeToken",get:function(){return this.U}},{key:"G",get:function(){return 0!==this.B}},{key:"j",get:function(){return this.K}},{key:"W",value:function(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}},{key:"H",value:function(){var e=Gc(),t=Gc(),n=Gc();return this.L.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Bo()}})),new Xc(this.U,this.q,e,t,n)}},{key:"J",value:function(){this.K=!1,this.L=il()}},{key:"Y",value:function(e,t){this.K=!0,this.L=this.L.insert(e,t)}},{key:"X",value:function(e){this.K=!0,this.L=this.L.remove(e)}},{key:"Z",value:function(){this.B+=1}},{key:"tt",value:function(){this.B-=1}},{key:"et",value:function(){this.K=!0,this.q=!0}}]),e}(),nl=function(){function e(t){we(this,e),this.nt=t,this.st=new Map,this.it=Bc(),this.rt=rl(),this.ot=new Fc(iu)}return Se(e,[{key:"ut",value:function(e){var t,n=xe(e.O);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.F&&e.F.isFoundDocument()?this.at(r,e.F):this.ct(r,e.key,e.F)}}catch(u){n.e(u)}finally{n.f()}var i,a=xe(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.ct(o,e.key,e.F)}}catch(u){a.e(u)}finally{a.f()}}},{key:"ht",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.lt(n);switch(e.state){case 0:t.ft(n)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||t.removeTarget(n);break;case 3:t.ft(n)&&(r.et(),r.W(e.resumeToken));break;case 4:t.ft(n)&&(t.dt(n),r.W(e.resumeToken));break;default:Bo()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((function(e,r){n.ft(r)&&t(r)}))}},{key:"_t",value:function(e){var t=e.targetId,n=e.$.count,r=this.wt(t);if(r){var i=r.target;if(ps(i))if(0===n){var a=new Nu(i.path);this.ct(t,a,es.newNoDocument(a,su.min()))}else qo(1===n);else this.gt(t)!==n&&(this.dt(t),this.ot=this.ot.add(t))}}},{key:"yt",value:function(e){var t=this,n=new Map;this.st.forEach((function(r,i){var a=t.wt(i);if(a){if(r.current&&ps(a.target)){var o=new Nu(a.target.path);null!==t.it.get(o)||t.It(i,o)||t.ct(i,o,es.newNoDocument(o,e))}r.j&&(n.set(i,r.H()),r.J())}}));var r=Gc();this.rt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.wt(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.it.forEach((function(t,n){return n.setReadTime(e)}));var i=new Yc(e,n,this.ot,this.it,r);return this.it=Bc(),this.rt=rl(),this.ot=new Fc(iu),i}},{key:"at",value:function(e,t){if(this.ft(e)){var n=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,n),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}}},{key:"ct",value:function(e,t,n){if(this.ft(e)){var r=this.lt(e);this.It(e,t)?r.Y(t,1):r.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),n&&(this.it=this.it.insert(t,n))}}},{key:"removeTarget",value:function(e){this.st.delete(e)}},{key:"gt",value:function(e){var t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Z",value:function(e){this.lt(e).Z()}},{key:"lt",value:function(e){var t=this.st.get(e);return t||(t=new tl,this.st.set(e,t)),t}},{key:"Tt",value:function(e){var t=this.rt.get(e);return t||(t=new Fc(iu),this.rt=this.rt.insert(e,t)),t}},{key:"ft",value:function(e){var t=null!==this.wt(e);return t||Fo("WatchChangeAggregator","Detected inactive target",e),t}},{key:"wt",value:function(e){var t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}},{key:"dt",value:function(e){var t=this;this.st.set(e,new tl),this.nt.getRemoteKeysForTarget(e).forEach((function(n){t.ct(e,n,null)}))}},{key:"It",value:function(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}]),e}();function rl(){return new Lc(Nu.comparator)}function il(){return new Lc(Nu.comparator)}var al={asc:"ASCENDING",desc:"DESCENDING"},ol={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ul=Se((function e(t,n){we(this,e),this.databaseId=t,this.N=n}));function sl(e,t){return e.N?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function cl(e,t){return e.N?t.toBase64():t.toUint8Array()}function ll(e,t){return sl(e,t.toTimestamp())}function fl(e){return qo(!!e),su.fromTimestamp(function(e){var t=bu(e);return new uu(t.seconds,t.nanos)}(e))}function hl(e,t){return function(e){return new du(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function dl(e){var t=du.fromString(e);return qo(Ml(t)),t}function pl(e,t){return hl(e.databaseId,t.path)}function vl(e,t){var n=dl(t);if(n.get(1)!==e.databaseId.projectId)throw new Wo(Ko.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Wo(Ko.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Nu(bl(n))}function ml(e,t){return hl(e.databaseId,t)}function yl(e){var t=dl(e);return 4===t.length?du.emptyPath():bl(t)}function gl(e){return new du(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function bl(e){return qo(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function kl(e,t,n){return{name:pl(e,t),fields:n.value.mapValue.fields}}function wl(e,t,n){var r=vl(e,t.name),i=fl(t.updateTime),a=new Zu({mapValue:{fields:t.fields}}),o=es.newFoundDocument(r,i,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function Al(e,t){return"found"in t?function(e,t){qo(!!t.found),t.found.name,t.found.updateTime;var n=vl(e,t.found.name),r=fl(t.found.updateTime),i=new Zu({mapValue:{fields:t.found.fields}});return es.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){qo(!!t.missing),qo(!!t.readTime);var n=vl(e,t.missing),r=fl(t.readTime);return es.newNoDocument(n,r)}(e,t):Bo()}function Sl(e,t){var n;if(t instanceof wc)n={update:kl(e,t.key,t.value)};else if(t instanceof Tc)n={delete:pl(e,t.key)};else if(t instanceof Ac)n={update:kl(e,t.key,t.data),updateMask:Rl(t.fieldMask)};else{if(!(t instanceof Cc))return Bo();n={verify:pl(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof rc)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof ic)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof oc)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof sc)return{fieldPath:t.field.canonicalString(),increment:n.k};throw Bo()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:ll(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Bo()}(e,t.precondition)),n}function xl(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?dc.updateTime(fl(e.updateTime)):void 0!==e.exists?dc.exists(e.exists):dc.none()}(t.currentDocument):dc.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)qo("REQUEST_TIME"===t.setToServerValue),n=new rc;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new ic(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new oc(i)}else"increment"in t?n=new sc(e,t.increment):Bo();var a=vu.fromServerFormat(t.fieldPath);return new fc(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=vl(e,t.update.name),a=new Zu({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new mu(t.map((function(e){return vu.fromServerFormat(e)})))}(t.updateMask);return new Ac(i,a,o,n,r)}return new wc(i,a,n,r)}if(t.delete){var u=vl(e,t.delete);return new Tc(u,n)}if(t.verify){var s=vl(e,t.verify);return new Cc(s,n)}return Bo()}function El(e,t){return{documents:[ml(e,t.path)]}}function _l(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=ml(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=ml(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(Ku(e.value))return{unaryFilter:{field:Dl(e.field),op:"IS_NAN"}};if(zu(e.value))return{unaryFilter:{field:Dl(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Ku(e.value))return{unaryFilter:{field:Dl(e.field),op:"IS_NOT_NAN"}};if(zu(e.value))return{unaryFilter:{field:Dl(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Dl(e.field),op:Nl(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:Dl(e.field),direction:Cl(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,u=function(e,t){return e.N||Iu(t)?t:{value:t}}(e,t.limit);return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function Il(e){var t=yl(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){qo(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=Tl(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new Ts(Pl(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return Iu(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new Is(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new Is(n,t)}(n.endAt)),Os(t,i,u,o,s,"F",c,l)}function Tl(e){return e?void 0!==e.unaryFilter?[Ll(e)]:void 0!==e.fieldFilter?[Ol(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return Tl(e)})).reduce((function(e,t){return e.concat(t)})):Bo():[]}function Cl(e){return al[e]}function Nl(e){return ol[e]}function Dl(e){return{fieldPath:e.canonicalString()}}function Pl(e){return vu.fromServerFormat(e.fieldPath)}function Ol(e){return gs.create(Pl(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Bo()}}(e.fieldFilter.op),e.fieldFilter.value)}function Ll(e){switch(e.unaryFilter.op){case"IS_NAN":var t=Pl(e.unaryFilter.field);return gs.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=Pl(e.unaryFilter.field);return gs.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Pl(e.unaryFilter.field);return gs.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Pl(e.unaryFilter.field);return gs.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Bo()}}function Rl(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function Ml(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function Fl(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=Ul(t)),t=jl(e.get(n),t);return Ul(t)}function jl(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function Ul(e){return e+"\x01\x01"}function Vl(e){var t=e.length;if(qo(t>=2),2===t)return qo("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),du.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&Bo(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:Bo()}a=o+2}return new du(r)}var Bl=["userId","batchId"];function ql(e,t){return[e,Fl(t)]}function zl(e,t,n){return[e,Fl(t),n]}var Kl={},Wl=["prefixPath","collectionGroup","readTime","documentId"],Hl=["prefixPath","collectionGroup","documentId"],Gl=["collectionGroup","readTime","prefixPath","documentId"],Ql=["canonicalId","targetId"],Jl=["targetId","path"],Yl=["path","targetId"],Xl=["collectionId","parent"],Zl=["indexId","uid"],$l=["uid","sequenceNumber"],ef=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],tf=["indexId","uid","orderedDocumentKey"],nf=["userId","collectionPath","documentId"],rf=["userId","collectionPath","largestBatchId"],af=["userId","collectionGroup","largestBatchId"],of=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),uf=[].concat(ot(of),["documentOverlays"]),sf=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],cf=[].concat(sf,["indexConfiguration","indexState","indexEntries"]),lf="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",ff=function(){function e(){we(this,e),this.onCommittedListeners=[]}return Se(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}(),hf=function(){function e(t){var n=this;we(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return Se(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&Bo(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=xe(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}}]),e}(),df=function(){function e(t,n){var r=this;we(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.At=new Ho,this.transaction.oncomplete=function(){r.At.resolve()},this.transaction.onabort=function(){n.error?r.At.reject(new mf(t,n.error)):r.At.resolve()},this.transaction.onerror=function(e){var n=wf(e.target.error);r.At.reject(new mf(t,n))}}return Se(e,[{key:"Rt",get:function(){return this.At.promise}},{key:"abort",value:function(e){e&&this.At.reject(e),this.aborted||(Fo("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"Pt",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new gf(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new mf(n,t)}}}]),e}(),pf=function(){function e(t,n,r){we(this,e),this.name=t,this.version=n,this.bt=r,12.2===e.Vt(Be())&&jo("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return Se(e,[{key:"Nt",value:function(){var e=Z(ee().mark((function e(t){var n=this;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return Fo("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new mf(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new Wo(Ko.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new Wo(Ko.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new mf(t,n))},i.onupgradeneeded=function(e){Fo("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.bt.kt(t,i.transaction,e.oldVersion,n.version).next((function(){Fo("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.Mt&&(this.db.onversionchange=function(e){return n.Mt(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ot",value:function(e){this.Mt=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=Z(ee().mark((function e(t,n,r,i){var a,o,u,s,c=this;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0;case 2:return++o,e.prev=3,e.delegateYield(ee().mark((function e(){var n,o;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Nt(t);case 2:return c.db=e.sent,n=df.open(c.db,t,a?"readonly":"readwrite",r),o=i(n).next((function(e){return n.Pt(),e})).catch((function(e){return n.abort(e),hf.reject(e)})).toPromise(),o.catch((function(){})),e.next=7,n.Rt;case 7:return e.t0=o,e.abrupt("return",{v:e.t0});case 9:case"end":return e.stop()}}),e)}))(),"t0",5);case 5:if("object"!==typeof(u=e.t0)){e.next=8;break}return e.abrupt("return",u.v);case 8:e.next=15;break;case 10:if(e.prev=10,e.t1=e.catch(3),s="FirebaseError"!==e.t1.name&&o<3,Fo("SimpleDb","Transaction failed with error:",e.t1.message,"Retrying:",s),this.close(),s){e.next=15;break}return e.abrupt("return",Promise.reject(e.t1));case 15:e.next=2;break;case 17:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return Fo("SimpleDb","Removing database:",e),bf(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"vt",value:function(){if(!ze())return!1;if(e.St())return!0;var t=Be(),n=e.Vt(t),r=0<n&&n<10,i=e.Dt(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"St",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"/ecommerce-project",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.Ct)}},{key:"xt",value:function(e,t){return e.store(t)}},{key:"Vt",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"Dt",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),vf=function(){function e(t){we(this,e),this.Ft=t,this.$t=!1,this.Bt=null}return Se(e,[{key:"isDone",get:function(){return this.$t}},{key:"Lt",get:function(){return this.Bt}},{key:"cursor",set:function(e){this.Ft=e}},{key:"done",value:function(){this.$t=!0}},{key:"Ut",value:function(e){this.Bt=e}},{key:"delete",value:function(){return bf(this.Ft.delete())}}]),e}(),mf=function(e){Ie(n,e);var t=Pe(n);function n(e,r){var i;return we(this,n),(i=t.call(this,Ko.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return Se(n)}(Wo);function yf(e){return"IndexedDbTransactionError"===e.name}var gf=function(){function e(t){we(this,e),this.store=t}return Se(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(Fo("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Fo("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),bf(n)}},{key:"add",value:function(e){return Fo("SimpleDb","ADD",this.store.name,e,e),bf(this.store.add(e))}},{key:"get",value:function(e){var t=this;return bf(this.store.get(e)).next((function(n){return void 0===n&&(n=null),Fo("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return Fo("SimpleDb","DELETE",this.store.name,e),bf(this.store.delete(e))}},{key:"count",value:function(){return Fo("SimpleDb","COUNT",this.store.name),bf(this.store.count())}},{key:"qt",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.Kt(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new hf((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"Gt",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new hf((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"Qt",value:function(e,t){Fo("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.jt=!1;var r=this.cursor(n);return this.Kt(r,(function(e,t,n){return n.delete()}))}},{key:"Wt",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.Kt(r,t)}},{key:"zt",value:function(e){var t=this.cursor({});return new hf((function(n,r){t.onerror=function(e){var t=wf(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"Kt",value:function(e,t){var n=[];return new hf((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new vf(i),o=t(i.primaryKey,i.value,a);if(o instanceof hf){var u=o.catch((function(e){return a.done(),hf.reject(e)}));n.push(u)}a.isDone?r():null===a.Lt?i.continue():i.continue(a.Lt)}else r()}})).next((function(){return hf.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.jt?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function bf(e){return new hf((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=wf(e.target.error);n(t)}}))}var kf=!1;function wf(e){var t=pf.Vt(Be());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new Wo("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return kf||(kf=!0,setTimeout((function(){throw r}),0)),r}}return e}var Af=function(e){Ie(n,e);var t=Pe(n);function n(e,r){var i;return we(this,n),(i=t.call(this)).Ht=e,i.currentSequenceNumber=r,i}return Se(n)}(ff);function Sf(e,t){var n=zo(e);return pf.xt(n.Ht,t)}var xf=function(){function e(t,n,r,i){we(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return Se(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&mc(i,e,n[r])}}},{key:"applyToLocalView",value:function(e){var t,n=xe(this.baseMutations);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.key.isEqual(e.key)&&yc(r,e,this.localWriteTime)}}catch(u){n.e(u)}finally{n.f()}var i,a=xe(this.mutations);try{for(a.s();!(i=a.n()).done;){var o=i.value;o.key.isEqual(e.key)&&yc(o,e,this.localWriteTime)}}catch(u){a.e(u)}finally{a.f()}}},{key:"applyToLocalDocumentSet",value:function(e){var t=this;this.mutations.forEach((function(n){var r=e.get(n.key),i=r;t.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(su.min())}))}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),Gc())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&au(this.mutations,e.mutations,(function(e,t){return bc(e,t)}))&&au(this.baseMutations,e.baseMutations,(function(e,t){return bc(e,t)}))}}]),e}(),Ef=function(){function e(t,n,r,i){we(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return Se(e,null,[{key:"from",value:function(t,n,r){qo(t.mutations.length===r.length);for(var i=Wc,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),_f=function(){function e(t,n){we(this,e),this.largestBatchId=t,this.mutation=n}return Se(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),If=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:su.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:su.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:yu.EMPTY_BYTE_STRING;we(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u}return Se(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),Tf=Se((function e(t){we(this,e),this.Jt=t}));function Cf(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Nf(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:pl(e,t.key),fields:t.data.value.mapValue.fields,updateTime:sl(e,t.version.toTimestamp())}}(e.Jt,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Df(t.version)};else{if(!t.isUnknownDocument())return Bo();r.unknownDocument={path:n.path.toArray(),version:Df(t.version)}}return r}function Nf(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Df(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Pf(e){var t=new uu(e.seconds,e.nanoseconds);return su.fromTimestamp(t)}function Of(e,t){for(var n=(t.baseMutations||[]).map((function(t){return xl(e.Jt,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return xl(e.Jt,t)})),u=uu.fromMillis(t.localWriteTimeMs);return new xf(t.batchId,u,n,o)}function Lf(e){var t,n,r=Pf(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?Pf(e.lastLimboFreeSnapshotVersion):su.min();return void 0!==e.query.documents?(qo(1===(n=e.query).documents.length),t=Bs(Ls(yl(n.documents[0])))):t=function(e){return Bs(Il(e))}(e.query),new If(t,e.targetId,0,e.lastListenSequenceNumber,r,i,yu.fromBase64String(e.resumeToken))}function Rf(e,t){var n,r=Df(t.snapshotVersion),i=Df(t.lastLimboFreeSnapshotVersion);n=ps(t.target)?El(e.Jt,t.target):_l(e.Jt,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:hs(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function Mf(e){var t=Il({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?qs(t,t.limit,"L"):t}function Ff(e,t){return new _f(t.largestBatchId,xl(e.Jt,t.overlayMutation))}function jf(e,t){var n=t.path.lastSegment();return[e,Fl(t.path.popLast()),n]}var Uf=function(){function e(){we(this,e)}return Se(e,[{key:"getBundleMetadata",value:function(e,t){return Vf(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:Pf(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return Vf(e).put({bundleId:(n=t).id,createTime:Df(fl(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return Bf(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:Mf(t.bundledQuery),readTime:Pf(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return Bf(e).put(function(e){return{name:e.name,readTime:Df(fl(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function Vf(e){return Sf(e,"bundles")}function Bf(e){return Sf(e,"namedQueries")}var qf=function(){function e(t,n){we(this,e),this.M=t,this.userId=n}return Se(e,[{key:"getOverlay",value:function(e,t){var n=this;return zf(e).get(jf(this.userId,t)).next((function(e){return e?Ff(n.M,e):null}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new _f(t,a);i.push(r.Xt(e,o))})),hf.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(Fl(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(zf(e).Qt("collectionPathOverlayIndex",i))})),hf.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=Kc(),a=Fl(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return zf(e).qt("collectionPathOverlayIndex",o).next((function(e){var t,n=xe(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=Ff(r.M,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=Kc(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return zf(e).Wt({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=Ff(a.M,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"Xt",value:function(e,t){return zf(e).put(function(e,t,n){var r=s(jf(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Sl(e.Jt,n.mutation)}}(this.M,this.userId,t))}}],[{key:"Yt",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function zf(e){return Sf(e,"documentOverlays")}var Kf=function(){function e(){we(this,e)}return Se(e,[{key:"Zt",value:function(e,t){this.te(e,t),t.ee()}},{key:"te",value:function(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(ku(e.integerValue));else if("doubleValue"in e){var n=ku(e.doubleValue);isNaN(n)?this.ne(t,13):(this.ne(t,15),Tu(n)?t.se(0):t.se(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie("".concat(r.seconds||"")),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(wu(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ne(t,45),t.se(i.latitude||0),t.se(i.longitude||0)}else"mapValue"in e?Gu(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):Bo()}},{key:"re",value:function(e,t){this.ne(t,25),this.le(e,t)}},{key:"le",value:function(e,t){t.ie(e)}},{key:"ce",value:function(e,t){var n=e.fields||{};this.ne(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.re(a,t),this.te(n[a],t)}}},{key:"he",value:function(e,t){var n=e.values||[];this.ne(t,50);var r,i=xe(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.te(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"ae",value:function(e,t){var n=this;this.ne(t,37),Nu.fromName(e).path.forEach((function(e){n.ne(t,60),n.le(e,t)}))}},{key:"ne",value:function(e,t){e.se(t)}},{key:"oe",value:function(e){e.se(2)}}]),e}();function Wf(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function Hf(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=Wf(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}Kf.fe=new Kf;var Gf=function(){function e(){we(this,e),this.buffer=new Uint8Array(1024),this.position=0}return Se(e,[{key:"de",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this._e(n.value),n=t.next();this.we()}},{key:"me",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.ge(n.value),n=t.next();this.ye()}},{key:"pe",value:function(e){var t,n=xe(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this._e(i);else if(i<2048)this._e(960|i>>>6),this._e(128|63&i);else if(r<"\ud800"||"\udbff"<r)this._e(480|i>>>12),this._e(128|63&i>>>6),this._e(128|63&i);else{var a=r.codePointAt(0);this._e(240|a>>>18),this._e(128|63&a>>>12),this._e(128|63&a>>>6),this._e(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.we()}},{key:"Ie",value:function(e){var t,n=xe(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.ge(i);else if(i<2048)this.ge(960|i>>>6),this.ge(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.ge(480|i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i);else{var a=r.codePointAt(0);this.ge(240|a>>>18),this.ge(128|63&a>>>12),this.ge(128|63&a>>>6),this.ge(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.ye()}},{key:"Te",value:function(e){var t=this.Ee(e),n=Hf(t);this.Ae(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"Re",value:function(e){var t=this.Ee(e),n=Hf(t);this.Ae(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"Pe",value:function(){this.be(255),this.be(255)}},{key:"Ve",value:function(){this.ve(255),this.ve(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Se",value:function(){return this.buffer.slice(0,this.position)}},{key:"Ee",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"_e",value:function(e){var t=255&e;0===t?(this.be(0),this.be(255)):255===t?(this.be(255),this.be(0)):this.be(t)}},{key:"ge",value:function(e){var t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}},{key:"we",value:function(){this.be(0),this.be(1)}},{key:"ye",value:function(){this.ve(0),this.ve(1)}},{key:"be",value:function(e){this.Ae(1),this.buffer[this.position++]=e}},{key:"ve",value:function(e){this.Ae(1),this.buffer[this.position++]=~e}},{key:"Ae",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),Qf=function(){function e(t){we(this,e),this.De=t}return Se(e,[{key:"ue",value:function(e){this.De.de(e)}},{key:"ie",value:function(e){this.De.pe(e)}},{key:"se",value:function(e){this.De.Te(e)}},{key:"ee",value:function(){this.De.Pe()}}]),e}(),Jf=function(){function e(t){we(this,e),this.De=t}return Se(e,[{key:"ue",value:function(e){this.De.me(e)}},{key:"ie",value:function(e){this.De.Ie(e)}},{key:"se",value:function(e){this.De.Re(e)}},{key:"ee",value:function(){this.De.Ve()}}]),e}(),Yf=function(){function e(){we(this,e),this.De=new Gf,this.Ce=new Qf(this.De),this.xe=new Jf(this.De)}return Se(e,[{key:"seed",value:function(e){this.De.seed(e)}},{key:"Ne",value:function(e){return 0===e?this.Ce:this.xe}},{key:"Se",value:function(){return this.De.Se()}},{key:"reset",value:function(){this.De.reset()}}]),e}(),Xf=function(){function e(t,n,r,i){we(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return Se(e,[{key:"ke",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function Zf(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=$f(e.arrayValue,t.arrayValue))?n:0!==(n=$f(e.directionalValue,t.directionalValue))?n:Nu.comparator(e.documentKey,t.documentKey)}function $f(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var eh=function(){function e(t){we(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Me=t.orderBy,this.Oe=[];var n,r=xe(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.S()?this.Fe=i:this.Oe.push(i)}}catch(a){r.e(a)}finally{r.f()}}return Se(e,[{key:"$e",value:function(e){var t=ns(e);if(void 0!==t&&!this.Be(t))return!1;for(var n=rs(e),r=0,i=0;r<n.length&&this.Be(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.Fe){var a=n[r];if(!this.Le(this.Fe,a)||!this.Ue(this.Me[i++],a))return!1;++r}for(;r<n.length;++r){var o=n[r];if(i>=this.Me.length||!this.Ue(this.Me[i++],o))return!1}return!0}},{key:"Be",value:function(e){var t,n=xe(this.Oe);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.Le(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"Le",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"Ue",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}(),th=function(){function e(){we(this,e),this.qe=new nh}return Se(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.qe.add(t),hf.resolve()}},{key:"getCollectionParents",value:function(e,t){return hf.resolve(this.qe.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return hf.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return hf.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return hf.resolve(null)}},{key:"getFieldIndex",value:function(e,t){return hf.resolve(null)}},{key:"getFieldIndexes",value:function(e,t){return hf.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return hf.resolve(null)}},{key:"updateCollectionGroup",value:function(e,t,n){return hf.resolve()}},{key:"updateIndexEntries",value:function(e,t){return hf.resolve()}}]),e}(),nh=function(){function e(){we(this,e),this.index={}}return Se(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Fc(du.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new Fc(du.comparator)).toArray()}}]),e}(),rh=new Uint8Array(0),ih=function(){function e(t,n){we(this,e),this.user=t,this.databaseId=n,this.Ke=new nh,this.Ge=new Oc((function(e){return hs(e)}),(function(e,t){return ds(e,t)})),this.uid=t.uid||""}return Se(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.Ke.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.Ke.add(t)}));var a={collectionId:r,parent:Fl(i)};return ah(e).put(a)}return hf.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[ou(t),""],!1,!0);return ah(e).qt(r).next((function(e){var r,i=xe(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(Vl(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=uh(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);return delete r.indexId,n.add(r).next()}},{key:"deleteFieldIndex",value:function(e,t){var n=uh(e),r=sh(e),i=oh(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=oh(e),i=!0,a=new Map;return hf.forEach(this.Qe(t),(function(t){return n.getFieldIndex(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=Gc(),o=[];return hf.forEach(a,(function(i,a){var u;Fo("IndexedDbIndexManager","Using index ".concat((u=i,"id=".concat(u.indexId,"|cg=").concat(u.collectionGroup,"|f=").concat(u.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(hs(t)));var s=function(e,t){var n=ns(t);if(void 0===n)return null;var r,i=xe(vs(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=new Map,i=xe(rs(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=xe(vs(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),l=function(e,t){var n,r=[],i=!0,a=xe(rs(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?ms(e,o.fieldPath,e.startAt):ys(e,o.fieldPath,e.startAt);if(!u.value)return null;r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new Is(r,i)}(a,i),f=function(e,t){var n,r=[],i=!0,a=xe(rs(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?ys(e,o.fieldPath,e.endAt):ms(e,o.fieldPath,e.endAt);if(!u.value)return null;r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new Is(r,i)}(a,i),h=n.je(i,a,l),d=n.je(i,a,f),p=n.We(i,a,c),v=n.ze(i.indexId,s,h,!!l&&l.inclusive,d,!!f&&f.inclusive,p);return hf.forEach(v,(function(n){return r.Gt(n,t.limit).next((function(t){t.forEach((function(t){var n=Nu.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return hf.resolve(null)}))}},{key:"Qe",value:function(e){var t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}},{key:"ze",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(null!=n?n.length:1,null!=i?i.length:1),c=s/(null!=t?t.length:1),l=[],f=function(s){var f=t?u.He(t[s/c]):rh,h=n?u.Je(e,f,n[s%c],r):u.Ye(e),d=i?u.Xe(e,f,i[s%c],a):u.Ye(e+1);l.push.apply(l,ot(u.createRange(h,d,o.map((function(t){return u.Je(e,f,t,!0)})))))},h=0;h<s;++h)f(h);return l}},{key:"Je",value:function(e,t,n,r){var i=new Xf(e,Nu.empty(),t,n);return r?i:i.ke()}},{key:"Xe",value:function(e,t,n,r){var i=new Xf(e,Nu.empty(),t,n);return r?i.ke():i}},{key:"Ye",value:function(e){return new Xf(e,Nu.empty(),rh,rh)}},{key:"getFieldIndex",value:function(e,t){var n=new eh(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t=e.filter((function(e){return n.$e(e)}));return t.sort((function(e,t){return t.fields.length-e.fields.length})),t.length>0?t[0]:null}))}},{key:"Ze",value:function(e,t){var n,r=new Yf,i=xe(rs(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.Ne(a.kind);Kf.fe.Zt(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.Se()}},{key:"He",value:function(e){var t=new Yf;return Kf.fe.Zt(e,t.Ne(0)),t.Se()}},{key:"tn",value:function(e,t){var n=new Yf;return Kf.fe.Zt(Vu(this.databaseId,t),n.Ne(function(e){var t=rs(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Se()}},{key:"We",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new Yf);var i,a=0,o=xe(rs(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=n[a++],l=xe(r);try{for(l.s();!(u=l.n()).done;){var f=u.value;if(this.en(t,s.fieldPath)&&qu(c))r=this.nn(r,s,c);else{var h=f.Ne(s.kind);Kf.fe.Zt(c,h)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.sn(r)}},{key:"je",value:function(e,t,n){return null==n?null:this.We(e,t,n.position)}},{key:"sn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Se();return t}},{key:"nn",value:function(e,t,n){var r,i=ot(e),a=[],o=xe(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,c=xe(i);try{for(c.s();!(u=c.n()).done;){var l=u.value,f=new Yf;f.seed(l.Se()),Kf.fe.Zt(s,f.Ne(t.kind)),a.push(f)}}catch(h){c.e(h)}finally{c.f()}}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"en",value:function(e,t){return!!e.filters.find((function(e){return e instanceof gs&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=uh(e),i=sh(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next((function(e){var t=[];return hf.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new as(t.sequenceNumber,new ss(Pf(t.readTime),new Nu(Vl(t.documentKey)),t.largestBatchId)):as.empty(),r=e.fields.map((function(e){var t=s(e,2),n=t[0],r=t[1];return new is(vu.fromServerFormat(n),r)}));return new ts(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:iu(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=uh(e),a=sh(e);return this.rn(e).next((function(e){return i.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return hf.forEach(t,(function(t){return a.put(function(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:Df(r.readTime),documentKey:Fl(r.documentKey.path),largestBatchId:r.largestBatchId}}(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return hf.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?hf.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),hf.forEach(a,(function(r){return n.on(e,t,r).next((function(t){var a=n.un(i,r);return t.isEqual(a)?hf.resolve():n.an(e,i,r,t,a)}))}))}))}))}},{key:"cn",value:function(e,t,n,r){return oh(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.tn(n,t.key),documentKey:t.key.path.toArray()})}},{key:"hn",value:function(e,t,n,r){return oh(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.tn(n,t.key),t.key.path.toArray()])}},{key:"on",value:function(e,t,n){var r=oh(e),i=new Fc(Zf);return r.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.tn(n,t)])},(function(e,r){i=i.add(new Xf(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"un",value:function(e,t){var n=new Fc(Zf),r=this.Ze(t,e);if(null==r)return n;var i=ns(t);if(null!=i){var a=e.data.field(i.fieldPath);if(qu(a)){var o,u=xe(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new Xf(t.indexId,e.key,this.He(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new Xf(t.indexId,e.key,rh,r));return n}},{key:"an",value:function(e,t,n,r,i){var a=this;Fo("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=Uc(a),s=Uc(o);u||s;){var c=!1,l=!1;if(u&&s){var f=n(u,s);f<0?l=!0:f>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=Uc(o)):l?(i(u),u=Uc(a)):(u=Uc(a),s=Uc(o))}}(r,i,Zf,(function(r){o.push(a.cn(e,t,n,r))}),(function(r){o.push(a.hn(e,t,n,r))})),hf.waitFor(o)}},{key:"rn",value:function(e){var t=1;return sh(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return Zf(e,t)})).filter((function(e,t,n){return!t||0!==Zf(e,n[t-1])}));var r=[];r.push(e);var i,a=xe(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=Zf(o,e),s=Zf(o,t);if(0===u)r[0]=e.ke();else if(u>0&&s<0)r.push(o),r.push(o.ke());else if(s>0)break}}catch(f){a.e(f)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2)c.push(IDBKeyRange.bound([r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,rh,[]],[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,rh,[]]));return c}}]),e}();function ah(e){return Sf(e,"collectionParents")}function oh(e){return Sf(e,"indexEntries")}function uh(e){return Sf(e,"indexConfiguration")}function sh(e){return Sf(e,"indexState")}var ch={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},lh=function(){function e(t,n,r){we(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return Se(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function fh(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.Wt({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){qo(1===u)})));var c,l=[],f=xe(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=zl(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(p){f.e(p)}finally{f.f()}return hf.waitFor(a).next((function(){return l}))}function hh(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Bo();t=e.noDocument}return JSON.stringify(t).length}lh.DEFAULT_COLLECTION_PERCENTILE=10,lh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,lh.DEFAULT=new lh(41943040,lh.DEFAULT_COLLECTION_PERCENTILE,lh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),lh.DISABLED=new lh(-1,0,0);var dh=function(){function e(t,n,r,i){we(this,e),this.userId=t,this.M=n,this.indexManager=r,this.referenceDelegate=i,this.ln={}}return Se(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return vh(e).Wt({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=mh(e),o=vh(e);return o.add({}).next((function(u){qo("number"==typeof u);var s,c=new xf(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return Sl(e.Jt,t)})),i=n.mutations.map((function(t){return Sl(e.Jt,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.M,i.userId,c),f=[],h=new Fc((function(e,t){return iu(e.canonicalString(),t.canonicalString())})),d=xe(r);try{for(d.s();!(s=d.n()).done;){var p=s.value,v=zl(i.userId,p.key.path,u);h=h.add(p.key.path.popLast()),f.push(o.put(l)),f.push(a.put(v,Kl))}}catch(m){d.e(m)}finally{d.f()}return h.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.ln[u]=c.keys()})),hf.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return vh(e).get(t).next((function(e){return e?(qo(e.userId===n.userId),Of(n.M,e)):null}))}},{key:"fn",value:function(e,t){var n=this;return this.ln[t]?hf.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.ln[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return vh(e).Wt({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(qo(t.batchId>=r),a=Of(n.M,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return vh(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return vh(e).qt("userMutationsIndex",n).next((function(e){return e.map((function(e){return Of(t.M,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=ql(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return mh(e).Wt({range:i},(function(r,i,o){var u=s(r,3),c=u[0],l=u[1],f=u[2],h=Vl(l);if(c===n.userId&&t.path.isEqual(h))return vh(e).get(f).next((function(e){if(!e)throw Bo();qo(e.userId===n.userId),a.push(Of(n.M,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Fc(iu),i=[];return t.forEach((function(t){var a=ql(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=mh(e).Wt({range:o},(function(e,i,a){var o=s(e,3),u=o[0],c=o[1],l=o[2],f=Vl(c);u===n.userId&&t.path.isEqual(f)?r=r.add(l):a.done()}));i.push(u)})),hf.waitFor(i).next((function(){return n.dn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=ql(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new Fc(iu);return mh(e).Wt({range:o},(function(e,t,a){var o=s(e,3),c=o[0],l=o[1],f=o[2],h=Vl(l);c===n.userId&&r.isPrefixOf(h)?h.length===i&&(u=u.add(f)):a.done()})).next((function(){return n.dn(e,u)}))}},{key:"dn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(vh(e).get(t).next((function(e){if(null===e)throw Bo();qo(e.userId===n.userId),r.push(Of(n.M,e))})))})),hf.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return fh(e.Ht,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n._n(t.batchId)})),hf.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"_n",value:function(e){delete this.ln[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return hf.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return mh(e).Wt({range:r},(function(e,n,r){if(e[0]===t.userId){var a=Vl(e[1]);i.push(a)}else r.done()})).next((function(){qo(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return ph(e,this.userId,t)}},{key:"wn",value:function(e){var t=this;return yh(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"Yt",value:function(t,n,r,i){return qo(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function ph(e,t,n){var r=ql(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return mh(e).Wt({range:a,jt:!0},(function(e,n,r){var a=s(e,3),u=a[0],c=a[1];a[2];u===t&&c===i&&(o=!0),r.done()})).next((function(){return o}))}function vh(e){return Sf(e,"mutations")}function mh(e){return Sf(e,"documentMutations")}function yh(e){return Sf(e,"mutationQueues")}var gh=function(){function e(t){we(this,e),this.mn=t}return Se(e,[{key:"next",value:function(){return this.mn+=2,this.mn}}],[{key:"gn",value:function(){return new e(0)}},{key:"yn",value:function(){return new e(-1)}}]),e}(),bh=function(){function e(t,n){we(this,e),this.referenceDelegate=t,this.M=n}return Se(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.pn(e).next((function(n){var r=new gh(n.highestTargetId);return n.highestTargetId=r.next(),t.In(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.pn(e).next((function(e){return su.fromTimestamp(new uu(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.pn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.pn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.In(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.Tn(e,t).next((function(){return n.pn(e).next((function(r){return r.targetCount+=1,n.En(t,r),n.In(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.Tn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return kh(e).delete(t.targetId)})).next((function(){return n.pn(e)})).next((function(t){return qo(t.targetCount>0),t.targetCount-=1,n.In(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return kh(e).Wt((function(o,u){var s=Lf(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return hf.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return kh(e).Wt((function(e,n){var r=Lf(n);t(r)}))}},{key:"pn",value:function(e){return wh(e).get("targetGlobalKey").next((function(e){return qo(null!==e),e}))}},{key:"In",value:function(e,t){return wh(e).put("targetGlobalKey",t)}},{key:"Tn",value:function(e,t){return kh(e).put(Rf(this.M,t))}},{key:"En",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.pn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=hs(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return kh(e).Wt({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=Lf(n);ds(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=Ah(e);return t.forEach((function(t){var o=Fl(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),hf.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=Ah(e);return hf.forEach(t,(function(t){var a=Fl(t.path);return hf.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=Ah(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Ah(e),i=Gc();return r.Wt({range:n,jt:!0},(function(e,t,n){var r=Vl(e[1]),a=new Nu(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=Fl(t.path),r=IDBKeyRange.bound([n],[ou(n)],!1,!0),i=0;return Ah(e).Wt({index:"documentTargetsIndex",jt:!0,range:r},(function(e,t,n){var r=s(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"Et",value:function(e,t){return kh(e).get(t).next((function(e){return e?Lf(e):null}))}}]),e}();function kh(e){return Sf(e,"targets")}function wh(e){return Sf(e,"targetGlobal")}function Ah(e){return Sf(e,"targetDocuments")}function Sh(e){return xh.apply(this,arguments)}function xh(){return xh=Z(ee().mark((function e(t){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===Ko.FAILED_PRECONDITION&&t.message===lf){e.next=2;break}throw t;case 2:Fo("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),xh.apply(this,arguments)}function Eh(e,t){var n=s(e,2),r=n[0],i=n[1],a=s(t,2),o=a[0],u=a[1],c=iu(r,o);return 0===c?iu(i,u):c}var _h=function(){function e(t){we(this,e),this.An=t,this.buffer=new Fc(Eh),this.Rn=0}return Se(e,[{key:"Pn",value:function(){return++this.Rn}},{key:"bn",value:function(e){var t=[e,this.Pn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();Eh(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),Ih=function(){function e(t,n){we(this,e),this.garbageCollector=t,this.asyncQueue=n,this.Vn=!1,this.vn=null}return Se(e,[{key:"start",value:function(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}},{key:"stop",value:function(){this.vn&&(this.vn.cancel(),this.vn=null)}},{key:"started",get:function(){return null!==this.vn}},{key:"Sn",value:function(e){var t=this,n=this.Vn?3e5:6e4;Fo("LruGarbageCollector","Garbage collection scheduled in ".concat(n,"ms")),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,Z(ee().mark((function n(){return ee().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.vn=null,t.Vn=!0,n.prev=1,n.next=4,e.collectGarbage(t.garbageCollector);case 4:n.next=14;break;case 6:if(n.prev=6,n.t0=n.catch(1),!yf(n.t0)){n.next=12;break}Fo("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n.t0),n.next=14;break;case 12:return n.next=14,Sh(n.t0);case 14:return n.next=16,t.Sn(e);case 16:case"end":return n.stop()}}),n,null,[[1,6]])}))))}}]),e}(),Th=function(){function e(t,n){we(this,e),this.Dn=t,this.params=n}return Se(e,[{key:"calculateTargetCount",value:function(e,t){return this.Dn.Cn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return hf.resolve(tu.A);var r=new _h(t);return this.Dn.forEachTarget(e,(function(e){return r.bn(e.sequenceNumber)})).next((function(){return n.Dn.xn(e,(function(e){return r.bn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.Dn.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.Dn.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Fo("LruGarbageCollector","Garbage collection skipped; disabled"),hf.resolve(ch)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(Fo("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),ch):n.Nn(e,t)}))}},{key:"getCacheSize",value:function(e){return this.Dn.getCacheSize(e)}},{key:"Nn",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(Fo("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),Mo()<=ft.DEBUG&&Fo("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),hf.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),Ch=function(){function e(t,n){we(this,e),this.db=t,this.garbageCollector=function(e,t){return new Th(e,t)}(this,n)}return Se(e,[{key:"Cn",value:function(e){var t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"kn",value:function(e){var t=0;return this.xn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"xn",value:function(e,t){return this.Mn(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return Nh(e,n)}},{key:"removeReference",value:function(e,t,n){return Nh(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return Nh(e,t)}},{key:"On",value:function(e,t){return function(e,t){var n=!1;return yh(e).zt((function(r){return ph(e,r,t).next((function(e){return e&&(n=!0),hf.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Mn(e,(function(o,u){if(u<=t){var s=n.On(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,su.min()),Ah(e).delete([0,Fl(o.path)])}))}));i.push(s)}})).next((function(){return hf.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return Nh(e,t)}},{key:"Mn",value:function(e,t){var n,r=Ah(e),i=tu.A;return r.Wt({index:"documentTargetsIndex"},(function(e,r){var a=s(e,2),o=a[0],u=(a[1],r.path),c=r.sequenceNumber;0===o?(i!==tu.A&&t(new Nu(Vl(n)),i),i=c,n=u):i=tu.A})).next((function(){i!==tu.A&&t(new Nu(Vl(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function Nh(e,t){return Ah(e).put(function(e,t){return{targetId:0,path:Fl(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var Dh=function(){function e(){we(this,e),this.changes=new Oc((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return Se(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,es.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?hf.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),Ph=function(){function e(t){we(this,e),this.M=t}return Se(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return Rh(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return Rh(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],Nf(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.Fn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=es.newInvalidDocument(t);return Rh(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Mh(t))},(function(e,i){r=n.$n(t,i)})).next((function(){return r}))}},{key:"Bn",value:function(e,t){var n=this,r={size:0,document:es.newInvalidDocument(t)};return Rh(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Mh(t))},(function(e,i){r={document:n.$n(t,i),size:hh(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=Bc();return this.Ln(e,t,(function(e,t){var i=n.$n(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"Un",value:function(e,t){var n=this,r=Bc(),i=new Lc(Nu.comparator);return this.Ln(e,t,(function(e,t){var a=n.$n(e,t);r=r.insert(e,a),i=i.insert(e,hh(t))})).next((function(){return{documents:r,qn:i}}))}},{key:"Ln",value:function(e,t,n){if(t.isEmpty())return hf.resolve();var r=new Fc(jh);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(Mh(r.first()),Mh(r.last())),a=r.getIterator(),o=a.getNext();return Rh(e).Wt({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=Nu.fromSegments([].concat(ot(t.prefixPath),[t.collectionGroup,t.documentId]));o&&jh(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.Ut(Mh(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getAllFromCollection",value:function(e,t,n){var r=this,i=[t.popLast().toArray(),t.lastSegment(),Nf(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Rh(e).qt(IDBKeyRange.bound(i,a,!0)).next((function(e){var t,n=Bc(),i=xe(e);try{for(i.s();!(t=i.n()).done;){var a=t.value,o=r.$n(Nu.fromSegments(a.prefixPath.concat(a.collectionGroup,a.documentId)),a);n=n.insert(o.key,o)}}catch(u){i.e(u)}finally{i.f()}return n}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=Bc(),o=Fh(t,n),u=Fh(t,ss.max());return Rh(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(function(e,t,n){var o=i.$n(Nu.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new Oh(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return Lh(e).get("remoteDocumentGlobalKey").next((function(e){return qo(!!e),e}))}},{key:"Fn",value:function(e,t){return Lh(e).put("remoteDocumentGlobalKey",t)}},{key:"$n",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=wl(e.Jt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=Nu.fromSegments(t.noDocument.path),i=Pf(t.noDocument.readTime);n=es.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return Bo();var a=Nu.fromSegments(t.unknownDocument.path),o=Pf(t.unknownDocument.version);n=es.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new uu(e[0],e[1]);return su.fromTimestamp(t)}(t.readTime)),n}(this.M,t);if(!n.isNoDocument()||!n.version.isEqual(su.min()))return n}return es.newInvalidDocument(e)}}]),e}(),Oh=function(e){Ie(n,e);var t=Pe(n);function n(e,r){var i;return we(this,n),(i=t.call(this)).Kn=e,i.trackRemovals=r,i.Gn=new Oc((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return Se(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new Fc((function(e,t){return iu(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.Gn.get(a);if(n.push(t.Kn.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=Cf(t.Kn.M,o);i=i.add(a.path.popLast());var c=hh(s);r+=c-u.size,n.push(t.Kn.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var l=Cf(t.Kn.M,o.convertToNoDocument(su.min()));n.push(t.Kn.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.Kn.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.Kn.updateMetadata(e,r)),hf.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.Kn.Bn(e,t).next((function(e){return n.Gn.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.Kn.Un(e,t).next((function(e){var t=e.documents;return e.qn.forEach((function(e,r){n.Gn.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(Dh);function Lh(e){return Sf(e,"remoteDocumentGlobal")}function Rh(e){return Sf(e,"remoteDocumentsV14")}function Mh(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Fh(e,t){var n=t.documentKey.path.toArray();return[e,Nf(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function jh(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=iu(n[a],r[a]))return i;return(i=iu(n.length,r.length))||((i=iu(n[n.length-2],r[r.length-2]))||iu(n[n.length-1],r[r.length-1]))}var Uh=function(){function e(t){we(this,e),this.M=t}return Se(e,[{key:"kt",value:function(e,t,n,r){var i=this,a=new df("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Bl,{unique:!0}),e.createObjectStore("documentMutations")}(e),Vh(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=hf.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),Vh(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:su.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").qt().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Bl,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return hf.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Qn(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.jn(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.Wn(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.zn(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.Hn(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:nf});t.createIndex("collectionPathOverlayIndex",rf,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",af,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:Wl});t.createIndex("documentKeyIndex",Hl),t.createIndex("collectionGroupIndex",Gl)}(e)})).next((function(){return i.Jn(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){!function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:Zl}).createIndex("sequenceNumberIndex",$l,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:ef}).createIndex("documentKeyIndex",tf,{unique:!1})}(e)}))),o}},{key:"jn",value:function(e){var t=0;return e.store("remoteDocuments").Wt((function(e,n){t+=hh(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Qn",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.qt().next((function(n){return hf.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",i).next((function(r){return hf.forEach(r,(function(r){qo(r.userId===n.userId);var i=Of(t.M,r);return fh(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"Wn",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.Wt((function(n,i){var a=new du(n),o=function(e){return[0,Fl(e)]}(a);r.push(t.get(o).next((function(n){return n?hf.resolve():function(n){return t.put({targetId:0,path:Fl(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return hf.waitFor(r)}))}))}},{key:"zn",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:Xl});var n=t.store("collectionParents"),r=new nh,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:Fl(i)})}};return t.store("remoteDocuments").Wt({jt:!0},(function(e,t){var n=new du(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").Wt({jt:!0},(function(e,t){var n=s(e,3),r=(n[0],n[1]),a=(n[2],Vl(r));return i(a.popLast())}))}))}},{key:"Hn",value:function(e){var t=this,n=e.store("targets");return n.Wt((function(e,r){var i=Lf(r),a=Rf(t.M,i);return n.put(a)}))}},{key:"Jn",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.Wt((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new Nu(du.fromString(i.document.name).popFirst(5)):i.noDocument?Nu.fromSegments(i.noDocument.path):i.unknownDocument?Nu.fromSegments(i.unknownDocument.path):Bo()).path.toArray(),u={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(u))})).next((function(){return hf.waitFor(r)}))}}]),e}();function Vh(e){e.createObjectStore("targetDocuments",{keyPath:Jl}).createIndex("documentTargetsIndex",Yl,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Ql,{unique:!0}),e.createObjectStore("targetGlobal")}var Bh="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",qh=function(){function e(t,n,r,i,a,o,u,s,c,l){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:13;if(we(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Yn=a,this.window=o,this.document=u,this.Xn=c,this.Zn=l,this.ts=f,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=function(e){return Promise.resolve()},!e.vt())throw new Wo(Ko.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Ch(this,i),this.hs=n+"main",this.M=new Tf(s),this.ls=new pf(this.hs,this.ts,new Uh(this.M)),this.fs=new bh(this.referenceDelegate,this.M),this.ds=function(e){return new Ph(e)}(this.M),this._s=new Uf,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===l&&jo("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return Se(e,[{key:"start",value:function(){var e=this;return this.gs().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new Wo(Ko.FAILED_PRECONDITION,Bh);return e.ys(),e.ps(),e.Is(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.fs.getHighestSequenceNumber(t)}))})).then((function(t){e.es=new tu(t,e.Xn)})).then((function(){e.ns=!0})).catch((function(t){return e.ls&&e.ls.close(),Promise.reject(t)}))}},{key:"Ts",value:function(e){var t=this;return this.cs=function(){var n=Z(ee().mark((function n(r){return ee().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.ls.Ot(function(){var t=Z(ee().mark((function t(n){return ee().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget(Z(ee().mark((function e(){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.gs();case 4:case"end":return e.stop()}}),e)})))))}},{key:"gs",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return Kh(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.Es(t).next((function(t){t||(e.isPrimary=!1,e.Yn.enqueueRetryable((function(){return e.cs(!1)})))}))})).next((function(){return e.As(t)})).next((function(n){return e.isPrimary&&!n?e.Rs(t).next((function(){return!1})):!!n&&e.Ps(t).next((function(){return!0}))}))})).catch((function(t){if(yf(t))return Fo("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return Fo("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Yn.enqueueRetryable((function(){return e.cs(t)})),e.isPrimary=t}))}},{key:"Es",value:function(e){var t=this;return zh(e).get("owner").next((function(e){return hf.resolve(t.bs(e))}))}},{key:"Vs",value:function(e){return Kh(e).delete(this.clientId)}},{key:"vs",value:function(){var e=Z(ee().mark((function e(){var t,n,r,i,a=this;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.Ss(this.us,18e5)){e.next=6;break}return this.us=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=Sf(e,"clientMetadata");return t.qt().next((function(e){var n=a.Ds(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return hf.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.ws){n=xe(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.ws.removeItem(this.Cs(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Is",value:function(){var e=this;this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.gs().then((function(){return e.vs()})).then((function(){return e.Is()}))}))}},{key:"bs",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"As",value:function(e){var t=this;return this.Zn?hf.resolve(!0):zh(e).get("owner").next((function(n){if(null!==n&&t.Ss(n.leaseTimestampMs,5e3)&&!t.xs(n.ownerId)){if(t.bs(n)&&t.networkEnabled)return!0;if(!t.bs(n)){if(!n.allowTabSynchronization)throw new Wo(Ko.FAILED_PRECONDITION,Bh);return!1}}return!(!t.networkEnabled||!t.inForeground)||Kh(e).qt().next((function(e){return void 0===t.Ds(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&Fo("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=Z(ee().mark((function e(){var t=this;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.ns=!1,this.Ns(),this.os&&(this.os.cancel(),this.os=null),this.ks(),this.Ms(),e.next=7,this.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new Af(e,tu.A);return t.Rs(n).next((function(){return t.Vs(n)}))}));case 7:this.ls.close(),this.Os();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ds",value:function(e,t){var n=this;return e.filter((function(e){return n.Ss(e.updateTimeMs,t)&&!n.xs(e.clientId)}))}},{key:"Fs",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return Kh(t).qt().next((function(t){return e.Ds(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.ns}},{key:"getMutationQueue",value:function(e,t){return dh.Yt(e,this.M,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.fs}},{key:"getRemoteDocumentCache",value:function(){return this.ds}},{key:"getIndexManager",value:function(e){return new ih(e,this.M.Jt.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return qf.Yt(this.M,e)}},{key:"getBundleCache",value:function(){return this._s}},{key:"runTransaction",value:function(e,t,n){var r=this;Fo("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",u=14===(i=this.ts)?cf:13===i?sf:12===i?uf:11===i?of:void Bo();return this.ls.runTransaction(e,o,u,(function(i){return a=new Af(i,r.es?r.es.next():tu.A),"readwrite-primary"===t?r.Es(a).next((function(e){return!!e||r.As(a)})).next((function(t){if(!t)throw jo("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.Yn.enqueueRetryable((function(){return r.cs(!1)})),new Wo(Ko.FAILED_PRECONDITION,lf);return n(a)})).next((function(e){return r.Ps(a).next((function(){return e}))})):r.$s(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"$s",value:function(e){var t=this;return zh(e).get("owner").next((function(e){if(null!==e&&t.Ss(e.leaseTimestampMs,5e3)&&!t.xs(e.ownerId)&&!t.bs(e)&&!(t.Zn||t.allowTabSynchronization&&e.allowTabSynchronization))throw new Wo(Ko.FAILED_PRECONDITION,Bh)}))}},{key:"Ps",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return zh(e).put("owner",t)}},{key:"Rs",value:function(e){var t=this,n=zh(e);return n.get("owner").next((function(e){return t.bs(e)?(Fo("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):hf.resolve()}))}},{key:"Ss",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(jo("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"ys",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=function(){e.Yn.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.gs()}))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}},{key:"ks",value:function(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}},{key:"ps",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=function(){t.Ns(),qe()&&navigator.appVersion.match(/Version\/1[45]/)&&t.Yn.enterRestrictedMode(!0),t.Yn.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.ss))}},{key:"Ms",value:function(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}},{key:"xs",value:function(e){var t;try{var n=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return Fo("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return jo("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Ns",value:function(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(Pn){jo("Failed to set zombie client id.",Pn)}}},{key:"Os",value:function(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(Pn){}}},{key:"Cs",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"vt",value:function(){return pf.vt()}}]),e}();function zh(e){return Sf(e,"owner")}function Kh(e){return Sf(e,"clientMetadata")}function Wh(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var Hh=function(){function e(t,n,r){we(this,e),this.ds=t,this.Bs=n,this.indexManager=r}return Se(e,[{key:"Ls",value:function(e,t){var n=this;return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next((function(r){return n.Us(e,t,r)}))}},{key:"Us",value:function(e,t,n){return this.ds.getEntry(e,t).next((function(e){var t,r=xe(n);try{for(r.s();!(t=r.n()).done;){t.value.applyToLocalView(e)}}catch(i){r.e(i)}finally{r.f()}return e}))}},{key:"qs",value:function(e,t){e.forEach((function(e,n){var r,i=xe(t);try{for(i.s();!(r=i.n()).done;){r.value.applyToLocalView(n)}}catch(a){i.e(a)}finally{i.f()}}))}},{key:"Ks",value:function(e,t){var n=this;return this.ds.getEntries(e,t).next((function(t){return n.Gs(e,t).next((function(){return t}))}))}},{key:"Gs",value:function(e,t){var n=this;return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){return n.qs(t,e)}))}},{key:"Qs",value:function(e,t,n){return function(e){return Nu.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.js(e,t.path):Us(t)?this.Ws(e,t,n):this.zs(e,t,n)}},{key:"js",value:function(e,t){return this.Ls(e,new Nu(t)).next((function(e){var t=zc();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"Ws",value:function(e,t,n){var r=this,i=t.collectionGroup,a=zc();return this.indexManager.getCollectionParents(e,i).next((function(o){return hf.forEach(o,(function(o){var u=function(e,t){return new Ps(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.zs(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"zs",value:function(e,t,n){var r,i=this;return this.ds.getAllFromCollection(e,t.path,n).next((function(n){return r=n,i.Bs.getAllMutationBatchesAffectingQuery(e,t)})).next((function(e){var t,n=xe(e);try{for(n.s();!(t=n.n()).done;){var i,a=t.value,o=xe(a.mutations);try{for(o.s();!(i=o.n()).done;){var u=i.value,s=u.key,c=r.get(s);null==c&&(c=es.newInvalidDocument(s),r=r.insert(s,c)),yc(u,c,a.localWriteTime),c.isFoundDocument()||(r=r.remove(s))}}catch(l){o.e(l)}finally{o.f()}}}catch(l){n.e(l)}finally{n.f()}})).next((function(){return r.forEach((function(e,n){Hs(t,n)||(r=r.remove(e))})),r}))}}]),e}(),Gh=function(){function e(t,n,r,i){we(this,e),this.targetId=t,this.fromCache=n,this.Hs=r,this.Js=i}return Se(e,null,[{key:"Ys",value:function(t,n){var r,i=Gc(),a=Gc(),o=xe(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),Qh=function(){function e(){we(this,e)}return Se(e,[{key:"Xs",value:function(e){this.Zs=e}},{key:"Qs",value:function(e,t,n,r){var i=this;return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||n.isEqual(su.min())?this.ti(e,t):this.Zs.Ks(e,r).next((function(a){var o=i.ei(t,a);return(Rs(t)||Ms(t))&&i.ni(t.limitType,o,r,n)?i.ti(e,t):(Mo()<=ft.DEBUG&&Fo("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Ws(t)),i.Zs.Qs(e,t,os(n,-1)).next((function(e){return o.forEach((function(t){e=e.insert(t.key,t)})),e})))}))}},{key:"ei",value:function(e,t){var n=new Fc(Qs(e));return t.forEach((function(t,r){Hs(e,r)&&(n=n.add(r))})),n}},{key:"ni",value:function(e,t,n,r){if(n.size!==t.size)return!0;var i="F"===e?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"ti",value:function(e,t){return Mo()<=ft.DEBUG&&Fo("QueryEngine","Using full collection scan to execute query:",Ws(t)),this.Zs.Qs(e,t,ss.min())}}]),e}(),Jh=function(){function e(t,n,r,i){we(this,e),this.persistence=t,this.si=n,this.M=i,this.ii=new Lc(iu),this.ri=new Oc((function(e){return hs(e)}),ds),this.oi=new Map,this.ui=t.getRemoteDocumentCache(),this.fs=t.getTargetCache(),this._s=t.getBundleCache(),this.ai(r)}return Se(e,[{key:"ai",value:function(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.ci=new Hh(this.ui,this.Bs,this.indexManager),this.ui.setIndexManager(this.indexManager),this.si.Xs(this.ci)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.ii)}))}}]),e}();function Yh(e,t,n,r){return new Jh(e,t,n,r)}function Xh(e,t){return Zh.apply(this,arguments)}function Zh(){return Zh=Z(ee().mark((function e(t,n){var r;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=zo(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.Bs.getAllMutationBatches(e).next((function(i){return t=i,r.ai(n),r.Bs.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=Gc(),s=xe(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,f=xe(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;u=u.add(h.key)}}catch(b){f.e(b)}finally{f.f()}}}catch(b){s.e(b)}finally{s.f()}var d,p=xe(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var m,y=xe(v.mutations);try{for(y.s();!(m=y.n()).done;){var g=m.value;u=u.add(g.key)}}catch(b){y.e(b)}finally{y.f()}}}catch(b){p.e(b)}finally{p.f()}return r.ci.Ks(e,u).next((function(e){return{hi:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),Zh.apply(this,arguments)}function $h(e,t){var n=zo(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.ui.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=hf.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);qo(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.Bs.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.Bs.performConsistencyCheck(e)})).next((function(){return n.ci.Ks(e,r)}))}))}function ed(e){var t=zo(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.fs.getLastRemoteSnapshotVersion(e)}))}function td(e,t){var n=zo(e),r=t.snapshotVersion,i=n.ii;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.ui.newChangeBuffer({trackRemovals:!0});i=n.ii;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.fs.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.fs.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(u)?c=c.withResumeToken(yu.EMPTY_BYTE_STRING,su.min()).withLastLimboFreeSnapshotVersion(su.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.fs.updateTargetData(e,c))}}));var u=Bc();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(nd(e,a,t.documentUpdates).next((function(e){u=e}))),!r.isEqual(su.min())){var s=n.fs.getLastRemoteSnapshotVersion(e).next((function(t){return n.fs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(s)}return hf.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.ci.Gs(e,u)})).next((function(){return u}))})).then((function(e){return n.ii=i,e}))}function nd(e,t,n){var r=Gc();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=Bc();return n.forEach((function(n,i){var a=e.get(n);i.isNoDocument()&&i.version.isEqual(su.min())?(t.removeEntry(n,i.readTime),r=r.insert(n,i)):!a.isValidDocument()||i.version.compareTo(a.version)>0||0===i.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(i),r=r.insert(n,i)):Fo("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",i.version)})),r}))}function rd(e,t){var n=zo(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.Bs.getNextMutationBatchAfterBatchId(e,t)}))}function id(e,t){var n=zo(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.fs.getTargetData(e,t).next((function(i){return i?(r=i,hf.resolve(r)):n.fs.allocateTargetId(e).next((function(i){return r=new If(t,i,0,e.currentSequenceNumber),n.fs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.ii.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ii=n.ii.insert(e.targetId,e),n.ri.set(t,e.targetId)),e}))}function ad(e,t,n){return od.apply(this,arguments)}function od(){return od=Z(ee().mark((function e(t,n,r){var i,a,o;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=zo(t),a=i.ii.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),yf(e.t1)){e.next=12;break}throw e.t1;case 12:Fo("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.ii=i.ii.remove(n),i.ri.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),od.apply(this,arguments)}function ud(e,t,n){var r=zo(e),i=su.min(),a=Gc();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=zo(e),i=r.ri.get(n);return void 0!==i?hf.resolve(r.ii.get(i)):r.fs.getTargetData(t,n)}(r,e,Bs(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.si.Qs(e,t,n?i:su.min(),n?a:Gc())})).next((function(e){return ld(r,Gs(t),e),{documents:e,li:a}}))}))}function sd(e,t){var n=zo(e),r=zo(n.fs),i=n.ii.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.Et(e,t).next((function(e){return e?e.target:null}))}))}function cd(e,t){var n=zo(e),r=n.oi.get(t)||su.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.ui.getAllFromCollectionGroup(e,t,os(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return ld(n,t,e),e}))}function ld(e,t,n){var r=su.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.oi.set(t,r)}function fd(e,t,n,r){return hd.apply(this,arguments)}function hd(){return hd=Z(ee().mark((function e(t,n,r,i){var a,o,u,s,c,l,f,h,d,p;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=zo(t),o=Gc(),u=Bc(),s=xe(r);try{for(s.s();!(c=s.n()).done;)l=c.value,f=n.fi(l.metadata.name),l.document&&(o=o.add(f)),(h=n.di(l)).setReadTime(n._i(l.metadata.readTime)),u=u.insert(f,h)}catch(v){s.e(v)}finally{s.f()}return d=a.ui.newChangeBuffer({trackRemovals:!0}),e.next=7,id(a,function(e){return Bs(Ls(du.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return nd(e,d,u).next((function(t){return d.apply(e),t})).next((function(t){return a.fs.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.fs.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.ci.Gs(e,t)})).next((function(){return t}))}))})));case 9:case"end":return e.stop()}}),e)}))),hd.apply(this,arguments)}function dd(e,t){return pd.apply(this,arguments)}function pd(){return pd=Z(ee().mark((function e(t,n){var r,i,a,o=arguments;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:Gc(),e.next=3,id(t,Bs(Mf(n.bundledQuery)));case 3:return i=e.sent,a=zo(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=fl(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a._s.saveNamedQuery(e,n);var o=i.withResumeToken(yu.EMPTY_BYTE_STRING,t);return a.ii=a.ii.insert(o.targetId,o),a.fs.updateTargetData(e,o).next((function(){return a.fs.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.fs.addMatchingKeys(e,r,i.targetId)})).next((function(){return a._s.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),pd.apply(this,arguments)}var vd=function(){function e(t){we(this,e),this.M=t,this.wi=new Map,this.mi=new Map}return Se(e,[{key:"getBundleMetadata",value:function(e,t){return hf.resolve(this.wi.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.wi.set(t.id,{id:(n=t).id,version:n.version,createTime:fl(n.createTime)}),hf.resolve()}},{key:"getNamedQuery",value:function(e,t){return hf.resolve(this.mi.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.mi.set(t.name,function(e){return{name:e.name,query:Mf(e.bundledQuery),readTime:fl(e.readTime)}}(t)),hf.resolve()}}]),e}(),md=function(){function e(){we(this,e),this.overlays=new Lc(Nu.comparator),this.gi=new Map}return Se(e,[{key:"getOverlay",value:function(e,t){return hf.resolve(this.overlays.get(t))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.Xt(e,t,i)})),hf.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.gi.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.gi.delete(n)),hf.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=Kc(),i=t.length+1,a=new Nu(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return hf.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new Lc((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=Kc(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=Kc(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return hf.resolve(s)}},{key:"Xt",value:function(e,t,n){if(null!==n){var r=this.overlays.get(n.key);if(null!==r){var i=this.gi.get(r.largestBatchId).delete(n.key);this.gi.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new _f(t,n));var a=this.gi.get(t);void 0===a&&(a=Gc(),this.gi.set(t,a)),this.gi.set(t,a.add(n.key))}}}]),e}(),yd=function(){function e(){we(this,e),this.yi=new Fc(gd.pi),this.Ii=new Fc(gd.Ti)}return Se(e,[{key:"isEmpty",value:function(){return this.yi.isEmpty()}},{key:"addReference",value:function(e,t){var n=new gd(e,t);this.yi=this.yi.add(n),this.Ii=this.Ii.add(n)}},{key:"Ei",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.Ai(new gd(e,t))}},{key:"Ri",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"Pi",value:function(e){var t=this,n=new Nu(new du([])),r=new gd(n,e),i=new gd(n,e+1),a=[];return this.Ii.forEachInRange([r,i],(function(e){t.Ai(e),a.push(e.key)})),a}},{key:"bi",value:function(){var e=this;this.yi.forEach((function(t){return e.Ai(t)}))}},{key:"Ai",value:function(e){this.yi=this.yi.delete(e),this.Ii=this.Ii.delete(e)}},{key:"Vi",value:function(e){var t=new Nu(new du([])),n=new gd(t,e),r=new gd(t,e+1),i=Gc();return this.Ii.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new gd(e,0),n=this.yi.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),gd=function(){function e(t,n){we(this,e),this.key=t,this.vi=n}return Se(e,null,[{key:"pi",value:function(e,t){return Nu.comparator(e.key,t.key)||iu(e.vi,t.vi)}},{key:"Ti",value:function(e,t){return iu(e.vi,t.vi)||Nu.comparator(e.key,t.key)}}]),e}(),bd=function(){function e(t,n){we(this,e),this.indexManager=t,this.referenceDelegate=n,this.Bs=[],this.Si=1,this.Di=new Fc(gd.pi)}return Se(e,[{key:"checkEmpty",value:function(e){return hf.resolve(0===this.Bs.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.Si;this.Si++,this.Bs.length>0&&this.Bs[this.Bs.length-1];var a=new xf(i,t,n,r);this.Bs.push(a);var o,u=xe(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.Di=this.Di.add(new gd(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return hf.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return hf.resolve(this.Ci(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.xi(n),i=r<0?0:r;return hf.resolve(this.Bs.length>i?this.Bs[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return hf.resolve(0===this.Bs.length?-1:this.Si-1)}},{key:"getAllMutationBatches",value:function(e){return hf.resolve(this.Bs.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new gd(t,0),i=new gd(t,Number.POSITIVE_INFINITY),a=[];return this.Di.forEachInRange([r,i],(function(e){var t=n.Ci(e.vi);a.push(t)})),hf.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Fc(iu);return t.forEach((function(e){var t=new gd(e,0),i=new gd(e,Number.POSITIVE_INFINITY);n.Di.forEachInRange([t,i],(function(e){r=r.add(e.vi)}))})),hf.resolve(this.Ni(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;Nu.isDocumentKey(i)||(i=i.child(""));var a=new gd(new Nu(i),0),o=new Fc(iu);return this.Di.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.vi)),!0)}),a),hf.resolve(this.Ni(o))}},{key:"Ni",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.Ci(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;qo(0===this.ki(t.batchId,"removed")),this.Bs.shift();var r=this.Di;return hf.forEach(t.mutations,(function(i){var a=new gd(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.Di=r}))}},{key:"_n",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new gd(t,0),r=this.Di.firstAfterOrEqual(n);return hf.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.Bs.length,hf.resolve()}},{key:"ki",value:function(e,t){return this.xi(e)}},{key:"xi",value:function(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}},{key:"Ci",value:function(e){var t=this.xi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}]),e}(),kd=function(){function e(t){we(this,e),this.Mi=t,this.docs=new Lc(Nu.comparator),this.size=0}return Se(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Mi(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return hf.resolve(n?n.document.mutableCopy():es.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=Bc();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():es.newInvalidDocument(e))})),hf.resolve(r)}},{key:"getAllFromCollection",value:function(e,t,n){for(var r=Bc(),i=new Nu(t.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),u=o.key,s=o.value.document;if(!t.isPrefixOf(u.path))break;u.path.length>t.length+1||cs(us(s),n)<=0||(r=r.insert(s.key,s.mutableCopy()))}return hf.resolve(r)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){Bo()}},{key:"Oi",value:function(e,t){return hf.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new wd(this)}},{key:"getSize",value:function(e){return hf.resolve(this.size)}}]),e}(),wd=function(e){Ie(n,e);var t=Pe(n);function n(e){var r;return we(this,n),(r=t.call(this)).Kn=e,r}return Se(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.Kn.addEntry(e,i)):t.Kn.removeEntry(r)})),hf.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.Kn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.Kn.getEntries(e,t)}}]),n}(Dh),Ad=function(){function e(t){we(this,e),this.persistence=t,this.Fi=new Oc((function(e){return hs(e)}),ds),this.lastRemoteSnapshotVersion=su.min(),this.highestTargetId=0,this.$i=0,this.Bi=new yd,this.targetCount=0,this.Li=gh.gn()}return Se(e,[{key:"forEachTarget",value:function(e,t){return this.Fi.forEach((function(e,n){return t(n)})),hf.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return hf.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return hf.resolve(this.$i)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Li.next(),hf.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.$i&&(this.$i=t),hf.resolve()}},{key:"Tn",value:function(e){this.Fi.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Li=new gh(t),this.highestTargetId=t),e.sequenceNumber>this.$i&&(this.$i=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Tn(t),this.targetCount+=1,hf.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Tn(t),hf.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Fi.delete(t.target),this.Bi.Pi(t.targetId),this.targetCount-=1,hf.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Fi.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.Fi.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),hf.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return hf.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Fi.get(t)||null;return hf.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.Bi.Ei(t,n),hf.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.Bi.Ri(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),hf.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.Bi.Pi(t),hf.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.Bi.Vi(t);return hf.resolve(n)}},{key:"containsKey",value:function(e,t){return hf.resolve(this.Bi.containsKey(t))}}]),e}(),Sd=function(){function e(t,n){var r=this;we(this,e),this.Ui={},this.overlays={},this.es=new tu(0),this.ns=!1,this.ns=!0,this.referenceDelegate=t(this),this.fs=new Ad(this),this.indexManager=new th,this.ds=new kd((function(e){return r.referenceDelegate.qi(e)})),this.M=new Tf(n),this._s=new vd(this.M)}return Se(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.ns=!1,Promise.resolve()}},{key:"started",get:function(){return this.ns}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new md,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Ui[e.toKey()];return n||(n=new bd(t,this.referenceDelegate),this.Ui[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.fs}},{key:"getRemoteDocumentCache",value:function(){return this.ds}},{key:"getBundleCache",value:function(){return this._s}},{key:"runTransaction",value:function(e,t,n){var r=this;Fo("MemoryPersistence","Starting transaction:",e);var i=new xd(this.es.next());return this.referenceDelegate.Ki(),n(i).next((function(e){return r.referenceDelegate.Gi(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Qi",value:function(e,t){return hf.or(Object.values(this.Ui).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),xd=function(e){Ie(n,e);var t=Pe(n);function n(e){var r;return we(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return Se(n)}(ff),Ed=function(){function e(t){we(this,e),this.persistence=t,this.ji=new yd,this.Wi=null}return Se(e,[{key:"Hi",get:function(){if(this.Wi)return this.Wi;throw Bo()}},{key:"addReference",value:function(e,t,n){return this.ji.addReference(n,t),this.Hi.delete(n.toString()),hf.resolve()}},{key:"removeReference",value:function(e,t,n){return this.ji.removeReference(n,t),this.Hi.add(n.toString()),hf.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Hi.add(t.toString()),hf.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.ji.Pi(t.targetId).forEach((function(e){return n.Hi.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Hi.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Ki",value:function(){this.Wi=new Set}},{key:"Gi",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return hf.forEach(this.Hi,(function(r){var i=Nu.fromPath(r);return t.Ji(e,i).next((function(e){e||n.removeEntry(i,su.min())}))})).next((function(){return t.Wi=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Ji(e,t).next((function(e){e?n.Hi.delete(t.toString()):n.Hi.add(t.toString())}))}},{key:"qi",value:function(e){return 0}},{key:"Ji",value:function(e,t){var n=this;return hf.or([function(){return hf.resolve(n.ji.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Qi(e,t)}])}}],[{key:"zi",value:function(t){return new e(t)}}]),e}();function _d(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function Id(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function Td(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var Cd=function(){function e(t,n,r,i){we(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return Se(e,[{key:"Xi",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Yi",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new Wo(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(jo("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),Nd=function(){function e(t,n,r){we(this,e),this.targetId=t,this.state=n,this.error=r}return Se(e,[{key:"Xi",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Yi",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Wo(i.error.code,i.error.message))),a?new e(t,i.state,r):(jo("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),Dd=function(){function e(t,n){we(this,e),this.clientId=t,this.activeTargetIds=n}return Se(e,null,[{key:"Yi",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=Jc(),o=0;i&&o<r.activeTargetIds.length;++o)i=Cu(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(jo("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),Pd=function(){function e(t,n){we(this,e),this.clientId=t,this.onlineState=n}return Se(e,null,[{key:"Yi",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(jo("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),Od=function(){function e(){we(this,e),this.activeTargetIds=Jc()}return Se(e,[{key:"Zi",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"tr",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"Xi",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),Ld=function(){function e(t,n,r,i,a){we(this,e),this.window=t,this.Yn=n,this.persistenceKey=r,this.er=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.nr=this.sr.bind(this),this.ir=new Lc(iu),this.started=!1,this.rr=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.ur=_d(this.persistenceKey,this.er),this.ar=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ir=this.ir.insert(this.er,new Od),this.cr=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.hr=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.lr=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.dr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this._r=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.nr)}return Se(e,[{key:"start",value:function(){var e=Z(ee().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f,h=this;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.Fs();case 2:t=e.sent,n=xe(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.er){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(_d(this.persistenceKey,i)))&&(o=Dd.Yi(i,a))&&(this.ir=this.ir.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.wr(),(u=this.storage.getItem(this.dr))&&(s=this.mr(u))&&this.gr(s),c=xe(this.rr);try{for(c.s();!(l=c.n()).done;)f=l.value,this.sr(f)}catch(d){c.e(d)}finally{c.f()}this.rr=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.ar,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.yr(this.ir)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.ir.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.pr(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.pr(e,t,n),this.Ir(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(Td(this.persistenceKey,e));if(n){var r=Nd.Yi(e,n);r&&(t=r.state)}}return this.Tr.Zi(e),this.wr(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Tr.tr(e),this.wr()}},{key:"isLocalQueryTarget",value:function(e){return this.Tr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(Td(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.Er(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Ir(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Ar(e)}},{key:"notifyBundleLoaded",value:function(e){this.Rr(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.nr),this.removeItem(this.ur),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return Fo("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){Fo("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){Fo("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"sr",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(Fo("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ur)return void jo("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable(Z(ee().mark((function e(){var r,i,a,o,u,s,c;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.cr.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.Pr(n.key),e.abrupt("return",t.br(r,null));case 6:if(!(i=t.Vr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.br(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.hr.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.vr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.Sr(a));case 16:e.next=41;break;case 18:if(!t.lr.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.Dr(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Cr(o));case 23:e.next=41;break;case 25:if(n.key!==t.dr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.mr(n.newValue))){e.next=30;break}return e.abrupt("return",t.gr(u));case 30:e.next=41;break;case 32:if(n.key!==t.ar){e.next=37;break}s=function(e){var t=tu.A;if(null!=e)try{var n=JSON.parse(e);qo("number"==typeof n),t=n}catch(e){jo("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),s!==tu.A&&t.sequenceNumberHandler(s),e.next=41;break;case 37:if(n.key!==t._r){e.next=41;break}return c=t.Nr(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.kr(e)})));case 41:e.next=44;break;case 43:t.rr.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Tr",get:function(){return this.ir.get(this.er)}},{key:"wr",value:function(){this.setItem(this.ur,this.Tr.Xi())}},{key:"pr",value:function(e,t,n){var r=new Cd(this.currentUser,e,t,n),i=Id(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Xi())}},{key:"Ir",value:function(e){var t=Id(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Ar",value:function(e){var t={clientId:this.er,onlineState:e};this.storage.setItem(this.dr,JSON.stringify(t))}},{key:"Er",value:function(e,t,n){var r=Td(this.persistenceKey,e),i=new Nd(e,t,n);this.setItem(r,i.Xi())}},{key:"Rr",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this._r,t)}},{key:"Pr",value:function(e){var t=this.cr.exec(e);return t?t[1]:null}},{key:"Vr",value:function(e,t){var n=this.Pr(e);return Dd.Yi(n,t)}},{key:"vr",value:function(e,t){var n=this.hr.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Cd.Yi(new Oo(i),r,t)}},{key:"Dr",value:function(e,t){var n=this.lr.exec(e),r=Number(n[1]);return Nd.Yi(r,t)}},{key:"mr",value:function(e){return Pd.Yi(e)}},{key:"Nr",value:function(e){return JSON.parse(e)}},{key:"Sr",value:function(){var e=Z(ee().mark((function e(t){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.Mr(t.batchId,t.state,t.error));case 2:Fo("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Cr",value:function(e){return this.syncEngine.Or(e.targetId,e.state,e.error)}},{key:"br",value:function(e,t){var n=this,r=t?this.ir.insert(e,t):this.ir.remove(e),i=this.yr(this.ir),a=this.yr(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.Fr(o,u).then((function(){n.ir=r}))}},{key:"gr",value:function(e){this.ir.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"yr",value:function(e){var t=Jc();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"vt",value:function(e){return!(!e||!e.localStorage)}}]),e}(),Rd=function(){function e(){we(this,e),this.$r=new Od,this.Br={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return Se(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.$r.Zi(e),this.Br[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.Br[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.$r.tr(e)}},{key:"isLocalQueryTarget",value:function(e){return this.$r.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.Br[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.$r.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.$r.activeTargetIds.has(e)}},{key:"start",value:function(){return this.$r=new Od,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),Md=function(){function e(){we(this,e)}return Se(e,[{key:"Lr",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),Fd=function(){function e(){var t=this;we(this,e),this.Ur=function(){return t.qr()},this.Kr=function(){return t.Gr()},this.Qr=[],this.jr()}return Se(e,[{key:"Lr",value:function(e){this.Qr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Ur),window.removeEventListener("offline",this.Kr)}},{key:"jr",value:function(){window.addEventListener("online",this.Ur),window.addEventListener("offline",this.Kr)}},{key:"qr",value:function(){Fo("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=xe(this.Qr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"Gr",value:function(){Fo("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=xe(this.Qr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"vt",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),jd={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Ud=function(){function e(t){we(this,e),this.Wr=t.Wr,this.zr=t.zr}return Se(e,[{key:"Hr",value:function(e){this.Jr=e}},{key:"Yr",value:function(e){this.Xr=e}},{key:"onMessage",value:function(e){this.Zr=e}},{key:"close",value:function(){this.zr()}},{key:"send",value:function(e){this.Wr(e)}},{key:"eo",value:function(){this.Jr()}},{key:"no",value:function(e){this.Xr(e)}},{key:"so",value:function(e){this.Zr(e)}}]),e}(),Vd=function(e){Ie(n,e);var t=Pe(n);function n(e){var r;return we(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return Se(n,[{key:"co",value:function(e,t,n,r){return new Promise((function(i,a){var o=new Do;o.listenOnce(_o.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case Eo.NO_ERROR:var t=o.getResponseJson();Fo("Connection","XHR received:",JSON.stringify(t)),i(t);break;case Eo.TIMEOUT:Fo("Connection",'RPC "'+e+'" timed out'),a(new Wo(Ko.DEADLINE_EXCEEDED,"Request time out"));break;case Eo.HTTP_ERROR:var n=o.getStatus();if(Fo("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var u=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(Ko).indexOf(t)>=0?t:Ko.UNKNOWN}(r.status);a(new Wo(u,r.message))}else a(new Wo(Ko.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new Wo(Ko.UNAVAILABLE,"Connection failed."));break;default:Bo()}}finally{Fo("Connection",'RPC "'+e+'" completed.')}}));var u=JSON.stringify(r);o.send(t,"POST",u,n,15)}))}},{key:"lo",value:function(e,t,n){var r=[this.io,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=So(),a=xo(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new Co({})),this.ao(o.initMessageHeaders,t,n),"undefined"!==typeof window&&(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Be())||"object"===typeof navigator&&"ReactNative"===navigator.product||Be().indexOf("Electron/")>=0||function(){var e=Be();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()||Be().indexOf("MSAppHost/")>=0||function(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||(o.httpHeadersOverwriteParam="$httpHeaders");var u=r.join("");Fo("Connection","Creating WebChannel: "+u,o);var s=i.createWebChannel(u,o),c=!1,l=!1,f=new Ud({Wr:function(e){l?Fo("Connection","Not sending because WebChannel is closed:",e):(c||(Fo("Connection","Opening WebChannel transport."),s.open(),c=!0),Fo("Connection","WebChannel sending:",e),s.send(e))},zr:function(){return s.close()}}),h=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return h(s,No.EventType.OPEN,(function(){l||Fo("Connection","WebChannel transport opened.")})),h(s,No.EventType.CLOSE,(function(){l||(l=!0,Fo("Connection","WebChannel transport closed"),f.no())})),h(s,No.EventType.ERROR,(function(e){l||(l=!0,Uo("Connection","WebChannel transport errored:",e),f.no(new Wo(Ko.UNAVAILABLE,"The operation could not be completed")))})),h(s,No.EventType.MESSAGE,(function(e){var t;if(!l){var n=e.data[0];qo(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){Fo("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=_c[e];if(void 0!==t)return Pc(t)}(a),u=i.message;void 0===o&&(o=Ko.INTERNAL,u="Unknown error status: "+a+" with message "+i.message),l=!0,f.no(new Wo(o,u)),s.close()}else Fo("Connection","WebChannel received:",n),f.so(n)}})),h(a,Io.STAT_EVENT,(function(e){e.stat===To.PROXY?Fo("Connection","Detected buffering proxy"):e.stat===To.NOPROXY&&Fo("Connection","Detected no buffering proxy")})),setTimeout((function(){f.eo()}),0),f}}]),n}(function(){function e(t){we(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.io=n+"://"+t.host,this.ro="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return Se(e,[{key:"oo",value:function(e,t,n,r,i){var a=this.uo(e,t);Fo("RestConnection","Sending: ",a,n);var o={};return this.ao(o,r,i),this.co(e,a,o,n).then((function(e){return Fo("RestConnection","Received: ",e),e}),(function(t){throw Uo("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t}))}},{key:"ho",value:function(e,t,n,r,i){return this.oo(e,t,n,r,i)}},{key:"ao",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Lo,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"uo",value:function(e,t){var n=jd[e];return"".concat(this.io,"/v1/").concat(t,":").concat(n)}}]),e}());function Bd(){return"undefined"!=typeof window?window:null}function qd(){return"undefined"!=typeof document?document:null}function zd(e){return new ul(e,!0)}var Kd=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;we(this,e),this.Yn=t,this.timerId=n,this.fo=r,this._o=i,this.wo=a,this.mo=0,this.yo=null,this.po=Date.now(),this.reset()}return Se(e,[{key:"reset",value:function(){this.mo=0}},{key:"Io",value:function(){this.mo=this.wo}},{key:"To",value:function(e){var t=this;this.cancel();var n=Math.floor(this.mo+this.Eo()),r=Math.max(0,Date.now()-this.po),i=Math.max(0,n-r);i>0&&Fo("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.mo," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.yo=this.Yn.enqueueAfterDelay(this.timerId,i,(function(){return t.po=Date.now(),e()})),this.mo*=this._o,this.mo<this.fo&&(this.mo=this.fo),this.mo>this.wo&&(this.mo=this.wo)}},{key:"Ao",value:function(){null!==this.yo&&(this.yo.skipDelay(),this.yo=null)}},{key:"cancel",value:function(){null!==this.yo&&(this.yo.cancel(),this.yo=null)}},{key:"Eo",value:function(){return(Math.random()-.5)*this.mo}}]),e}(),Wd=function(){function e(t,n,r,i,a,o,u,s){we(this,e),this.Yn=t,this.Ro=r,this.Po=i,this.bo=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.Vo=0,this.vo=null,this.So=null,this.stream=null,this.Do=new Kd(t,n)}return Se(e,[{key:"Co",value:function(){return 1===this.state||5===this.state||this.xo()}},{key:"xo",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.No()}},{key:"stop",value:function(){var e=Z(ee().mark((function e(){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.Co(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ko",value:function(){this.state=0,this.Do.reset()}},{key:"Mo",value:function(){var e=this;this.xo()&&null===this.vo&&(this.vo=this.Yn.enqueueAfterDelay(this.Ro,6e4,(function(){return e.Oo()})))}},{key:"Fo",value:function(e){this.$o(),this.stream.send(e)}},{key:"Oo",value:function(){var e=Z(ee().mark((function e(){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.xo()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"$o",value:function(){this.vo&&(this.vo.cancel(),this.vo=null)}},{key:"Bo",value:function(){this.So&&(this.So.cancel(),this.So=null)}},{key:"close",value:function(){var e=Z(ee().mark((function e(t,n){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.$o(),this.Bo(),this.Do.cancel(),this.Vo++,4!==t?this.Do.reset():n&&n.code===Ko.RESOURCE_EXHAUSTED?(jo(n.toString()),jo("Using maximum backoff delay to prevent overloading the backend."),this.Do.Io()):n&&n.code===Ko.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Lo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Yr(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Lo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Uo(this.Vo),n=this.Vo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=s(t,2),i=r[0],a=r[1];e.Vo===n&&e.qo(i,a)}),(function(n){t((function(){var t=new Wo(Ko.UNKNOWN,"Fetching auth token failed: "+n.message);return e.Ko(t)}))}))}},{key:"qo",value:function(e,t){var n=this,r=this.Uo(this.Vo);this.stream=this.Go(e,t),this.stream.Hr((function(){r((function(){return n.state=2,n.So=n.Yn.enqueueAfterDelay(n.Po,1e4,(function(){return n.xo()&&(n.state=3),Promise.resolve()})),n.listener.Hr()}))})),this.stream.Yr((function(e){r((function(){return n.Ko(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"No",value:function(){var e=this;this.state=5,this.Do.To(Z(ee().mark((function t(){return ee().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"Ko",value:function(e){return Fo("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Uo",value:function(e){var t=this;return function(n){t.Yn.enqueueAndForget((function(){return t.Vo===e?n():(Fo("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),Hd=function(e){Ie(n,e);var t=Pe(n);function n(e,r,i,a,o,u){var s;return we(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).M=o,s}return Se(n,[{key:"Go",value:function(e,t){return this.bo.lo("Listen",e,t)}},{key:"onMessage",value:function(e){this.Do.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Bo()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.N?(qo(void 0===t||"string"==typeof t),yu.fromBase64String(t||"")):(qo(void 0===t||t instanceof Uint8Array),yu.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?Ko.UNKNOWN:Pc(e.code);return new Wo(t,e.message||"")}(o);n=new el(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=vl(e,s.document.name),l=fl(s.document.updateTime),f=new Zu({mapValue:{fields:s.document.fields}}),h=es.newFoundDocument(c,l,f),d=s.targetIds||[],p=s.removedTargetIds||[];n=new Zc(d,p,h.key,h)}else if("documentDelete"in t){t.documentDelete;var v=t.documentDelete;v.document;var m=vl(e,v.document),y=v.readTime?fl(v.readTime):su.min(),g=es.newNoDocument(m,y),b=v.removedTargetIds||[];n=new Zc([],b,g.key,g)}else if("documentRemove"in t){t.documentRemove;var k=t.documentRemove;k.document;var w=vl(e,k.document),A=k.removedTargetIds||[];n=new Zc([],A,w,null)}else{if(!("filter"in t))return Bo();t.filter;var S=t.filter;S.targetId;var x=S.count||0,E=new Nc(x),_=S.targetId;n=new $c(_,E)}return n}(this.M,e),n=function(e){if(!("targetChange"in e))return su.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?su.min():t.readTime?fl(t.readTime):su.min()}(e);return this.listener.Qo(t,n)}},{key:"jo",value:function(e){var t={};t.database=gl(this.M),t.addTarget=function(e,t){var n,r=t.target;return(n=ps(r)?{documents:El(e,r)}:{query:_l(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=cl(e,t.resumeToken):t.snapshotVersion.compareTo(su.min())>0&&(n.readTime=sl(e,t.snapshotVersion.toTimestamp())),n}(this.M,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Bo()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.M,e);n&&(t.labels=n),this.Fo(t)}},{key:"Wo",value:function(e){var t={};t.database=gl(this.M),t.removeTarget=e,this.Fo(t)}}]),n}(Wd),Gd=function(e){Ie(n,e);var t=Pe(n);function n(e,r,i,a,o,u){var s;return we(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).M=o,s.zo=!1,s}return Se(n,[{key:"Ho",get:function(){return this.zo}},{key:"start",value:function(){this.zo=!1,this.lastStreamToken=void 0,yn(Te(n.prototype),"start",this).call(this)}},{key:"Lo",value:function(){this.zo&&this.Jo([])}},{key:"Go",value:function(e,t){return this.bo.lo("Write",e,t)}},{key:"onMessage",value:function(e){if(qo(!!e.streamToken),this.lastStreamToken=e.streamToken,this.zo){this.Do.reset();var t=function(e,t){return e&&e.length>0?(qo(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?fl(e.updateTime):fl(t);return n.isEqual(su.min())&&(n=fl(t)),new hc(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=fl(e.commitTime);return this.listener.Yo(n,t)}return qo(!e.writeResults||0===e.writeResults.length),this.zo=!0,this.listener.Xo()}},{key:"Zo",value:function(){var e={};e.database=gl(this.M),this.Fo(e)}},{key:"Jo",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return Sl(t.M,e)}))};this.Fo(n)}}]),n}(Wd),Qd=function(e){Ie(n,e);var t=Pe(n);function n(e,r,i,a){var o;return we(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.bo=i,o.M=a,o.tu=!1,o}return Se(n,[{key:"eu",value:function(){if(this.tu)throw new Wo(Ko.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"oo",value:function(e,t,n){var r=this;return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=s(i,2),o=a[0],u=a[1];return r.bo.oo(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Ko.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new Wo(Ko.UNKNOWN,e.toString())}))}},{key:"ho",value:function(e,t,n){var r=this;return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=s(i,2),o=a[0],u=a[1];return r.bo.ho(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Ko.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new Wo(Ko.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.tu=!0}}]),n}(function(){return Se((function e(){we(this,e)}))}()),Jd=function(){function e(t,n){we(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.nu=0,this.su=null,this.iu=!0}return Se(e,[{key:"ru",value:function(){var e=this;0===this.nu&&(this.ou("Unknown"),this.su=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.su=null,e.uu("Backend didn't respond within 10 seconds."),e.ou("Offline"),Promise.resolve()})))}},{key:"au",value:function(e){"Online"===this.state?this.ou("Unknown"):(this.nu++,this.nu>=1&&(this.cu(),this.uu("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ou("Offline")))}},{key:"set",value:function(e){this.cu(),this.nu=0,"Online"===e&&(this.iu=!1),this.ou(e)}},{key:"ou",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"uu",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.iu?(jo(t),this.iu=!1):Fo("OnlineStateTracker",t)}},{key:"cu",value:function(){null!==this.su&&(this.su.cancel(),this.su=null)}}]),e}(),Yd=Se((function e(t,n,r,i,a){var o=this;we(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.hu=[],this.lu=new Map,this.fu=new Set,this.du=[],this._u=a,this._u.Lr((function(e){r.enqueueAndForget(Z(ee().mark((function e(){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=up(o),!e.t0){e.next=5;break}return Fo("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=Z(ee().mark((function e(t){var n;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=zo(t)).fu.add(4),e.next=4,$d(n);case 4:return n.wu.set("Unknown"),n.fu.delete(4),e.next=8,Xd(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.wu=new Jd(r,i)}));function Xd(e){return Zd.apply(this,arguments)}function Zd(){return Zd=Z(ee().mark((function e(t){var n,r,i;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!up(t)){e.next=18;break}n=xe(t.du),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),Zd.apply(this,arguments)}function $d(e){return ep.apply(this,arguments)}function ep(){return ep=Z(ee().mark((function e(t){var n,r,i;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=xe(t.du),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),ep.apply(this,arguments)}function tp(e,t){var n=zo(e);n.lu.has(t.targetId)||(n.lu.set(t.targetId,t),op(n)?ap(n):Mp(n).xo()&&rp(n,t))}function np(e,t){var n=zo(e),r=Mp(n);n.lu.delete(t),r.xo()&&ip(n,t),0===n.lu.size&&(r.xo()?r.Mo():up(n)&&n.wu.set("Unknown"))}function rp(e,t){e.mu.Z(t.targetId),Mp(e).jo(t)}function ip(e,t){e.mu.Z(t),Mp(e).Wo(t)}function ap(e){e.mu=new nl({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},Et:function(t){return e.lu.get(t)||null}}),Mp(e).start(),e.wu.ru()}function op(e){return up(e)&&!Mp(e).Co()&&e.lu.size>0}function up(e){return 0===zo(e).fu.size}function sp(e){e.mu=void 0}function cp(e){return lp.apply(this,arguments)}function lp(){return lp=Z(ee().mark((function e(t){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.lu.forEach((function(e,n){rp(t,e)}));case 1:case"end":return e.stop()}}),e)}))),lp.apply(this,arguments)}function fp(e,t){return hp.apply(this,arguments)}function hp(){return hp=Z(ee().mark((function e(t,n){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:sp(t),op(t)?(t.wu.au(n),ap(t)):t.wu.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),hp.apply(this,arguments)}function dp(e,t,n){return pp.apply(this,arguments)}function pp(){return pp=Z(ee().mark((function e(t,n,r){var i;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.wu.set("Online"),!(n instanceof el&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=Z(ee().mark((function e(t,n){var r,i,a,o;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=xe(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.lu.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.lu.delete(o),t.mu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),Fo("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,vp(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof Zc?t.mu.ut(n):n instanceof $c?t.mu._t(n):t.mu.ht(n),r.isEqual(su.min())){e.next=29;break}return e.prev=14,e.next=17,ed(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.mu.yt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.lu.get(r);i&&e.lu.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.lu.get(t);if(n){e.lu.set(t,n.withResumeToken(yu.EMPTY_BYTE_STRING,n.snapshotVersion)),ip(e,t);var r=new If(n.target,t,1,n.sequenceNumber);rp(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),Fo("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,vp(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),pp.apply(this,arguments)}function vp(e,t,n){return mp.apply(this,arguments)}function mp(){return mp=Z(ee().mark((function e(t,n,r){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(yf(n)){e.next=2;break}throw n;case 2:return t.fu.add(1),e.next=5,$d(t);case 5:t.wu.set("Offline"),r||(r=function(){return ed(t.localStore)}),t.asyncQueue.enqueueRetryable(Z(ee().mark((function e(){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Fo("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.fu.delete(1),e.next=6,Xd(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),mp.apply(this,arguments)}function yp(e,t){return t().catch((function(n){return vp(e,n,t)}))}function gp(e){return bp.apply(this,arguments)}function bp(){return bp=Z(ee().mark((function e(t){var n,r,i,a;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=zo(t),r=Fp(n),i=n.hu.length>0?n.hu[n.hu.length-1].batchId:-1;case 2:if(!kp(n)){e.next=19;break}return e.prev=3,e.next=6,rd(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.hu.length&&r.Mo(),e.abrupt("break",19);case 10:i=a.batchId,wp(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,vp(n,e.t0);case 17:e.next=2;break;case 19:Ap(n)&&Sp(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),bp.apply(this,arguments)}function kp(e){return up(e)&&e.hu.length<10}function wp(e,t){e.hu.push(t);var n=Fp(e);n.xo()&&n.Ho&&n.Jo(t.mutations)}function Ap(e){return up(e)&&!Fp(e).Co()&&e.hu.length>0}function Sp(e){Fp(e).start()}function xp(e){return Ep.apply(this,arguments)}function Ep(){return Ep=Z(ee().mark((function e(t){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Fp(t).Zo();case 1:case"end":return e.stop()}}),e)}))),Ep.apply(this,arguments)}function _p(e){return Ip.apply(this,arguments)}function Ip(){return Ip=Z(ee().mark((function e(t){var n,r,i,a;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Fp(t),r=xe(t.hu);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Jo(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),Ip.apply(this,arguments)}function Tp(e,t,n){return Cp.apply(this,arguments)}function Cp(){return Cp=Z(ee().mark((function e(t,n,r){var i,a;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.hu.shift(),a=Ef.from(i,n,r),e.next=3,yp(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,gp(t);case 5:case"end":return e.stop()}}),e)}))),Cp.apply(this,arguments)}function Np(e,t){return Dp.apply(this,arguments)}function Dp(){return Dp=Z(ee().mark((function e(t,n){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&Fp(t).Ho,!e.t0){e.next=4;break}return e.next=4,function(){var e=Z(ee().mark((function e(t,n){var r,i;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Dc(i=n.code)||i===Ko.ABORTED){e.next=7;break}return r=t.hu.shift(),Fp(t).ko(),e.next=5,yp(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,gp(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:Ap(t)&&Sp(t);case 5:case"end":return e.stop()}}),e)}))),Dp.apply(this,arguments)}function Pp(e,t){return Op.apply(this,arguments)}function Op(){return Op=Z(ee().mark((function e(t,n){var r,i;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=zo(t)).asyncQueue.verifyOperationInProgress(),Fo("RemoteStore","RemoteStore received new credentials"),i=up(r),r.fu.add(3),e.next=6,$d(r);case 6:return i&&r.wu.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.fu.delete(3),e.next=12,Xd(r);case 12:case"end":return e.stop()}}),e)}))),Op.apply(this,arguments)}function Lp(e,t){return Rp.apply(this,arguments)}function Rp(){return Rp=Z(ee().mark((function e(t,n){var r;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=zo(t),!n){e.next=7;break}return r.fu.delete(2),e.next=5,Xd(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.fu.add(2),e.next=12,$d(r);case 12:r.wu.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),Rp.apply(this,arguments)}function Mp(e){return e.gu||(e.gu=function(e,t,n){var r=zo(e);return r.eu(),new Hd(t,r.bo,r.authCredentials,r.appCheckCredentials,r.M,n)}(e.datastore,e.asyncQueue,{Hr:cp.bind(null,e),Yr:fp.bind(null,e),Qo:dp.bind(null,e)}),e.du.push(function(){var t=Z(ee().mark((function t(n){return ee().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.gu.ko(),op(e)?ap(e):e.wu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.gu.stop();case 6:sp(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.gu}function Fp(e){return e.yu||(e.yu=function(e,t,n){var r=zo(e);return r.eu(),new Gd(t,r.bo,r.authCredentials,r.appCheckCredentials,r.M,n)}(e.datastore,e.asyncQueue,{Hr:xp.bind(null,e),Yr:Np.bind(null,e),Xo:_p.bind(null,e),Yo:Tp.bind(null,e)}),e.du.push(function(){var t=Z(ee().mark((function t(n){return ee().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.yu.ko(),t.next=4,gp(e);case 4:t.next=9;break;case 6:return t.next=8,e.yu.stop();case 8:e.hu.length>0&&(Fo("RemoteStore","Stopping write stream with ".concat(e.hu.length," pending writes")),e.hu=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.yu}var jp=function(){function e(t,n,r,i,a){we(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Ho,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return Se(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Wo(Ko.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function Up(e,t){if(jo("AsyncQueue","".concat(t,": ").concat(e)),yf(e))return new Wo(Ko.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var Vp=function(){function e(t){we(this,e),this.comparator=t?function(e,n){return t(e,n)||Nu.comparator(e.key,n.key)}:function(e,t){return Nu.comparator(e.key,t.key)},this.keyedMap=zc(),this.sortedSet=new Lc(this.comparator)}return Se(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),Bp=function(){function e(){we(this,e),this.pu=new Lc(Nu.comparator)}return Se(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.pu.get(t);n?0!==e.type&&3===n.type?this.pu=this.pu.insert(t,e):3===e.type&&1!==n.type?this.pu=this.pu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.pu=this.pu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.pu=this.pu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.pu=this.pu.remove(t):1===e.type&&2===n.type?this.pu=this.pu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.pu=this.pu.insert(t,{type:2,doc:e.doc}):Bo():this.pu=this.pu.insert(t,e)}},{key:"Iu",value:function(){var e=[];return this.pu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),qp=function(){function e(t,n,r,i,a,o,u,s){we(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s}return Se(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&zs(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i){var a=[];return n.forEach((function(e){a.push({type:0,doc:e})})),new e(t,n,Vp.emptySet(n),a,r,i,!0,!1)}}]),e}(),zp=Se((function e(){we(this,e),this.Tu=void 0,this.listeners=[]})),Kp=Se((function e(){we(this,e),this.queries=new Oc((function(e){return Ks(e)}),zs),this.onlineState="Unknown",this.Eu=new Set}));function Wp(e,t){return Hp.apply(this,arguments)}function Hp(){return Hp=Z(ee().mark((function e(t,n){var r,i,a,o,u;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=zo(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new zp),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Tu=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=Up(e.t0,"Initialization of query '".concat(Ws(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.Au(r.onlineState),o.Tu&&n.Ru(o.Tu)&&Xp(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),Hp.apply(this,arguments)}function Gp(e,t){return Qp.apply(this,arguments)}function Qp(){return Qp=Z(ee().mark((function e(t,n){var r,i,a,o,u;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=zo(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),Qp.apply(this,arguments)}function Jp(e,t){var n,r=zo(e),i=!1,a=xe(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=xe(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.Ru(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}s.Tu=o}}}catch(f){a.e(f)}finally{a.f()}i&&Xp(r)}function Yp(e,t,n){var r=zo(e),i=r.queries.get(t);if(i){var a,o=xe(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function Xp(e){e.Eu.forEach((function(e){e.next()}))}var Zp=function(){function e(t,n,r){we(this,e),this.query=t,this.Pu=n,this.bu=!1,this.Vu=null,this.onlineState="Unknown",this.options=r||{}}return Se(e,[{key:"Ru",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=xe(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new qp(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var a=!1;return this.bu?this.vu(e)&&(this.Pu.next(e),a=!0):this.Su(e,this.onlineState)&&(this.Du(e),a=!0),this.Vu=e,a}},{key:"onError",value:function(e){this.Pu.error(e)}},{key:"Au",value:function(e){this.onlineState=e;var t=!1;return this.Vu&&!this.bu&&this.Su(this.Vu,e)&&(this.Du(this.Vu),t=!0),t}},{key:"Su",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Cu||!n)&&(!e.docs.isEmpty()||"Offline"===t)}},{key:"vu",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Vu&&this.Vu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Du",value:function(e){e=qp.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Pu.next(e)}}]),e}(),$p=function(){function e(t,n){we(this,e),this.payload=t,this.byteLength=n}return Se(e,[{key:"xu",value:function(){return"metadata"in this.payload}}]),e}(),ev=function(){function e(t){we(this,e),this.M=t}return Se(e,[{key:"fi",value:function(e){return vl(this.M,e)}},{key:"di",value:function(e){return e.metadata.exists?wl(this.M,e.document,!1):es.newNoDocument(this.fi(e.metadata.name),this._i(e.metadata.readTime))}},{key:"_i",value:function(e){return fl(e)}}]),e}(),tv=function(){function e(t,n,r){we(this,e),this.Nu=t,this.localStore=n,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=nv(t)}return Se(e,[{key:"ku",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;var n=du.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"Mu",value:function(e){var t,n=new Map,r=new ev(this.M),i=xe(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.fi(a.metadata.name),s=xe(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||Gc()).add(u);n.set(c,l)}}catch(f){s.e(f)}finally{s.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=Z(ee().mark((function e(){var t,n,r,i,a;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fd(this.localStore,new ev(this.M),this.documents,this.Nu.id);case 2:t=e.sent,n=this.Mu(this.documents),r=xe(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,dd(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Ou:this.collectionGroups,Fu:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function nv(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var rv=Se((function e(t){we(this,e),this.key=t})),iv=Se((function e(t){we(this,e),this.key=t})),av=function(){function e(t,n){we(this,e),this.query=t,this.$u=n,this.Bu=null,this.current=!1,this.Lu=Gc(),this.mutatedKeys=Gc(),this.Uu=Qs(t),this.qu=new Vp(this.Uu)}return Se(e,[{key:"Ku",get:function(){return this.$u}},{key:"Gu",value:function(e,t){var n=this,r=t?t.Qu:new Bp,i=t?t.qu:this.qu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s=Rs(this.query)&&i.size===this.query.limit?i.last():null,c=Ms(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=Hs(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.ju(l,f)||(r.track({type:2,doc:f}),p=!0,(s&&n.Uu(f,s)>0||c&&n.Uu(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),Rs(this.query)||Ms(this.query))for(;o.size>this.query.limit;){var l=Rs(this.query)?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{qu:o,Qu:r,ni:u,mutatedKeys:a}}},{key:"ju",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.qu;this.qu=e.qu,this.mutatedKeys=e.mutatedKeys;var a=e.Qu.Iu();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Bo()}};return n(e)-n(t)}(e.type,t.type)||r.Uu(e.doc,t.doc)})),this.Wu(n);var o=t?this.zu():[],u=0===this.Lu.size&&this.current?1:0,s=u!==this.Bu;return this.Bu=u,0!==a.length||s?{snapshot:new qp(this.query,e.qu,i,a,e.mutatedKeys,0===u,s,!1),Hu:o}:{Hu:o}}},{key:"Au",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({qu:this.qu,Qu:new Bp,mutatedKeys:this.mutatedKeys,ni:!1},!1)):{Hu:[]}}},{key:"Ju",value:function(e){return!this.$u.has(e)&&!!this.qu.has(e)&&!this.qu.get(e).hasLocalMutations}},{key:"Wu",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.$u=t.$u.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.$u=t.$u.delete(e)})),this.current=e.current)}},{key:"zu",value:function(){var e=this;if(!this.current)return[];var t=this.Lu;this.Lu=Gc(),this.qu.forEach((function(t){e.Ju(t.key)&&(e.Lu=e.Lu.add(t.key))}));var n=[];return t.forEach((function(t){e.Lu.has(t)||n.push(new iv(t))})),this.Lu.forEach((function(e){t.has(e)||n.push(new rv(e))})),n}},{key:"Yu",value:function(e){this.$u=e.li,this.Lu=Gc();var t=this.Gu(e.documents);return this.applyChanges(t,!0)}},{key:"Xu",value:function(){return qp.fromInitialDocuments(this.query,this.qu,this.mutatedKeys,0===this.Bu)}}]),e}(),ov=Se((function e(t,n,r){we(this,e),this.query=t,this.targetId=n,this.view=r})),uv=Se((function e(t){we(this,e),this.key=t,this.Zu=!1})),sv=function(){function e(t,n,r,i,a,o){we(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.ta={},this.ea=new Oc((function(e){return Ks(e)}),zs),this.na=new Map,this.sa=new Set,this.ia=new Lc(Nu.comparator),this.ra=new Map,this.oa=new yd,this.ua={},this.aa=new Map,this.ca=gh.yn(),this.onlineState="Unknown",this.ha=void 0}return Se(e,[{key:"isPrimaryClient",get:function(){return!0===this.ha}}]),e}();function cv(e,t){return lv.apply(this,arguments)}function lv(){return lv=Z(ee().mark((function e(t,n){var r,i,a,o,u,s;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=nm(t),!(o=r.ea.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.Xu(),e.next=15;break;case 6:return e.next=8,id(r.localStore,Bs(n));case 8:return u=e.sent,r.isPrimaryClient&&tp(r.remoteStore,u),s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=14,fv(r,n,i,"current"===s);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),lv.apply(this,arguments)}function fv(e,t,n,r){return hv.apply(this,arguments)}function hv(){return hv=Z(ee().mark((function e(t,n,r,i){var a,o,u,s,c,l;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.la=function(e,n,r){return function(){var e=Z(ee().mark((function e(t,n,r,i){var a,o,u;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.Gu(r),e.t0=a.ni,!e.t0){e.next=6;break}return e.next=5,ud(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.Gu(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(Pv(t,n.targetId,u.Hu),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,ud(t.localStore,n,!0);case 3:return a=e.sent,o=new av(n,a.li),u=o.Gu(a.documents),s=Xc.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState),c=o.applyChanges(u,t.isPrimaryClient,s),Pv(t,r,c.Hu),l=new ov(n,r,o),e.abrupt("return",(t.ea.set(n,l),t.na.has(r)?t.na.get(r).push(n):t.na.set(r,[n]),c.snapshot));case 11:case"end":return e.stop()}}),e)}))),hv.apply(this,arguments)}function dv(e,t){return pv.apply(this,arguments)}function pv(){return pv=Z(ee().mark((function e(t,n){var r,i,a;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=zo(t),i=r.ea.get(n),!((a=r.na.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.na.set(i.targetId,a.filter((function(e){return!zs(e,n)}))),void r.ea.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,ad(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),np(r.remoteStore,i.targetId),Nv(r,i.targetId)})).catch(Sh);case 9:e.next=14;break;case 11:return Nv(r,i.targetId),e.next=14,ad(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),pv.apply(this,arguments)}function vv(e,t,n){return mv.apply(this,arguments)}function mv(){return mv=Z(ee().mark((function e(t,n,r){var i,a,o;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=rm(t),e.prev=1,e.next=4,function(e,t){var n,r=zo(e),i=uu.now(),a=t.reduce((function(e,t){return e.add(t.key)}),Gc());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(e){return r.ci.Ks(e,a).next((function(a){n=a;var o,u=[],s=xe(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=gc(c,n.get(c.key));null!=l&&u.push(new Ac(c.key,l,$u(l.value.mapValue),dc.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return r.Bs.addMutationBatch(e,i,u,t)}))})).then((function(e){return e.applyToLocalDocumentSet(n),{batchId:e.batchId,changes:n}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.ua[e.currentUser.toKey()];r||(r=new Lc(iu)),r=r.insert(t,n),e.ua[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,Rv(i,a.changes);case 9:return e.next=11,gp(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=Up(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),mv.apply(this,arguments)}function yv(e,t){return gv.apply(this,arguments)}function gv(){return gv=Z(ee().mark((function e(t,n){var r,i;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=zo(t),e.prev=1,e.next=4,td(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.ra.get(t);n&&(qo(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.Zu=!0:e.modifiedDocuments.size>0?qo(n.Zu):e.removedDocuments.size>0&&(qo(n.Zu),n.Zu=!1))})),e.next=8,Rv(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Sh(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),gv.apply(this,arguments)}function bv(e,t,n){var r=zo(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.ea.forEach((function(e,n){var r=n.view.Au(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=zo(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=xe(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.Au(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&Xp(n)}(r.eventManager,t),i.length&&r.ta.Qo(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function kv(e,t,n){return wv.apply(this,arguments)}function wv(){return wv=Z(ee().mark((function e(t,n,r){var i,a,o,u,s,c;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=zo(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.ra.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new Lc(Nu.comparator)).insert(o,es.newNoDocument(o,su.min())),s=Gc().add(o),c=new Yc(su.min(),new Map,new Fc(iu),u,s),e.next=9,yv(i,c);case 9:i.ia=i.ia.remove(o),i.ra.delete(n),Lv(i),e.next=16;break;case 14:return e.next=16,ad(i.localStore,n,!1).then((function(){return Nv(i,n,r)})).catch(Sh);case 16:case"end":return e.stop()}}),e)}))),wv.apply(this,arguments)}function Av(e,t){return Sv.apply(this,arguments)}function Sv(){return Sv=Z(ee().mark((function e(t,n){var r,i,a;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=zo(t),i=n.batch.batchId,e.prev=1,e.next=4,$h(r.localStore,n);case 4:return a=e.sent,Cv(r,i,null),Tv(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,Rv(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Sh(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),Sv.apply(this,arguments)}function xv(e,t,n){return Ev.apply(this,arguments)}function Ev(){return Ev=Z(ee().mark((function e(t,n,r){var i,a;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=zo(t),e.prev=1,e.next=4,function(e,t){var n=zo(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.Bs.lookupMutationBatch(e,t).next((function(t){return qo(null!==t),r=t.keys(),n.Bs.removeMutationBatch(e,t)})).next((function(){return n.Bs.performConsistencyCheck(e)})).next((function(){return n.ci.Ks(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,Cv(i,n,r),Tv(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,Rv(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Sh(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),Ev.apply(this,arguments)}function _v(e,t){return Iv.apply(this,arguments)}function Iv(){return Iv=Z(ee().mark((function e(t,n){var r,i,a,o;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return up((r=zo(t)).remoteStore)||Fo("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=zo(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.Bs.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.aa.get(i)||[]).push(n),r.aa.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=Up(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),Iv.apply(this,arguments)}function Tv(e,t){(e.aa.get(t)||[]).forEach((function(e){e.resolve()})),e.aa.delete(t)}function Cv(e,t,n){var r=zo(e),i=r.ua[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.ua[r.currentUser.toKey()]=i}}function Nv(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=xe(e.na.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.ea.delete(a),n&&e.ta.fa(a,n)}}catch(o){i.e(o)}finally{i.f()}e.na.delete(t),e.isPrimaryClient&&e.oa.Pi(t).forEach((function(t){e.oa.containsKey(t)||Dv(e,t)}))}function Dv(e,t){e.sa.delete(t.path.canonicalString());var n=e.ia.get(t);null!==n&&(np(e.remoteStore,n),e.ia=e.ia.remove(t),e.ra.delete(n),Lv(e))}function Pv(e,t,n){var r,i=xe(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof rv?(e.oa.addReference(a.key,t),Ov(e,a)):a instanceof iv?(Fo("SyncEngine","Document no longer in limbo: "+a.key),e.oa.removeReference(a.key,t),e.oa.containsKey(a.key)||Dv(e,a.key)):Bo()}}catch(o){i.e(o)}finally{i.f()}}function Ov(e,t){var n=t.key,r=n.path.canonicalString();e.ia.get(n)||e.sa.has(r)||(Fo("SyncEngine","New document in limbo: "+n),e.sa.add(r),Lv(e))}function Lv(e){for(;e.sa.size>0&&e.ia.size<e.maxConcurrentLimboResolutions;){var t=e.sa.values().next().value;e.sa.delete(t);var n=new Nu(du.fromString(t)),r=e.ca.next();e.ra.set(r,new uv(n)),e.ia=e.ia.insert(n,r),tp(e.remoteStore,new If(Bs(Ls(n.path)),r,2,tu.A))}}function Rv(e,t,n){return Mv.apply(this,arguments)}function Mv(){return Mv=Z(ee().mark((function e(t,n,r){var i,a,o,u;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=zo(t),a=[],o=[],u=[],e.t0=i.ea.isEmpty(),e.t0){e.next=9;break}return i.ea.forEach((function(e,t){u.push(i.la(t,n,r).then((function(e){if(e){i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,e.fromCache?"not-current":"current"),a.push(e);var n=Gh.Ys(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.ta.Qo(a),e.next=9,function(){var e=Z(ee().mark((function e(t,n){var r,i,a,o,u,s,c,l;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=zo(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return hf.forEach(n,(function(t){return hf.forEach(t.Hs,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return hf.forEach(t.Js,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),yf(e.t0)){e.next=10;break}throw e.t0;case 10:Fo("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=xe(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.ii.get(u),c=s.snapshotVersion,l=s.withLastLimboFreeSnapshotVersion(c),r.ii=r.ii.insert(u,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),Mv.apply(this,arguments)}function Fv(e,t){return jv.apply(this,arguments)}function jv(){return jv=Z(ee().mark((function e(t,n){var r,i;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=zo(t)).currentUser.isEqual(n)){e.next=11;break}return Fo("SyncEngine","User change. New user:",n.toKey()),e.next=5,Xh(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.aa.forEach((function(e){e.forEach((function(e){e.reject(new Wo(Ko.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.aa.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,Rv(r,i.hi);case 11:case"end":return e.stop()}}),e)}))),jv.apply(this,arguments)}function Uv(e,t){var n=zo(e),r=n.ra.get(t);if(r&&r.Zu)return Gc().add(r.key);var i=Gc(),a=n.na.get(t);if(!a)return i;var o,u=xe(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.ea.get(s);i=i.unionWith(c.view.Ku)}}catch(l){u.e(l)}finally{u.f()}return i}function Vv(e,t){return Bv.apply(this,arguments)}function Bv(){return Bv=Z(ee().mark((function e(t,n){var r,i,a;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=zo(t),e.next=3,ud(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.Yu(i),e.abrupt("return",(r.isPrimaryClient&&Pv(r,n.targetId,a.Hu),a));case 6:case"end":return e.stop()}}),e)}))),Bv.apply(this,arguments)}function qv(e,t){return zv.apply(this,arguments)}function zv(){return zv=Z(ee().mark((function e(t,n){var r;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=zo(t),e.abrupt("return",cd(r.localStore,n).then((function(e){return Rv(r,e)})));case 2:case"end":return e.stop()}}),e)}))),zv.apply(this,arguments)}function Kv(e,t,n,r){return Wv.apply(this,arguments)}function Wv(){return Wv=Z(ee().mark((function e(t,n,r,i){var a,o;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=zo(t),e.next=3,function(e,t){var n=zo(e),r=zo(n.Bs);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.fn(e,t).next((function(t){return t?n.ci.Ks(e,t):hf.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,gp(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(Cv(a,n,i||null),Tv(a,n),function(e,t){zo(zo(e).Bs)._n(t)}(a.localStore,n)):Bo();case 11:return e.next=13,Rv(a,o);case 13:e.next=16;break;case 15:Fo("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),Wv.apply(this,arguments)}function Hv(e,t){return Gv.apply(this,arguments)}function Gv(){return Gv=Z(ee().mark((function e(t,n){var r,i,a,o,u,s,c,l;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(nm(r=zo(t)),rm(r),!0!==n||!0===r.ha){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,Qv(r,i.toArray());case 5:return a=e.sent,r.ha=!0,e.next=9,Lp(r.remoteStore,!0);case 9:o=xe(a);try{for(o.s();!(u=o.n()).done;)s=u.value,tp(r.remoteStore,s)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.ha){e.next=25;break}return c=[],l=Promise.resolve(),r.na.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return Nv(r,t),ad(r.localStore,t,!0)})),np(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,Qv(r,c);case 21:return function(e){var t=zo(e);t.ra.forEach((function(e,n){np(t.remoteStore,n)})),t.oa.bi(),t.ra=new Map,t.ia=new Lc(Nu.comparator)}(r),r.ha=!1,e.next=25,Lp(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),Gv.apply(this,arguments)}function Qv(e,t,n){return Jv.apply(this,arguments)}function Jv(){return Jv=Z(ee().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d,p,v,m,y;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=zo(t),a=[],o=[],u=xe(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(c=s.value,l=void 0,!(f=i.na.get(c))||0===f.length){e.next=34;break}return e.next=11,id(i.localStore,Bs(f[0]));case 11:l=e.sent,h=xe(f),e.prev=13,h.s();case 15:if((d=h.n()).done){e.next=24;break}return p=d.value,v=i.ea.get(p),e.next=20,Vv(i,v);case 20:(m=e.sent).snapshot&&o.push(m.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),h.e(e.t0);case 29:return e.prev=29,h.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,sd(i.localStore,c);case 36:return y=e.sent,e.next=39,id(i.localStore,y);case 39:return l=e.sent,e.next=42,fv(i,Yv(y),c,!1);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.ta.Qo(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),Jv.apply(this,arguments)}function Yv(e){return Os(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function Xv(e){var t=zo(e);return zo(zo(t.localStore).persistence).Fs()}function Zv(e,t,n,r){return $v.apply(this,arguments)}function $v(){return $v=Z(ee().mark((function e(t,n,r,i){var a,o,u,s;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=zo(t)).ha){e.next=3;break}return e.abrupt("return",void Fo("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a.na.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,cd(a.localStore,Gs(o[0]));case 10:return u=e.sent,s=Yc.createSynthesizedRemoteEventForCurrentChange(n,"current"===r),e.next=14,Rv(a,u,s);case 14:return e.abrupt("break",20);case 15:return e.next=17,ad(a.localStore,n,!0);case 17:return Nv(a,n,i),e.abrupt("break",20);case 19:Bo();case 20:case"end":return e.stop()}}),e)}))),$v.apply(this,arguments)}function em(e,t,n){return tm.apply(this,arguments)}function tm(){return tm=Z(ee().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=nm(t)).ha){e.next=45;break}a=xe(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i.na.has(u)){e.next=10;break}return Fo("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,sd(i.localStore,u);case 12:return s=e.sent,e.next=15,id(i.localStore,s);case 15:return c=e.sent,e.next=18,fv(i,Yv(s),c.targetId,!1);case 18:tp(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=xe(r),e.prev=30,h=ee().mark((function e(){var t;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i.na.has(t),!e.t0){e.next=5;break}return e.next=5,ad(i.localStore,t,!1).then((function(){np(i.remoteStore,t),Nv(i,t)})).catch(Sh);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((f=l.n()).done){e.next=37;break}return e.delegateYield(h(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),tm.apply(this,arguments)}function nm(e){var t=zo(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=yv.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Uv.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=kv.bind(null,t),t.ta.Qo=Jp.bind(null,t.eventManager),t.ta.fa=Yp.bind(null,t.eventManager),t}function rm(e){var t=zo(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Av.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=xv.bind(null,t),t}function im(e,t,n){var r=zo(e);(function(){var e=Z(ee().mark((function e(t,n,r){var i,a,o,u,s;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=zo(e),r=fl(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n._s.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(nv(i)),a=new tv(i,t.localStore,n.M),e.next=15,n.da();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.ku(o);case 19:return(u=e.sent)&&r._updateProgress(u),e.next=23,n.da();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return s=e.sent,e.next=31,Rv(t,s.Fu,void 0);case 31:return e.next=33,function(e,t){var n=zo(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n._s.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(s.progress),e.abrupt("return",Promise.resolve(s.Ou));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(Uo("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var am=function(){function e(){we(this,e),this.synchronizeTabs=!1}return Se(e,[{key:"initialize",value:function(){var e=Z(ee().mark((function e(t){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.M=zd(t.databaseInfo.databaseId),this.sharedClientState=this._a(t),this.persistence=this.wa(t),e.next=5,this.persistence.start();case 5:this.gcScheduler=this.ma(t),this.localStore=this.ga(t);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"ma",value:function(e){return null}},{key:"ga",value:function(e){return Yh(this.persistence,new Qh,e.initialUser,this.M)}},{key:"wa",value:function(e){return new Sd(Ed.zi,this.M)}},{key:"_a",value:function(e){return new Rd}},{key:"terminate",value:function(){var e=Z(ee().mark((function e(){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),om=function(e){Ie(n,e);var t=Pe(n);function n(e,r,i){var a;return we(this,n),(a=t.call(this)).ya=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return Se(n,[{key:"initialize",value:function(){var e=Z(ee().mark((function e(t){var r=this;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yn(Te(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.ya.initialize(this,t);case 4:return e.next=6,rm(this.ya.syncEngine);case 6:return e.next=8,gp(this.ya.remoteStore);case 8:return e.next=10,this.persistence.Ts((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"ga",value:function(e){return Yh(this.persistence,new Qh,e.initialUser,this.M)}},{key:"ma",value:function(e){var t=this.persistence.referenceDelegate.garbageCollector;return new Ih(t,e.asyncQueue)}},{key:"wa",value:function(e){var t=Wh(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?lh.withCacheSize(this.cacheSizeBytes):lh.DEFAULT;return new qh(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,Bd(),qd(),this.M,this.sharedClientState,!!this.forceOwnership)}},{key:"_a",value:function(e){return new Rd}}]),n}(am),um=function(e){Ie(n,e);var t=Pe(n);function n(e,r){var i;return we(this,n),(i=t.call(this,e,r,!1)).ya=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return Se(n,[{key:"initialize",value:function(){var e=Z(ee().mark((function e(t){var r,i=this;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yn(Te(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.ya.syncEngine,e.t0=this.sharedClientState instanceof Ld,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={Mr:Kv.bind(null,r),Or:Zv.bind(null,r),Fr:em.bind(null,r),Fs:Xv.bind(null,r),kr:qv.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.Ts(function(){var e=Z(ee().mark((function e(t){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Hv(i.ya.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start(i.localStore):t||i.gcScheduler.stop());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_a",value:function(e){var t=Bd();if(!Ld.vt(t))throw new Wo(Ko.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Wh(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Ld(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(om),sm=function(){function e(){we(this,e)}return Se(e,[{key:"initialize",value:function(){var e=Z(ee().mark((function e(t,n){var r=this;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return bv(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Fv.bind(null,this.syncEngine),e.next=12,Lp(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new Kp}},{key:"createDatastore",value:function(e){var t,n=zd(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new Vd(t));return function(e,t,n,r){return new Qd(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return bv(o.syncEngine,e,0)},a=Fd.vt()?new Fd:new Md,new Yd(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new sv(e,t,n,r,i,a);return o&&(u.ha=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=Z(ee().mark((function e(t){var n;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=zo(t),Fo("RemoteStore","RemoteStore shutting down."),n.fu.add(5),e.next=5,$d(n);case 5:n._u.shutdown(),n.wu.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function cm(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return Z(ee().mark((function r(){var i;return ee().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return Z(ee().mark((function e(){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var lm=function(){function e(t){we(this,e),this.observer=t,this.muted=!1}return Se(e,[{key:"next",value:function(e){this.observer.next&&this.pa(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.pa(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}},{key:"Ia",value:function(){this.muted=!0}},{key:"pa",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),fm=function(){function e(t,n){var r=this;we(this,e),this.Ta=t,this.M=n,this.metadata=new Ho,this.buffer=new Uint8Array,this.Ea=new TextDecoder("utf-8"),this.Aa().then((function(e){e&&e.xu()?r.metadata.resolve(e.payload.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.payload))))}),(function(e){return r.metadata.reject(e)}))}return Se(e,[{key:"close",value:function(){return this.Ta.cancel()}},{key:"getMetadata",value:function(){var e=Z(ee().mark((function e(){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"da",value:function(){var e=Z(ee().mark((function e(){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Aa());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Aa",value:function(){var e=Z(ee().mark((function e(){var t,n,r,i;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Ra();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.Ea.decode(t),r=Number(n),isNaN(r)&&this.Pa("length string (".concat(n,") is not valid number")),e.next=9,this.ba(r);case 9:return i=e.sent,e.abrupt("return",new $p(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Va",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"Ra",value:function(){var e=Z(ee().mark((function e(){var t,n;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.Va()<0)){e.next=7;break}return e.next=3,this.va();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.Va())<0&&this.Pa("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ba",value:function(){var e=Z(ee().mark((function e(t){var n;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.va();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.Pa("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.Ea.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Pa",value:function(e){throw this.Ta.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"va",value:function(){var e=Z(ee().mark((function e(){var t,n;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Ta.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),hm=function(){function e(t){we(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return Se(e,[{key:"lookup",value:function(){var e=Z(ee().mark((function e(t){var n,r=this;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new Wo(Ko.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=Z(ee().mark((function e(t,n){var r,i,a,o,u,s;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=zo(t),i=gl(r.M)+"/documents",a={documents:n.map((function(e){return pl(r.M,e)}))},e.next=5,r.ho("BatchGetDocuments",i,a);case 5:return o=e.sent,u=new Map,o.forEach((function(e){var t=Al(r.M,e);u.set(t.key.toString(),t)})),s=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());qo(!!t),s.push(t)})),s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new Tc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=Z(ee().mark((function e(){var t,n=this;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=Nu.fromPath(t);n.mutations.push(new Cc(r,n.precondition(r)))})),e.next=7,function(){var e=Z(ee().mark((function e(t,n){var r,i,a;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=zo(t),i=gl(r.M)+"/documents",a={writes:n.map((function(e){return Sl(r.M,e)}))},e.next=3,r.oo("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Bo();t=su.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Wo(Ko.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?dc.updateTime(t):dc.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(su.min()))throw new Wo(Ko.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return dc.updateTime(t)}return dc.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),dm=function(){function e(t,n,r,i){we(this,e),this.asyncQueue=t,this.datastore=n,this.updateFunction=r,this.deferred=i,this.Sa=5,this.Do=new Kd(this.asyncQueue,"transaction_retry")}return Se(e,[{key:"run",value:function(){this.Sa-=1,this.Da()}},{key:"Da",value:function(){var e=this;this.Do.To(Z(ee().mark((function t(){var n,r;return ee().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new hm(e.datastore),(r=e.Ca(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.xa(t)}))}))})).catch((function(t){e.xa(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"Ca",value:function(e){try{var t=this.updateFunction(e);return!Iu(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"xa",value:function(e){var t=this;this.Sa>0&&this.Na(e)?(this.Sa-=1,this.asyncQueue.enqueueAndForget((function(){return t.Da(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"Na",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!Dc(t)}return!1}}]),e}(),pm=function(){function e(t,n,r,i){var a=this;we(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Oo.UNAUTHENTICATED,this.clientId=ru.R(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=Z(ee().mark((function e(t){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Fo("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return Fo("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return Se(e,[{key:"getConfiguration",value:function(){var e=Z(ee().mark((function e(){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new Wo(Ko.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new Ho;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(Z(ee().mark((function n(){var r;return ee().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=Up(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function vm(e,t){return mm.apply(this,arguments)}function mm(){return mm=Z(ee().mark((function e(t,n){var r,i;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),Fo("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=Z(ee().mark((function e(t){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,Xh(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),mm.apply(this,arguments)}function ym(e,t){return gm.apply(this,arguments)}function gm(){return gm=Z(ee().mark((function e(t,n){var r,i;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,bm(t);case 3:return r=e.sent,Fo("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return Pp(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return Pp(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),gm.apply(this,arguments)}function bm(e){return km.apply(this,arguments)}function km(){return km=Z(ee().mark((function e(t){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return Fo("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,vm(t,new am);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),km.apply(this,arguments)}function wm(e){return Am.apply(this,arguments)}function Am(){return Am=Z(ee().mark((function e(t){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return Fo("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,ym(t,new sm);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),Am.apply(this,arguments)}function Sm(e){return bm(e).then((function(e){return e.persistence}))}function xm(e){return bm(e).then((function(e){return e.localStore}))}function Em(e){return wm(e).then((function(e){return e.remoteStore}))}function _m(e){return wm(e).then((function(e){return e.syncEngine}))}function Im(e){return Tm.apply(this,arguments)}function Tm(){return Tm=Z(ee().mark((function e(t){var n,r;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wm(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=cv.bind(null,n.syncEngine),r.onUnlisten=dv.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),Tm.apply(this,arguments)}function Cm(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Ho;return e.asyncQueue.enqueueAndForget(Z(ee().mark((function i(){return ee().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new lm({next:function(a){t.enqueueAndForget((function(){return Gp(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new Wo(Ko.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new Wo(Ko.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new Zp(Ls(n.path),a,{includeMetadataChanges:!0,Cu:!0});return Wp(e,o)},i.next=3,Im(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function Nm(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Ho;return e.asyncQueue.enqueueAndForget(Z(ee().mark((function i(){return ee().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new lm({next:function(n){t.enqueueAndForget((function(){return Gp(e,o)})),n.fromCache&&"server"===r.source?i.reject(new Wo(Ko.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new Zp(n,a,{includeMetadataChanges:!0,Cu:!0});return Wp(e,o)},i.next=3,Im(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var Dm=new Map;function Pm(e,t,n){if(!n)throw new Wo(Ko.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Om(e,t,n,r){if(!0===t&&!0===r)throw new Wo(Ko.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function Lm(e){if(!Nu.isDocumentKey(e))throw new Wo(Ko.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Rm(e){if(Nu.isDocumentKey(e))throw new Wo(Ko.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Mm(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":Bo()}function Fm(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Wo(Ko.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Mm(e);throw new Wo(Ko.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function jm(e,t){if(t<=0)throw new Wo(Ko.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var Um=function(){function e(t){var n;if(we(this,e),void 0===t.host){if(void 0!==t.ssl)throw new Wo(Ko.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Wo(Ko.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,Om("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return Se(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),Vm=function(){function e(t,n,r){we(this,e),this._authCredentials=n,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Um({}),this._settingsFrozen=!1,t instanceof _u?this._databaseId=t:(this._app=t,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Wo(Ko.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _u(e.options.projectId)}(t))}return Se(e,[{key:"app",get:function(){if(!this._app)throw new Wo(Ko.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new Wo(Ko.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Um(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Qo;switch(e.type){case"gapi":var t=e.client;return qo(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new Zo(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new Wo(Ko.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=Dm.get(e);t&&(Fo("ComponentProvider","Removing Datastore"),Dm.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function Bm(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=Fm(e,Vm))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&Uo("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,u;if("string"==typeof i.mockUserToken)o=i.mockUserToken,u=Oo.MOCK_USER;else{o=Ve(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new Wo(Ko.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Oo(s)}e._authCredentials=new Jo(new Go(o,u))}}var qm=function(){function e(t,n,r){we(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return Se(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new Km(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),zm=function(){function e(t,n,r){we(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return Se(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),Km=function(e){Ie(n,e);var t=Pe(n);function n(e,r,i){var a;return we(this,n),(a=t.call(this,e,r,Ls(i)))._path=i,a.type="collection",a}return Se(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new qm(this.firestore,null,new Nu(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(zm);function Wm(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=et(e),Pm("collection","path",t),e instanceof Vm){var a=du.fromString.apply(du,[t].concat(r));return Rm(a),new Km(e,null,a)}if(!(e instanceof qm||e instanceof Km))throw new Wo(Ko.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(du.fromString.apply(du,[t].concat(r)));return Rm(o),new Km(e.firestore,null,o)}function Hm(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=et(e),1===arguments.length&&(t=ru.R()),Pm("doc","path",t),e instanceof Vm){var a=du.fromString.apply(du,[t].concat(r));return Lm(a),new qm(e,null,new Nu(a))}if(!(e instanceof qm||e instanceof Km))throw new Wo(Ko.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(du.fromString.apply(du,[t].concat(r)));return Lm(o),new qm(e.firestore,e instanceof Km?e.converter:null,new Nu(o))}function Gm(e,t){return e=et(e),t=et(t),(e instanceof qm||e instanceof Km)&&(t instanceof qm||t instanceof Km)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function Qm(e,t){return e=et(e),t=et(t),e instanceof zm&&t instanceof zm&&e.firestore===t.firestore&&zs(e._query,t._query)&&e.converter===t.converter}var Jm=function(){function e(){var t=this;we(this,e),this.ka=Promise.resolve(),this.Ma=[],this.Oa=!1,this.Fa=[],this.$a=null,this.Ba=!1,this.La=!1,this.Ua=[],this.Do=new Kd(this,"async_queue_retry"),this.qa=function(){var e=qd();e&&Fo("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Do.Ao()};var n=qd();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.qa)}return Se(e,[{key:"isShuttingDown",get:function(){return this.Oa}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Ka(),this.Ga(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Oa){this.Oa=!0,this.La=e||!1;var t=qd();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.qa)}}},{key:"enqueue",value:function(e){var t=this;if(this.Ka(),this.Oa)return new Promise((function(){}));var n=new Ho;return this.Ga((function(){return t.Oa&&t.La?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Ma.push(e),t.Qa()}))}},{key:"Qa",value:function(){var e=Z(ee().mark((function e(){var t=this;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Ma.length){e.next=14;break}return e.prev=1,e.next=4,this.Ma[0]();case 4:this.Ma.shift(),this.Do.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),yf(e.t0)){e.next=12;break}throw e.t0;case 12:Fo("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Ma.length>0&&this.Do.To((function(){return t.Qa()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Ga",value:function(e){var t=this,n=this.ka.then((function(){return t.Ba=!0,e().catch((function(e){t.$a=e,t.Ba=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw jo("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Ba=!1,e}))}));return this.ka=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Ka(),this.Ua.indexOf(e)>-1&&(t=0);var i=jp.createAndSchedule(this,e,t,n,(function(e){return r.ja(e)}));return this.Fa.push(i),i}},{key:"Ka",value:function(){this.$a&&Bo()}},{key:"verifyOperationInProgress",value:function(){}},{key:"Wa",value:function(){var e=Z(ee().mark((function e(){var t;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.ka,e.next=3,t;case 3:if(t!==this.ka){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"za",value:function(e){var t,n=xe(this.Fa);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"Ha",value:function(e){var t=this;return this.Wa().then((function(){t.Fa.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=xe(t.Fa);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.Wa()}))}},{key:"Ja",value:function(e){this.Ua.push(e)}},{key:"ja",value:function(e){var t=this.Fa.indexOf(e);this.Fa.splice(t,1)}}]),e}();function Ym(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=xe(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var Xm=function(){function e(){we(this,e),this._progressObserver={},this._taskCompletionResolver=new Ho,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return Se(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),Zm=function(e){Ie(n,e);var t=Pe(n);function n(e,r,i){var a;return we(this,n),(a=t.call(this,e,r,i)).type="firestore",a._queue=new Jm,a._persistenceKey="name"in e?e.name:"[DEFAULT]",a}return Se(n,[{key:"_terminate",value:function(){return this._firestoreClient||ey(this),this._firestoreClient.terminate()}}]),n}(Vm);function $m(e){return e._firestoreClient||ey(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function ey(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new Eu(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new pm(e._authCredentials,e._appCheckCredentials,e._queue,r)}function ty(e,t,n){var r=new Ho;return e.asyncQueue.enqueue(Z(ee().mark((function i(){return ee().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,vm(e,n);case 3:return i.next=5,ym(e,t);case 5:r.resolve(),i.next=13;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===Ko.FAILED_PRECONDITION||e.code===Ko.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(i.t0)){i.next=12;break}throw i.t0;case 12:console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i.t0),r.reject(i.t0);case 13:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function ny(e){return function(e){return e.asyncQueue.enqueue(Z(ee().mark((function t(){var n,r;return ee().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Sm(e);case 2:return n=t.sent,t.next=5,Em(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=zo(e);return t.fu.delete(0),Xd(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}($m(e=Fm(e,Zm)))}function ry(e){return function(e){return e.asyncQueue.enqueue(Z(ee().mark((function t(){var n,r;return ee().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Sm(e);case 2:return n=t.sent,t.next=5,Em(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=Z(ee().mark((function e(t){var n;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=zo(t)).fu.add(0),e.next=4,$d(n);case 4:n.wu.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}($m(e=Fm(e,Zm)))}function iy(e,t){var n=$m(e=Fm(e,Zm)),r=new Xm;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new fm(e,t)}(function(e,t){if(e instanceof Uint8Array)return cm(e,t);if(e instanceof ArrayBuffer)return cm(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,zd(t));e.asyncQueue.enqueueAndForget(Z(ee().mark((function t(){return ee().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=im,t.next=3,_m(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function ay(e,t){return function(e,t){return e.asyncQueue.enqueue(Z(ee().mark((function n(){return ee().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=zo(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n._s.getNamedQuery(e,t)}))},n.next=3,xm(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}($m(e=Fm(e,Zm)),t).then((function(t){return t?new zm(e,null,t.query):null}))}function oy(e){if(e._initialized||e._terminated)throw new Wo(Ko.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var uy=function(){function e(){we(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new Wo(Ko.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new vu(n)}return Se(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var sy=function(){function e(t){we(this,e),this._byteString=t}return Se(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(yu.fromBase64String(t))}catch(t){throw new Wo(Ko.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(yu.fromUint8Array(t))}}]),e}(),cy=Se((function e(t){we(this,e),this._methodName=t})),ly=function(){function e(t,n){if(we(this,e),!isFinite(t)||t<-90||t>90)throw new Wo(Ko.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Wo(Ko.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return Se(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return iu(this._lat,e._lat)||iu(this._long,e._long)}}]),e}(),fy=/^__.*__$/,hy=function(){function e(t,n,r){we(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return Se(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new Ac(e,this.data,this.fieldMask,t,this.fieldTransforms):new wc(e,this.data,t,this.fieldTransforms)}}]),e}(),dy=function(){function e(t,n,r){we(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return Se(e,[{key:"toMutation",value:function(e,t){return new Ac(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function py(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Bo()}}var vy=function(){function e(t,n,r,i,a,o){we(this,e),this.settings=t,this.databaseId=n,this.M=r,this.ignoreUndefinedProperties=i,void 0===a&&this.Ya(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return Se(e,[{key:"path",get:function(){return this.settings.path}},{key:"Xa",get:function(){return this.settings.Xa}},{key:"Za",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"tc",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Za({path:n,ec:!1});return r.nc(e),r}},{key:"sc",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Za({path:n,ec:!1});return r.Ya(),r}},{key:"ic",value:function(e){return this.Za({path:void 0,ec:!0})}},{key:"rc",value:function(e){return Ry(e,this.settings.methodName,this.settings.oc||!1,this.path,this.settings.uc)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"Ya",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.nc(this.path.get(e))}},{key:"nc",value:function(e){if(0===e.length)throw this.rc("Document fields must not be empty");if(py(this.Xa)&&fy.test(e))throw this.rc('Document fields cannot begin and end with "__"')}}]),e}(),my=function(){function e(t,n,r){we(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.M=r||zd(t)}return Se(e,[{key:"ac",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new vy({Xa:e,methodName:t,uc:n,path:vu.emptyPath(),ec:!1,oc:r},this.databaseId,this.M,this.ignoreUndefinedProperties)}}]),e}();function yy(e){var t=e._freezeSettings(),n=zd(e._databaseId);return new my(e._databaseId,!!t.ignoreUndefinedProperties,n)}function gy(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.ac(a.merge||a.mergeFields?2:0,t,n,i);Dy("Data must be an object, but it was:",o,r);var u,s,c=Cy(r,o);if(a.merge)u=new mu(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=xe(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=l.value,p=Py(t,d,n);if(!o.contains(p))throw new Wo(Ko.INVALID_ARGUMENT,"Field '".concat(p,"' is specified in your field mask but missing from your input data."));My(f,p)||f.push(p)}}catch(v){h.e(v)}finally{h.f()}u=new mu(f),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new hy(new Zu(c),u,s)}var by=function(e){Ie(n,e);var t=Pe(n);function n(){return we(this,n),t.apply(this,arguments)}return Se(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.Xa)throw 1===e.Xa?e.rc("".concat(this._methodName,"() can only appear at the top level of your update data")):e.rc("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(cy);function ky(e,t,n){return new vy({Xa:3,uc:t.settings.uc,methodName:e._methodName,ec:n},t.databaseId,t.M,t.ignoreUndefinedProperties)}var wy=function(e){Ie(n,e);var t=Pe(n);function n(){return we(this,n),t.apply(this,arguments)}return Se(n,[{key:"_toFieldTransform",value:function(e){return new fc(e.path,new rc)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(cy),Ay=function(e){Ie(n,e);var t=Pe(n);function n(e,r){var i;return we(this,n),(i=t.call(this,e)).cc=r,i}return Se(n,[{key:"_toFieldTransform",value:function(e){var t=ky(this,e,!0),n=this.cc.map((function(e){return Ty(e,t)})),r=new ic(n);return new fc(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(cy),Sy=function(e){Ie(n,e);var t=Pe(n);function n(e,r){var i;return we(this,n),(i=t.call(this,e)).cc=r,i}return Se(n,[{key:"_toFieldTransform",value:function(e){var t=ky(this,e,!0),n=this.cc.map((function(e){return Ty(e,t)})),r=new oc(n);return new fc(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(cy),xy=function(e){Ie(n,e);var t=Pe(n);function n(e,r){var i;return we(this,n),(i=t.call(this,e)).hc=r,i}return Se(n,[{key:"_toFieldTransform",value:function(e){var t=new sc(e.M,Zs(e.M,this.hc));return new fc(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(cy);function Ey(e,t,n,r){var i=e.ac(1,t,n);Dy("Data must be an object, but it was:",i,r);var a=[],o=Zu.empty();lu(r,(function(e,r){var u=Ly(t,e,n);r=et(r);var s=i.sc(u);if(r instanceof by)a.push(u);else{var c=Ty(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new mu(a);return new dy(o,u,i.fieldTransforms)}function _y(e,t,n,r,i,a){var o=e.ac(1,t,n),u=[Py(t,r,n)],s=[i];if(a.length%2!=0)throw new Wo(Ko.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(Py(t,a[c])),s.push(a[c+1]);for(var l=[],f=Zu.empty(),h=u.length-1;h>=0;--h)if(!My(l,u[h])){var d=u[h],p=s[h];p=et(p);var v=o.sc(d);if(p instanceof by)l.push(d);else{var m=Ty(p,v);null!=m&&(l.push(d),f.set(d,m))}}var y=new mu(l);return new dy(f,y,o.fieldTransforms)}function Iy(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Ty(n,e.ac(r?4:3,t))}function Ty(e,t){if(Ny(e=et(e)))return Dy("Unsupported field value:",t,e),Cy(e,t);if(e instanceof cy)return function(e,t){if(!py(t.Xa))throw t.rc("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.rc("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.ec&&4!==t.Xa)throw t.rc("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=xe(e);try{for(a.s();!(n=a.n()).done;){var o=Ty(n.value,t.ic(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=et(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Zs(t.M,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=uu.fromDate(e);return{timestampValue:sl(t.M,n)}}if(e instanceof uu){var r=new uu(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:sl(t.M,r)}}if(e instanceof ly)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof sy)return{bytesValue:cl(t.M,e._byteString)};if(e instanceof qm){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.rc("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:hl(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.rc("Unsupported field value: ".concat(Mm(e)))}(e,t)}function Cy(e,t){var n={};return fu(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):lu(e,(function(e,r){var i=Ty(r,t.tc(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function Ny(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof uu||e instanceof ly||e instanceof sy||e instanceof qm||e instanceof cy)}function Dy(e,t,n){if(!Ny(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=Mm(n);throw"an object"===r?t.rc(e+" a custom object"):t.rc(e+" "+r)}}function Py(e,t,n){if((t=et(t))instanceof uy)return t._internalPath;if("string"==typeof t)return Ly(e,t);throw Ry("Field path arguments must be of type string or ",e,!1,void 0,n)}var Oy=new RegExp("[~\\*/\\[\\]]");function Ly(e,t,n){if(t.search(Oy)>=0)throw Ry("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return Oe(uy,ot(t.split(".")))._internalPath}catch(r){throw Ry("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Ry(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new Wo(Ko.INVALID_ARGUMENT,u+e+s)}function My(e,t){return e.some((function(e){return e.isEqual(t)}))}var Fy=function(){function e(t,n,r,i,a){we(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return Se(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new qm(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new jy(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(Uy("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),jy=function(e){Ie(n,e);var t=Pe(n);function n(){return we(this,n),t.apply(this,arguments)}return Se(n,[{key:"data",value:function(){return yn(Te(n.prototype),"data",this).call(this)}}]),n}(Fy);function Uy(e,t){return"string"==typeof t?Ly(e,t):t instanceof uy?t._internalPath:t._delegate._internalPath}var Vy=function(){function e(t,n){we(this,e),this.hasPendingWrites=t,this.fromCache=n}return Se(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),By=function(e){Ie(n,e);var t=Pe(n);function n(e,r,i,a,o,u){var s;return we(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return Se(n,[{key:"exists",value:function(){return yn(Te(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new qy(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(Uy("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(Fy),qy=function(e){Ie(n,e);var t=Pe(n);function n(){return we(this,n),t.apply(this,arguments)}return Se(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return yn(Te(n.prototype),"data",this).call(this,e)}}]),n}(By),zy=function(){function e(t,n,r,i){we(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new Vy(i.hasPendingWrites,i.fromCache),this.query=r}return Se(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new qy(n._firestore,n._userDataWriter,r.key,r,new Vy(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Wo(Ko.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){return{type:"added",doc:new qy(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Vy(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new qy(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Vy(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:Ky(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function Ky(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Bo()}}function Wy(e,t){return e instanceof By&&t instanceof By?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof zy&&t instanceof zy&&e._firestore===t._firestore&&Qm(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function Hy(e){if(Ms(e)&&0===e.explicitOrderBy.length)throw new Wo(Ko.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Gy=Se((function e(){we(this,e)}));function Qy(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=o._apply(e)}return e}var Jy=function(e){Ie(n,e);var t=Pe(n);function n(e,r,i){var a;return we(this,n),(a=t.call(this)).lc=e,a.fc=r,a.dc=i,a.type="where",a}return Se(n,[{key:"_apply",value:function(e){var t=yy(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new Wo(Ko.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){og(o,a);var s,c=[],l=xe(o);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.push(ag(r,e,f))}}catch(d){l.e(d)}finally{l.f()}u={arrayValue:{values:c}}}else u=ag(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||og(o,a),u=Iy(n,"where",o,"in"===a||"not-in"===a);var h=gs.create(i,a,u);return function(e,t){if(t.S()){var n=js(e);if(null!==n&&!n.isEqual(t.field))throw new Wo(Ko.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(t.field.toString(),"'"));var r=Fs(e);null!==r&&ug(e,t.field,r)}var i=function(e,t){var n,r=xe(e.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.indexOf(i.op)>=0)return i.op}}catch(d){r.e(d)}finally{r.f()}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new Wo(Ko.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Wo(Ko.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}(e,h),h}(e._query,0,t,e.firestore._databaseId,this.lc,this.fc,this.dc);return new zm(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new Ps(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}]),n}(Gy);var Yy=function(e){Ie(n,e);var t=Pe(n);function n(e,r){var i;return we(this,n),(i=t.call(this)).lc=e,i._c=r,i.type="orderBy",i}return Se(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new Wo(Ko.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Wo(Ko.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Ts(t,n);return function(e,t){if(null===Fs(e)){var n=js(e);null!==n&&ug(e,n,t.field)}}(e,r),r}(e._query,this.lc,this._c);return new zm(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new Ps(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}]),n}(Gy);var Xy=function(e){Ie(n,e);var t=Pe(n);function n(e,r,i){var a;return we(this,n),(a=t.call(this)).type=e,a.wc=r,a.mc=i,a}return Se(n,[{key:"_apply",value:function(e){return new zm(e.firestore,e.converter,qs(e._query,this.wc,this.mc))}}]),n}(Gy);var Zy=function(e){Ie(n,e);var t=Pe(n);function n(e,r,i){var a;return we(this,n),(a=t.call(this)).type=e,a.gc=r,a.yc=i,a}return Se(n,[{key:"_apply",value:function(e){var t=ig(e,this.type,this.gc,this.yc);return new zm(e.firestore,e.converter,function(e,t){return new Ps(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}]),n}(Gy);function $y(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Zy("startAt",t,!0)}function eg(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Zy("startAfter",t,!1)}var tg=function(e){Ie(n,e);var t=Pe(n);function n(e,r,i){var a;return we(this,n),(a=t.call(this)).type=e,a.gc=r,a.yc=i,a}return Se(n,[{key:"_apply",value:function(e){var t=ig(e,this.type,this.gc,this.yc);return new zm(e.firestore,e.converter,function(e,t){return new Ps(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}]),n}(Gy);function ng(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new tg("endBefore",t,!1)}function rg(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new tg("endAt",t,!0)}function ig(e,t,n,r){if(n[0]=et(n[0]),n[0]instanceof Fy)return function(e,t,n,r,i){if(!r)throw new Wo(Ko.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=xe(Vs(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(Vu(t,r.key));else{var c=r.data.field(s.field);if(Au(c))throw new Wo(Ko.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new Wo(Ko.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){u.e(f)}finally{u.f()}return new Is(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=yy(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new Wo(Ko.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new Wo(Ko.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!Us(e)&&-1!==c.indexOf("/"))throw new Wo(Ko.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(du.fromString(c));if(!Nu.isDocumentKey(l))throw new Wo(Ko.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new Nu(l);u.push(Vu(t,f))}else{var h=Iy(n,r,c);u.push(h)}}return new Is(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function ag(e,t,n){if("string"==typeof(n=et(n))){if(""===n)throw new Wo(Ko.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Us(t)&&-1!==n.indexOf("/"))throw new Wo(Ko.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(du.fromString(n));if(!Nu.isDocumentKey(r))throw new Wo(Ko.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Vu(e,new Nu(r))}if(n instanceof qm)return Vu(e,n._key);throw new Wo(Ko.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Mm(n),"."))}function og(e,t){if(!Array.isArray(e)||0===e.length)throw new Wo(Ko.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new Wo(Ko.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function ug(e,t,n){if(!n.isEqual(t))throw new Wo(Ko.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var sg=function(){function e(){we(this,e)}return Se(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Ou(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ku(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(wu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Bo()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return lu(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new ly(ku(e.latitude),ku(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=Su(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(xu(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=bu(e);return new uu(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=du.fromString(e);qo(Ml(n));var r=new _u(n.get(1),n.get(3)),i=new Nu(n.popFirst(5));return r.isEqual(t)||jo("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function cg(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var lg=function(e){Ie(n,e);var t=Pe(n);function n(e){var r;return we(this,n),(r=t.call(this)).firestore=e,r}return Se(n,[{key:"convertBytes",value:function(e){return new sy(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new qm(this.firestore,null,t)}}]),n}(sg),fg=function(){function e(t,n){we(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=yy(t)}return Se(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=hg(e,this._firestore),i=cg(r.converter,t,n),a=gy(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,dc.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=hg(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=et(t))||t instanceof uy?_y(this._dataReader,"WriteBatch.update",i._key,t,n,o):Ey(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,dc.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=hg(e,this._firestore);return this._mutations=this._mutations.concat(new Tc(t._key,dc.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new Wo(Ko.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function hg(e,t){if((e=et(e)).firestore!==t)throw new Wo(Ko.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var dg=function(e){Ie(n,e);var t=Pe(n);function n(e){var r;return we(this,n),(r=t.call(this)).firestore=e,r}return Se(n,[{key:"convertBytes",value:function(e){return new sy(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new qm(this.firestore,null,t)}}]),n}(sg);function pg(e){e=Fm(e,qm);var t=Fm(e.firestore,Zm),n=$m(t),r=new dg(t);return function(e,t){var n=new Ho;return e.asyncQueue.enqueueAndForget(Z(ee().mark((function r(){return ee().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=Z(ee().mark((function e(t,n,r){var i,a;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=zo(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.ci.Ls(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new Wo(Ko.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=Up(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,xm(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new By(t,r,e._key,n,new Vy(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function vg(e){e=Fm(e,zm);var t=Fm(e.firestore,Zm),n=$m(t),r=new dg(t);return function(e,t){var n=new Ho;return e.asyncQueue.enqueueAndForget(Z(ee().mark((function r(){return ee().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=Z(ee().mark((function e(t,n,r){var i,a,o,u,s;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ud(t,n,!0);case 3:i=e.sent,a=new av(n,i.li),o=a.Gu(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=Up(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,xm(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new zy(t,r,e,n)}))}function mg(e,t,n){e=Fm(e,qm);var r=Fm(e.firestore,Zm),i=cg(e.converter,t,n);return kg(r,[gy(yy(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,dc.none())])}function yg(e,t,n){e=Fm(e,qm);for(var r=Fm(e.firestore,Zm),i=yy(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return kg(r,[("string"==typeof(t=et(t))||t instanceof uy?_y(i,"updateDoc",e._key,t,n,o):Ey(i,"updateDoc",e._key,t)).toMutation(e._key,dc.exists(!0))])}function gg(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=et(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||Ym(n[s])||(u=n[s],s++);var c,l,f,h={includeMetadataChanges:u.includeMetadataChanges};if(Ym(n[s])){var d=n[s];n[s]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[s+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[s+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof qm)l=Fm(e.firestore,Zm),f=Ls(e._key.path),c={next:function(t){n[s]&&n[s](wg(l,e,t))},error:n[s+1],complete:n[s+2]};else{var p=Fm(e,zm);l=Fm(p.firestore,Zm),f=p._query;var v=new dg(l);c={next:function(e){n[s]&&n[s](new zy(l,v,p,e))},error:n[s+1],complete:n[s+2]},Hy(e._query)}return function(e,t,n,r){var i=new lm(r),a=new Zp(t,i,n);return e.asyncQueue.enqueueAndForget(Z(ee().mark((function t(){return ee().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Wp,t.next=3,Im(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.Ia(),e.asyncQueue.enqueueAndForget(Z(ee().mark((function t(){return ee().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Gp,t.next=3,Im(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}($m(l),f,h,c)}function bg(e,t){return function(e,t){var n=new lm(t);return e.asyncQueue.enqueueAndForget(Z(ee().mark((function t(){return ee().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){zo(e).Eu.add(t),t.next()},t.next=3,Im(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.Ia(),e.asyncQueue.enqueueAndForget(Z(ee().mark((function t(){return ee().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){zo(e).Eu.delete(t)},t.next=3,Im(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}($m(e=Fm(e,Zm)),Ym(t)?t:{next:t})}function kg(e,t){return function(e,t){var n=new Ho;return e.asyncQueue.enqueueAndForget(Z(ee().mark((function r(){return ee().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=vv,r.next=3,_m(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}($m(e),t)}function wg(e,t,n){var r=n.docs.get(t._key),i=new dg(e);return new By(e,i,t._key,r,new Vy(n.hasPendingWrites,n.fromCache),t.converter)}var Ag=function(e){Ie(n,e);var t=Pe(n);function n(e,r){var i;return we(this,n),(i=t.call(this,e,r))._firestore=e,i}return Se(n,[{key:"get",value:function(e){var t=this,r=hg(e,this._firestore),i=new dg(this._firestore);return yn(Te(n.prototype),"get",this).call(this,e).then((function(e){return new By(t._firestore,i,r._key,e._document,new Vy(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){we(this,e),this._firestore=t,this._transaction=n,this._dataReader=yy(t)}return Se(e,[{key:"get",value:function(e){var t=this,n=hg(e,this._firestore),r=new lg(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return Bo();var i=e[0];if(i.isFoundDocument())return new Fy(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new Fy(t._firestore,r,n._key,null,n.converter);throw Bo()}))}},{key:"set",value:function(e,t,n){var r=hg(e,this._firestore),i=cg(r.converter,t,n),a=gy(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=hg(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=et(t))||t instanceof uy?_y(this._dataReader,"Transaction.update",i._key,t,n,o):Ey(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=hg(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function Sg(e,t){return function(e,t){var n=new Ho;return e.asyncQueue.enqueueAndForget(Z(ee().mark((function r(){var i;return ee().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,function(e){return wm(e).then((function(e){return e.datastore}))}(e);case 2:i=r.sent,new dm(e.asyncQueue,i,t,n).run();case 4:case"end":return r.stop()}}),r)})))),n.promise}($m(e=Fm(e,Zm)),(function(n){return t(new Ag(e,n))}))}function xg(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Ay("arrayUnion",t)}function Eg(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Sy("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Lo=e}(jt),Dt(new ut("firestore",(function(e,n){var r=n.options,i=e.getProvider("app").getImmediate(),a=new Zm(i,new Yo(e.getProvider("auth-internal")),new eu(e.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:t},r),a._setSettings(r),a}),"PUBLIC")),Kt(Po,"3.4.8",e),Kt(Po,"3.4.8","esm2017")}();function _g(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Wo("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function Ig(){if("undefined"===typeof Uint8Array)throw new Wo("unimplemented","Uint8Arrays are not available in this environment.")}function Tg(){if("undefined"==typeof atob)throw new Wo("unimplemented","Blobs are unavailable in Firestore in this environment.")}var Cg=function(){function e(t){we(this,e),this._delegate=t}return Se(e,[{key:"toBase64",value:function(){return Tg(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return Ig(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return Tg(),new e(sy.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return Ig(),new e(sy.fromUint8Array(t))}}]),e}();function Ng(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=xe(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var Dg=function(){function e(){we(this,e)}return Se(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){oy(e=Fm(e,Zm));var n=$m(e),r=e._freezeSettings(),i=new sm;return ty(n,i,new om(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){oy(e=Fm(e,Zm));var t=$m(e),n=e._freezeSettings(),r=new sm;return ty(t,r,new um(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new Wo(Ko.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new Ho;return e._queue.enqueueAndForgetEvenWhileRestricted(Z(ee().mark((function n(){return ee().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=Z(ee().mark((function e(t){var n;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(pf.vt()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,pf.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(Wh(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),Pg=function(){function e(t,n,r){var i=this;we(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof _u||(this._appCompat=t)}return Se(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||Uo("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Bm(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return ny(this._delegate)}},{key:"disableNetwork",value:function(){return ry(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&Om("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new Ho;return e.asyncQueue.enqueueAndForget(Z(ee().mark((function n(){return ee().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=_v,n.next=3,_m(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}($m(e=Fm(e,Zm)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return bg(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new Wo("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new Hg(this,Wm(this._delegate,e))}catch(t){throw jg(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new Fg(this,Hm(this._delegate,e))}catch(t){throw jg(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new zg(this,function(e,t){if(e=Fm(e,Vm),Pm("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Wo(Ko.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new zm(e,null,function(e){return new Ps(du.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw jg(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return Sg(this._delegate,(function(n){return e(new Lg(t,n))}))}},{key:"batch",value:function(){var e=this;return $m(this._delegate),new Rg(new fg(this._delegate,(function(t){return kg(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return iy(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return ay(this._delegate,e).then((function(e){return e?new zg(t,e):null}))}}]),e}(),Og=function(e){Ie(n,e);var t=Pe(n);function n(e){var r;return we(this,n),(r=t.call(this)).firestore=e,r}return Se(n,[{key:"convertBytes",value:function(e){return new Cg(new sy(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return Fg.forKey(t,this.firestore,null)}}]),n}(sg);var Lg=function(){function e(t,n){we(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new Og(t)}return Se(e,[{key:"get",value:function(e){var t=this,n=Gg(e);return this._delegate.get(n).then((function(e){return new Bg(t._firestore,new By(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=Gg(e);return n?(_g("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=Gg(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=Gg(e);return this._delegate.delete(t),this}}]),e}(),Rg=function(){function e(t){we(this,e),this._delegate=t}return Se(e,[{key:"set",value:function(e,t,n){var r=Gg(e);return n?(_g("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=Gg(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=Gg(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),Mg=function(){function e(t,n,r){we(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return Se(e,[{key:"fromFirestore",value:function(e,t){var n=new qy(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new qg(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new Og(t),n),i.set(n,a)),a}}]),e}();Mg.INSTANCES=new WeakMap;var Fg=function(){function e(t,n){we(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new Og(t)}return Se(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new Hg(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new Hg(this.firestore,Wm(this._delegate,e))}catch(t){throw jg(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=et(e))instanceof qm&&Gm(this._delegate,e)}},{key:"set",value:function(e,t){t=_g("DocumentReference.set",t);try{return t?mg(this._delegate,e,t):mg(this._delegate,e)}catch(n){throw jg(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?yg(this._delegate,e):yg.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw jg(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return kg(Fm(e.firestore,Zm),[new Tc(e._key,dc.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=Ug(n),a=Vg(n,(function(t){return new Bg(e.firestore,new By(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return gg(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?pg(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Fm(e,qm);var t=Fm(e.firestore,Zm);return Cm($m(t),e._key,{source:"server"}).then((function(n){return wg(t,e,n)}))}(this._delegate):function(e){e=Fm(e,qm);var t=Fm(e.firestore,Zm);return Cm($m(t),e._key).then((function(n){return wg(t,e,n)}))}(this._delegate),t.then((function(e){return new Bg(n.firestore,new By(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(Mg.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new Wo("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new qm(n._delegate,r,new Nu(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new qm(n._delegate,r,t))}}]),e}();function jg(e,t,n){return e.message=e.message.replace(t,n),e}function Ug(e){var t,n=xe(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!Ng(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function Vg(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=Ng(e[0])?e[0]:Ng(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var Bg=function(){function e(t,n){we(this,e),this._firestore=t,this._delegate=n}return Se(e,[{key:"ref",get:function(){return new Fg(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return Wy(this._delegate,e._delegate)}}]),e}(),qg=function(e){Ie(n,e);var t=Pe(n);function n(){return we(this,n),t.apply(this,arguments)}return Se(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||Bo()}(void 0!==t),t}}]),n}(Bg),zg=function(){function e(t,n){we(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new Og(t)}return Se(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,Qy(this._delegate,function(e,t,n){var r=t,i=Uy("where",e);return new Jy(i,r,n)}(t,n,r)))}catch(i){throw jg(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,Qy(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Uy("orderBy",e);return new Yy(n,t)}(t,n)))}catch(r){throw jg(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,Qy(this._delegate,function(e){return jm("limit",e),new Xy("limit",e,"F")}(t)))}catch(n){throw jg(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,Qy(this._delegate,function(e){return jm("limitToLast",e),new Xy("limitToLast",e,"L")}(t)))}catch(n){throw jg(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,Qy(this._delegate,$y.apply(void 0,arguments)))}catch(t){throw jg(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,Qy(this._delegate,eg.apply(void 0,arguments)))}catch(t){throw jg(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,Qy(this._delegate,ng.apply(void 0,arguments)))}catch(t){throw jg(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,Qy(this._delegate,rg.apply(void 0,arguments)))}catch(t){throw jg(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return Qm(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?vg(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Fm(e,zm);var t=Fm(e.firestore,Zm),n=$m(t),r=new dg(t);return Nm(n,e._query,{source:"server"}).then((function(n){return new zy(t,r,e,n)}))}(this._delegate):function(e){e=Fm(e,zm);var t=Fm(e.firestore,Zm),n=$m(t),r=new dg(t);return Hy(e._query),Nm(n,e._query).then((function(n){return new zy(t,r,e,n)}))}(this._delegate),t.then((function(e){return new Wg(n.firestore,new zy(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=Ug(n),a=Vg(n,(function(t){return new Wg(e.firestore,new zy(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return gg(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(Mg.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),Kg=function(){function e(t,n){we(this,e),this._firestore=t,this._delegate=n}return Se(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new qg(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),Wg=function(){function e(t,n){we(this,e),this._firestore=t,this._delegate=n}return Se(e,[{key:"query",get:function(){return new zg(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new qg(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new Kg(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new qg(n._firestore,r))}))}},{key:"isEqual",value:function(e){return Wy(this._delegate,e._delegate)}}]),e}(),Hg=function(e){Ie(n,e);var t=Pe(n);function n(e,r){var i;return we(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return Se(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new Fg(this.firestore,e):null}},{key:"doc",value:function(e){try{return new Fg(this.firestore,void 0===e?Hm(this._delegate):Hm(this._delegate,e))}catch(t){throw jg(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=Fm(e.firestore,Zm),r=Hm(e),i=cg(e.converter,t);return kg(n,[gy(yy(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,dc.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new Fg(t.firestore,e)}))}},{key:"isEqual",value:function(e){return Gm(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(Mg.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(zg);function Gg(e){return Fm(e,qm)}var Qg,Jg=function(){function e(){we(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=Oe(uy,n)}return Se(e,[{key:"isEqual",value:function(e){return(e=et(e))instanceof uy&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(vu.keyField().canonicalString())}}]),e}(),Yg=function(){function e(t){we(this,e),this._delegate=t}return Se(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new wy("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new by("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=xg.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=Eg.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new xy("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),Xg={Firestore:Pg,GeoPoint:ly,Timestamp:uu,Blob:Cg,Transaction:Lg,WriteBatch:Rg,DocumentReference:Fg,DocumentSnapshot:Bg,Query:zg,QueryDocumentSnapshot:qg,QuerySnapshot:Wg,CollectionReference:Hg,FieldPath:Jg,FieldValue:Yg,setLogLevel:function(e){!function(e){Ro.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};(function(e,t){e.INTERNAL.registerComponent(new ut("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},Xg)))})(Qg=vn,(function(e,t){return new Pg(e,t,new Dg)})),Qg.registerVersion("@firebase/firestore-compat","0.1.17");vn.initializeApp({apiKey:"AIzaSyAh9jgMTEVvPcqlJpymy61JUjKiSXk2xow",authDomain:"ecommerce-project-be400.firebaseapp.com",projectId:"ecommerce-project-be400",storageBucket:"ecommerce-project-be400.appspot.com",messagingSenderId:"408329194794",appId:"1:408329194794:web:b0643f483b05869ede2253"});var Zg=vn.firestore(),$g=function(){var e=Z(ee().mark((function e(t){var n,r,i,a;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=Zg.collection(t),e.next=4,n.get();case 4:return r=e.sent,i=r.docs,a=i.map((function(e){return he({id:e.id},e.data())})),e.abrupt("return",a);case 10:return e.prev=10,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return");case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),eb=function(){var e=Z(ee().mark((function e(t,n){var r,i,a;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=Zg.collection(t),i=r.doc(n.id),e.next=5,i.get();case 5:return a=e.sent,e.abrupt("return",he({id:a.id},a.data()));case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}(),tb=function(){var e=Z(ee().mark((function e(t,n){var r,i,a;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=Zg.collection(t),i=r.doc(n.id),e.next=5,i.update(n);case 5:return a=e.sent,e.abrupt("return",a);case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}(),nb=function(){var e=Z(ee().mark((function e(t,n,r){var i,a,o;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,eb(t,{id:n});case 3:if(i=e.sent,!((a=i.quantity-r)<0)){e.next=7;break}throw new Error("checkoutProduct(): resulting quantity below zero");case 7:return o=he(he({},i),{},{quantity:a}),e.next=10,tb(t,o);case 10:return e.abrupt("return",e.sent);case 13:e.prev=13,e.t0=e.catch(0),console.error(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n,r){return e.apply(this,arguments)}}(),rb=function(){var e=Z(ee().mark((function e(t){var n,r,i,a,o;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Array.isArray(t)&&0!==t.length&&!t.some((function(e){return"string"!==typeof e}))){e.next=2;break}return e.abrupt("return",[]);case 2:return e.prev=2,e.next=5,Zg.collection("metadata").doc("firestore").get();case 5:return n=e.sent,r=n.data().collections.map((function(e){return Zg.collection(e)})),i=r.map((function(e){return e.where(vn.firestore.FieldPath.documentId(),"in",t)})),e.next=10,Promise.all(i.map((function(e){return e.get()})));case 10:return a=e.sent,o=a.map((function(e){var t=[];return e.forEach((function(e){t.push(he({id:e.id},e.data()))})),t})).flat(2),e.abrupt("return",o);case 15:e.prev=15,e.t0=e.catch(2),console.error(e.t0);case 18:case"end":return e.stop()}}),e,null,[[2,15]])})));return function(t){return e.apply(this,arguments)}}(),ib="HomePage_HomePage__Heading__rpRov",ab="HomePage_HomePage__flexContainer__LP2KI",ob="HomePage_HomePage__Link__WHMZz",ub="HomePage_HomePage__favouritesSection__k9IPM",sb="HomePage_HomePage__clearFavourites__83q8q",cb=n.p+"static/media/film-image.6798092e3ed529476204.jpg",lb=n.p+"static/media/film-camera-image.3e6074f314e66ef112bc.jpg",fb=function(e){var t=[];function n(){t=JSON.parse(localStorage.getItem("favourites"))}function i(){n(),u(t)}null===localStorage.getItem("favourites")?localStorage.setItem("favourites",JSON.stringify(t)):n();var a=s((0,r.useState)(t),2),o=a[0],u=a[1];return{listOfFavourites:o,getListOfFavourites:i,clearFavourites:function(){t=[],localStorage.setItem("favourites",JSON.stringify(t)),i()}}},hb=function(){var e=s((0,r.useState)(new Array(3).fill(null)),2),t=e[0],n=e[1],i=fb(),a=i.listOfFavourites,o=i.clearFavourites;(0,r.useEffect)((function(){function e(){return(e=Z(ee().mark((function e(t){return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=n,e.next=3,rb(t);case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(t){e.apply(this,arguments)}(a)}),[a]);return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)("h1",{className:ib,children:"kchn Film Store"}),(0,re.jsxs)("section",{"aria-label":"Navigation Links",className:ab,children:[(0,re.jsxs)(Y,{className:ob,to:"film",children:[(0,re.jsx)("img",{src:cb,alt:"Roll of film"}),(0,re.jsx)("h2",{children:"Shop Film"})]}),(0,re.jsxs)(Y,{className:ob,to:"cameras",children:[(0,re.jsx)("img",{src:lb,alt:"Film camera"}),(0,re.jsx)("h2",{children:"Shop Film Cameras"})]})]}),(0,re.jsxs)("section",{"aria-label":"Favourite Products",className:ub,children:[(0,re.jsx)("h2",{children:"Your Favourite Products"}),(0,re.jsx)("button",{className:sb,onClick:function(){o()},children:"Clear Favourites"}),(0,re.jsx)(ie,{children:(null===t||void 0===t?void 0:t.length)>=0?t.map((function(e,t){return(0,re.jsx)(ke,{product:e},(null===e||void 0===e?void 0:e.id)||t)})):null})]})]})},db=hb,pb="ProductsPage_ProductsPage__heading__pe7cB",vb="Carousel_CarouselItem__IcVHg",mb="Carousel_CarouselItem__image__6LQs8",yb="Carousel_CarouselItem__text__kRRQS",gb=n(197),bb=function(e){var t=(0,r.useRef)();(0,r.useEffect)((function(){t.current=e.featuredProducts}),[]);var n=s(ye(),3),i=n[0],a=n[1],o=n[2];return(0,r.useEffect)((function(){JSON.stringify(e.featuredProducts)!==JSON.stringify(t.current)&&(o(),t.current=e.featuredProducts)}),[e.featuredProducts]),(0,re.jsxs)(r.Fragment,{children:[(0,re.jsx)(gb.lr,{style:i.imgStyle,showThumbs:!1,showStatus:!1,children:e.featuredProducts.map((function(e,t){var n,r;return null!==e&&void 0!==e&&e.images?(0,re.jsx)("div",{style:i.visibleAfterImageLoads,className:vb,children:(0,re.jsxs)(Y,{to:"".concat(e.id),children:[(0,re.jsx)("img",{src:(null===(n=e.images)||void 0===n?void 0:n.featured)||(null===(r=e.images)||void 0===r?void 0:r.thumb),alt:e.title,className:mb,onLoad:0===t?a:null},e.id),(0,re.jsxs)("div",{className:yb,children:[(0,re.jsx)("h3",{children:e.title||(0,re.jsx)(me,{})}),(0,re.jsx)("p",{children:null!==e&&void 0!==e&&e.price?"$".concat(e.price.toFixed(2)):(0,re.jsx)(me,{})})]})]})},e.id):(0,re.jsx)(me,{height:"20rem"})}))}),(0,re.jsx)(me,{height:"20rem",style:i.visibleBeforeImageLoads})]})},kb=function(){var e=s((0,r.useState)(Array(6).fill(null)),2),t=e[0],n=e[1],i=U().category;return(0,r.useEffect)((function(){function e(){return(e=Z(ee().mark((function e(){var t;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$g(i);case 2:t=e.sent,n(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}n(Array(6).fill(null)),function(){e.apply(this,arguments)}()}),[i]),(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)("h2",{className:pb,children:i.charAt(0).toUpperCase()+i.slice(1)}),(0,re.jsx)(bb,{featuredProducts:t.filter((function(e){return!(null===e||void 0===e||!e.isFeatured)}))}),(0,re.jsx)(ie,{children:t.map((function(e,t){var n;return(0,re.jsx)(ke,{product:e},null!==(n=null===e||void 0===e?void 0:e.id)&&void 0!==n?n:t)}))})]})},wb=kb,Ab={ProductPage__container:"ProductPage_ProductPage__container__XTKbM",ProductPage__breadcrumb:"ProductPage_ProductPage__breadcrumb__zpDFv",ProductPage__image:"ProductPage_ProductPage__image__CKjiM",ProductPage__imagePlaceholder:"ProductPage_ProductPage__imagePlaceholder__Iiyjl",ProductPage__info:"ProductPage_ProductPage__info__LWvDW",ProductPage__price:"ProductPage_ProductPage__price__+Ipse",ProductPage__title:"ProductPage_ProductPage__title__6JcO6",ProductPage__desc:"ProductPage_ProductPage__desc__jQJ4g",ProductPage:"ProductPage_ProductPage__aZLiL",ProductPage__favButton:"ProductPage_ProductPage__favButton__tIHpa"};var Sb=function(e){var t=e.currentProductData;return e.desc,(0,re.jsx)("section",{"aria-label":"description",className:Ab.ProductPage__desc,children:null!==t&&void 0!==t&&t.desc?t.desc.split(/\\n/).map((function(e,t){return(0,re.jsx)("p",{children:e},t)})):(0,re.jsx)(me,{count:5})})},xb="VariantButton_VariantButton__pwrc5",Eb="VariantButton_VariantButton__active__i33xZ";var _b=function(e){var t=e.variant,n=e.variantButtonClicked,r=e.isActive;return(0,re.jsx)("button",{onClick:function(e){return n(e)},className:"".concat(xb," ").concat(r?Eb:""),children:t},t)};var Ib=function(e){var t=e.currentVariant,n=e.variantButtonClicked,i=e.currentProductData;return(0,re.jsx)(r.Fragment,{children:t?i.variants.map((function(e){return(0,re.jsx)(_b,{variant:e,variantButtonClicked:n,isActive:e===t},e)})):(0,re.jsxs)(r.Fragment,{children:[(0,re.jsx)(me,{width:"100px",height:"40px"}),(0,re.jsx)(me,{width:"100px",height:"40px"}),(0,re.jsx)(me,{width:"100px",height:"40px"})]})})},Tb="QuantityInput_QuantityInput__4h1rV",Cb="QuantityInput_QuantityInput__inputContainer__DVk71";var Nb=n.p+"static/media/arrow.a0f81365cc9f563fa19c740cd2aa20ab.svg",Db=function(e){return(0,re.jsxs)("div",{className:Tb,children:[(0,re.jsx)("label",{htmlFor:"number",children:(0,re.jsx)("strong",{children:"Quantity"})}),(0,re.jsxs)("div",{className:Cb,children:[(0,re.jsx)("button",{onClick:e.handleDecrement,children:(0,re.jsx)("img",{src:Nb,alt:"cart quantity minus one"})}),(0,re.jsx)("input",{type:"number",id:"number",inputMode:"numeric",pattern:"[0-9]*",value:e.value,onChange:e.onInput,invalid:e.invalid}),(0,re.jsx)("button",{onClick:e.handleIncrement,children:(0,re.jsx)("img",{src:Nb,alt:"cart quantity plus one"})})]})]})},Pb=function(e){null===localStorage.getItem("cart")&&localStorage.setItem("cart",JSON.stringify([]));var t=function(){return JSON.parse(localStorage.getItem("cart")).some((function(t){return t.productId===e}))},n=s((0,r.useState)(t()),2),i=n[0],a=n[1];return[i,function(e){if(t())console.error("Tried to add product that was already in cart.");else{var n=JSON.parse(localStorage.getItem("cart"));n.push(e),localStorage.setItem("cart",JSON.stringify(n)),a(t())}}]},Ob=function(e,t){switch(t.type){case"setCurrentVariant":return he(he({},e),{},{currentVariant:t.payload});case"setCurrentQuantity":return he(he({},e),{},{currentQuantity:t.payload,totalPrice:e.productPrice*t.payload});case"setProductPrice":return he(he({},e),{},{productPrice:t.payload,totalPrice:e.currentQuantity*t.payload});default:throw new Error}},Lb=function(){var e,t,n,i=s((0,r.useState)({}),2),a=i[0],o=i[1],u=U(),c={currentVariant:"",currentQuantity:1,productPrice:0,totalPrice:0,productId:u.id,category:u.category},l=s((0,r.useReducer)(Ob,c),2),f=l[0],h=l[1],d=s(ye(),2),p=d[0],v=d[1],m=be(u.id),y=m.isFavourite,g=m.pushFavouritedItem,b=m.removeFavouritedItem,k=s(Pb(u.id),2),w=k[0],A=k[1];return(0,r.useEffect)((function(){function e(){return(e=Z(ee().mark((function e(){var t;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,eb(u.category,u);case 2:t=e.sent,h({type:"setCurrentVariant",payload:t.variants[0]}),h({type:"setProductPrice",payload:t.price}),o(t);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[u]),(0,re.jsxs)(re.Fragment,{children:[(0,re.jsxs)("p",{className:Ab.ProductPage__breadcrumb,children:[(0,re.jsx)(Y,{to:"/".concat(u.category),children:u.category.charAt(0).toUpperCase()+u.category.slice(1)})," ",">"," ",(0,re.jsx)(Y,{to:"/".concat(u.category,"/").concat(u.id),children:a.title||(0,re.jsx)(me,{inline:!0,width:"5rem"})})]}),(0,re.jsxs)("div",{className:Ab.ProductPage__container,children:[(0,re.jsxs)("div",{className:Ab.ProductPage__image,children:[(0,re.jsx)("img",{src:null===(e=a.images)||void 0===e?void 0:e[null===f||void 0===f?void 0:f.currentVariant],onLoad:v,style:p.visibleAfterImageLoads,alt:a.title}),(0,re.jsx)(me,{style:p.visibleBeforeImageLoads,className:Ab.ProductPage__imagePlaceholder})]}),(0,re.jsxs)("div",{className:Ab.ProductPage__info,children:[(0,re.jsx)("h2",{className:Ab.ProductPage__title,children:a.title||(0,re.jsx)(me,{})}),(0,re.jsx)("p",{className:Ab.ProductPage__price,children:null!==a&&void 0!==a&&a.price?"$".concat(null===(t=a.price)||void 0===t?void 0:t.toFixed(2)):(0,re.jsx)(me,{})}),(0,re.jsx)(Sb,{currentProductData:a}),a.quantity>0?(0,re.jsxs)(re.Fragment,{children:[" ",(0,re.jsx)("hr",{}),(0,re.jsx)(Ib,{currentVariant:null===f||void 0===f?void 0:f.currentVariant,variantButtonClicked:function(e){h({type:"setCurrentVariant",payload:e.target.innerText})},currentProductData:a}),(0,re.jsx)(Db,{value:f.currentQuantity,handleIncrement:function(){f.currentQuantity<(null===a||void 0===a?void 0:a.quantity)&&h({type:"setCurrentQuantity",payload:f.currentQuantity+1})},handleDecrement:function(){f.currentQuantity>1&&h({type:"setCurrentQuantity",payload:f.currentQuantity-1})},onInput:function(e){1<=e.target.value&&e.target.value<=(null===a||void 0===a?void 0:a.quantity)&&h({type:"setCurrentQuantity",payload:parseInt(e.target.value)})}}),(0,re.jsx)("p",{className:Ab.ProductPage__quantity,children:a?(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)("strong",{children:"In stock: "})," ",null===a||void 0===a?void 0:a.quantity," left"]}):(0,re.jsx)(me,{})}),(0,re.jsxs)("p",{children:[(0,re.jsx)("strong",{children:"Total Price"}),": $",null===(n=f.totalPrice)||void 0===n?void 0:n.toFixed(2)]}),(0,re.jsx)("button",{className:Ab.ProductPage__favButton,onClick:function(){A(f)},disabled:w,children:w?"Added to Cart":"Add to Cart"}),(0,re.jsx)("hr",{})]}):(0,re.jsx)("p",{className:Ab.ProductPage__quantity,children:(0,re.jsx)("strong",{children:"Out of stock"})}),y?(0,re.jsx)("button",{className:Ab.ProductPage__favButton,onClick:function(){b(a.id)},children:"unfavourite this product"}):(0,re.jsx)("button",{className:Ab.ProductPage__favButton,onClick:function(){g(a.id)},children:"favourite this product"})]})]})]})},Rb=Lb,Mb={DesktopNavList:"HamburgerNavList_DesktopNavList__uYiki",HamburgerNavList__container:"HamburgerNavList_HamburgerNavList__container__KIq-s",HamburgerNavList:"HamburgerNavList_HamburgerNavList__xb0u-",NavLink:"HamburgerNavList_NavLink__8Krcf",HamburgerNavList__button:"HamburgerNavList_HamburgerNavList__button__4lLRD",HamburgerNavList__Burger:"HamburgerNavList_HamburgerNavList__Burger__UDbtD",ClickBlocker:"HamburgerNavList_ClickBlocker__Us43A",isNotActive:"HamburgerNavList_isNotActive__CQLj-"};var Fb=n.p+"static/media/burger.af7efc61ab1b270cf664e71243fb4025.svg";var jb=function(){var e=s((0,r.useState)(!1),2),t=e[0],n=e[1],i=function(){n(!t)};return(0,re.jsxs)(r.Fragment,{children:[(0,re.jsxs)("ul",{className:Mb.DesktopNavList,children:[(0,re.jsx)("li",{children:(0,re.jsx)(Y,{className:Mb.NavLink,to:"/film",children:"Film"})}),(0,re.jsx)("li",{children:(0,re.jsx)(Y,{className:Mb.NavLink,to:"/cameras",children:"Cameras"})})]}),(0,re.jsx)("button",{"aria-haspopup":"true","aria-expanded":t,className:"".concat(Mb.HamburgerNavList__button," ").concat(Mb.HamburgerNavList),onClick:i,children:(0,re.jsx)("img",{src:Fb,alt:"Open and close Nav",className:Mb.HamburgerNavList__Burger})}),(0,re.jsx)("div",{role:"navigation",className:"".concat(Mb.HamburgerNavList," ").concat(Mb.HamburgerNavList__container," ").concat(t?Mb.isActive:Mb.isNotActive),children:(0,re.jsxs)("ul",{className:Mb.HamburgerNavList__list,children:[(0,re.jsx)("li",{children:(0,re.jsx)(Y,{className:Mb.NavLink,to:"/film",onClick:i,children:"Film"})}),(0,re.jsx)("li",{children:(0,re.jsx)(Y,{className:Mb.NavLink,to:"/cameras",onClick:i,children:"Cameras"})})]})}),(0,re.jsx)("div",{onClick:i,"aria-hidden":!0,className:"".concat(Mb.HamburgerNavList," ").concat(Mb.ClickBlocker," ").concat(t?Mb.isActive:Mb.isNotActive)})]})};var Ub=n.p+"static/media/logo.16ca00a906720b392eb7bf984f61e631.svg",Vb="NavBar_NavBar__M20x6",Bb="NavBar_NavBar__container__JiPzu",qb="NavBar_NavBar__icon__-QvQM",zb="NavBar_NavBar__iconInverted__5WefS",Kb=function(){return(0,re.jsx)("div",{className:Vb,children:(0,re.jsxs)("nav",{className:"".concat(Vb," ").concat(Bb),children:[(0,re.jsx)(Y,{to:"/",children:(0,re.jsx)("img",{src:Ub,className:qb,alt:"store logo"})}),(0,re.jsx)(jb,{}),(0,re.jsx)(Y,{to:"/cart",children:(0,re.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAMAAADDpiTIAAAAA3NCSVQICAjb4U/gAAAACXBIWXMAAA/cAAAP3AFfAHc3AAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAwBQTFRF////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACyO34QAAAP90Uk5TAAECAwQFBgcICQoLDA0ODxAREhMUFRYXGBkaGxwdHh8gISIjJCUmJygpKissLS4vMDEyMzQ1Njc4OTo7PD0+P0BBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWltcXV5fYGFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6e3x9fn+AgYKDhIWGh4iJiouMjY6PkJGSk5SVlpeYmZqbnJ2en6ChoqOkpaanqKmqq6ytrq+wsbKztLW2t7i5uru8vb6/wMHCw8TFxsfIycrLzM3Oz9DR0tPU1dbX2Nna29zd3t/g4eLj5OXm5+jp6uvs7e7v8PHy8/T19vf4+fr7/P3+6wjZNQAAGpJJREFUGBntwQmgTIX+B/Dv3MXFvXEpS2QLCUkLoZKUUEqprImyl5KQvGRLlpJQSZRXKZSdFMpTWhCeLWQpW7Lv+11mvv/e0vtXnPM7M3POzJwzv88HUEoppZRSSimllFJKKaWUUkop5XGFO72zaPuedYveaXYJVLzxtfjGz9/5l7RPg4onNZfzz06+XQ0qXvhe4AWs65IPKh7knsoLO/vhrVCelzCXxrY8WwjK216kqczpdyZAedddAUp29S8O5VEJG2mB/7P7k6G8qBUt2vdSWSjv2ULrvnwoJ5S3lGNQjoyqBOUlTzJYy9qlQXnGLAbv5LgboDxiDUOy9sl8UF6wmyE6+0EtKPc7y9Bt7lkQyuUOMRyZ0+onQLnZCoZpZ79iUO41hWHzf9ooCcqlutMOe4eWgXKlUrRHYFGLFCgXWkW7HB51FZTrPEobLW2bCuUuCWtopxPjqkK5yu202Zon0qFcZBDtdmbCLVCu4ZtB+21+piCUS6TOogMyp9ZLgHIF3/N+OmFH38ugXOGW7+mI7Ln3JUG5wb2r6Iy9PXNCuUHVcSfoiJ0tfVBukNZ2GR2xoiiUO1w16jAdsL0MlEuktFgUoO32VoJyjTJD9tJuBy6Gco+kRp/6aa93oVylWN8dtFUtKHdJqDctk/b5MQHKbQo+s5m2qQnlQrd8cIb2GAnlSulPrKEddkG5VdWxJxi+66FcK7XNUobrMSg3u2rkYYblLSh3S2m+KMDQLYVyvdJD9jJUp3xQ7pd039xshqYslCdc1ncHQ/EglEck1JuayaANhPKOAj02MUhzoDyl5oQzDMZOKI9J77yaQUiH8pwqY0/QqlpQHpTaZgmt6QLlTRVHHKIF46G8KqXZPwKUrITysNKTKTibCOVhN1FSAcrD8gQoaA7lZT9TMBTKy2ZQMA/Ky/pRsAfKy+6jpACUh5WipA6Uh/mOU9Adysu+oWAClJe9QcFaKC9rT0FmDigPu4GSylAelttPQSuELP3eIW9P+2Le1PdGv9yvx2OtHqhf87pyl+XLARVDNlEwHKFJav19Ni8o6+juzau+mT99wphXBvTs/Ejju2pdf2Wx/ClQ0fAxBQsRCl+HHQxS9vE9W9d89/nMD8e+OvDZJx5t0uDWqhVKXJILylHPUXAQIcg3h3bxn9z387qlC2dNHDfixb91advsntuqXVWqYKoPyhYNKCmCoJXfTqcFTu3f9sOyf8yZ/M6owb27tm9xb53qlS4vlJYAFZzLKLkTwSq6i1Fz5uCODcu/nPvx318f+vzTHR66744bK5e5NE8ilJHDFPRCkPL+wJhz7vCuH1d+9emUd994qW/3Tg/fX+/ma68omp4MhUUUTEaQxtE1Mo78sumfX8+b9v6bw/o/83jrB++seV25y/LlQDwZQcFGBKdqgG6XdezXLau/XTDjg7eGD+jZ+ZHGd9WqUr74xTnhSY9QkJ0LQVlGr8o+sfentd99PvPDsa8O7PVkm6Z3176hYskCueBu11JSBcG4hvEmcHLfz+uWLpw96e2Rg557ql3zhrdVu6pUwVQf3CEli4K2CMYwqn8LnD6wff33iz75aPxrg3t3bd/i3jo1ri5d+KIExJofKHgNwdhNZersoZ0bl3859+O/vz60T7eOLRvVvemaskXyJCFqPqRgMYJQgCok5w7v+nHl4s+mvjf65X49Hmt1f72br72iaHoinPcMBccQhBupbJS5ccagW+CsupSUgHWtqOy24cm8cFAhShrCuk5U9jvQEA7aR0EfWNecygljU+GYBRRMh3UNqByx6iI45WUKfoJ1lamcMT8JDnmIgkAaLPMdonLG3+GQqyi5EdZNo3JIIzgj6RwFj8G61lQO2ZQEZ6yi4C1Yl7yTyiEd4Yx3KViKIDxG5ZCdcEZXCk75YF3KD1QOKQ9H1KakLIJQ7gSVM56EI/JT8iCC0SRA5YjZcMYvFAxEUFpkUjlhPZwxl4I5CE7dk1QO+BnOGETBTgSp2DQq++2BM5pQko5g3fGFn8pmB+GMcpTUQvCK9PhkUwaVjZbAGQmnKeiC0CReWvaam+o2atmxW5+hb7w75dOvVmzceegsVWjegEO+p2A87JRwUeHSV9eoc2+L9l17Dx71zuQ5/1j2w7b9pwJU5trCIeMoWIkI8OUuULLiDbXvbtrmyV4vjhg3cdYXS9b+tPdENtV/VYRDOlNwNhHRk/Pi4uWr1Lqr8SOdew54ZcyE6fO/WbV599FMxp2tcMrNlFRAzElOL3rFtTfXu//hTj36vTz6vamfLV75467D5+hdL8EpeQIUNIdbJOa5tEzlG++476EOTz8/5LXxH32y6Pv12w+cpgdUg2O2UTAULudLLVjqqmq33dOs3VPPDRr59qTZC5eu+3nfST/dY7cPjplJwTx4VK5LSlSoemuDJo8+8ewLw9/6YMaCb1dv+fVYFmPQ63BOfwr2IL7kyHdZuetq3vlg68ef6T/szfenzfv6n5t+OZLBaKoN5zSipAAUkJS3SNlrbqrbqGXHbn2Gvv73j+d+uXzDjoNnGAkHE+GcyympA2UoIa3Q5ZVq1Lm3RfuuvQePemfynH8s+2Hb/lMB2mk8HOQ7QUF3qGD5chcoWfGG2nc3bfNkr4Gvjv1w5uffrdm653g2Q9IATvqWgglQdknJX6x8lVp3NX6kc88Br4yZMH3+N6uOU3I8BU4aTcFaKAdtoGQSHNWBgswcUI4pR9GDcFQ1SipDOeZvlJxNhaNy+yloBeWYFZTMgsM2UzAcyinFKWoFh02hYCGUU7pSkpUPDutNwUEop3xNyedw2t2UFIFyRkE/JZ3gtGKU3AnljA6U+AvDcYcp6AXljPmUfAvnfUnBZChHpGdS0g3OG0nBRihHtKSoJJz3KAXZuaCcMIOSVYiA6yipAuWA3Kcp6Y0ISMmioC2UA+6nqDwiYT0Fr0E54ENKfkRETKRgMZT9chyjZBAioicFx6DsV5+i6xER9SgpAWW7cZTsQGQUpqQhlN0S9lMyAhGyn4I+UHa7haKaiJDPKZgGZbeRlOxLQIQMo2ArlN12UjIWkdKSgkAalL2qUFQPkVKJkhpQ9hpMydFkREpSBgWPQdlrEyUfIHJWU/AWlK0qUnQfIuddCpZC2aoPJadzIXK6UnDKB2Wn1ZRMQwTVpqQslI1KUdQCEXQxJQ9C2ag7JRl5EUm/UDAQykbfUfIZImouBXOg7HNpgJJ2iKhBFOyEss9jlGQXQEQ1oSQdyjZfUPIVIqscJbWg7JI/i5IuiKyEMxR0gbJLa4qKIcK+p2A8lF1mU7IckTaOgpVQNkk7S0kvRFpnCs4mQtmjMUVXINJupqQClD0mU/IDIi4PJc2hbJFygpIBiLxtFAyFskUDiioj8mZSMA/KFuMp+RlR0J+CPVB2SDxEyTBEQSNKCkDZoDZFNRAFl1NSB8oGr1Pyqw9R4DtBQXeo8Pl2UzIaUfEtBROgwledotsRFaMpWAsVvpcpOZyEqOhAQWYOqLBtpeRdREc1SipDhetqiu5BdKT6KWgFFa7+lJxMQZRspmA4VLjWUfIRomUKBQuhwlSGoiaIlt4UHIQKU09KzqUhWu6mpAhUeJZRMgdRU4ySO6HCUjRAySOIniMU9IIKyxOUZOVH9HxJwWSosCyiZCGiaCQFG6HCcUk2JY8jih6lIDsXVBjaUBIogii6jpIqUGGYS8kSRFNKFgVtoUJ30TlKeiCq1lPwGlTomlF0OaJqIgWLoUI3hZI1iK6eFByDClnOU5T0RXTVo6QEVKgaUlQR0VWYkoZQoXqPks2Itv0U9IEKUdIRSoYg2j6nYBpUiO6gqCqibRgFW6FCNIaSXYi6lhQE0qBC4ttLyShEXSVKakCF5CaKaiHqkjMo6AQVkuGUHEhE9K2mYAxUSLZR8jZiwHsULIEKxbUU3YkY8DQFp3xQIRhIybEciAG3UVIWKgQbKJmIWHAxJQ9CBa8cRQ8gJuymYCBU8P5GyZnciAmfUjAHKngrKJmB2DCYgp1QQStOUUvEhqaUpEMF6ylKMtMRG66kpBZUsBZTMh8xIvEMBV2gglTQT0kHxIrlFIyHClJ7SvyFECvepmAlVJDmUfI1YsYTFJxNhApK3kxKuiJm1KSkAlRQHqKoBGJGXkqaQwVlOiUrEUO2UzAUKhi5T1PyHGLILArmQQWjEUVXIoYMoGAPVDA+pGQjYsn9lBSAsi75GCUDEUtKU1IHyrr6FF2LWOI7QUF3KOvGUbIdseU7CiZAWZawn5LhiC1vUrAWyrJbKLoJsaUjBZk5oKwaScneBMSW6pRUhrJqJyVjEGNS/RS0grKoCkV3INZsoWA4lEWDKTmShFgzlYKFUBZtouR9xJznKTgIZU0Fiu5FzLmHkiJQljxPyamciDnFKbkTypJVlExFDDpCQS8oK0pR1Awx6CsKJkNZ0Y2ScxchBo2iYCOUFd9SMhexqA0F2bmgZIX9lLRBLLqekipQsk6UZF+CWJQzi4K2ULLPKVmE2LSBgtegRPmyKHkCsWkSBYuhRK0oCRRFbHqWgmNQotmULEOMqk9JCShB6llKeiJGXUpJQyhBY4rKIFbtp6APlGAyJesQsz6nYBqUuZQTlPRHzBpGwVYocw0ouhoxqyUFgTQoU+Mp2YrYVYmSGlBmEg9S8hJiV3IGBZ2gzNSmqBpi2GoKxkCZeZ2S3T7EsPcoWAJlwrebktcRy56m4JQPylg1imojlt1GSRkoYy9RcjARsewSSh6AMraVkvGIbbspGAhlqBJFDRDbPqVgDpShfpScSEFsG0zBTihDaymZjBjXlJJ0KAOlKWqMGHclJbWgDDxDydlUxLjEMxR0gTKwlJJZiHnLKRgPdWFFA5S0Qsx7m4KVUBfWmZKsfIh5T1BwNhHqghZR8jliX01KKkBdyMXZlHRC7MtLSXOoC2lDib8wXGA7BUOhLmQuJd/CDWZRMA/qAi46R0k3uMEACvZAXUAzikrCDe6npADU+aZQsgquUJqSOlDnyXmSkufhCr6TFHSHOk9DiirAHb6jYALUed6jZBNc4k0K1kL9VdJhSgbBJTpSkJkD6i/qUHQ9XKI6JZWh/uJNSnbCLVL9FLSC+jPfHkpGwDW2UDAc6s9upKgmXGMqBQuh/uwVSvYnwDWep+Ag1J9to2Qs3OMeSopA/dE1FNWDexSn5E6oP3qBkqPJcJGjFPSC+qP1lHwAN/mKgslQf3AFRY3gJqMo2Aj1B70oOZ0LbtKGguycUP9vBSXT4SrXU1IF6n+KUfQQXCVnNgVtof7nKUoy8sJdNlDwGtT/LKbkM7jMJAoWQ/2uoJ+SdnCZZyk4CvW79pRkF4DL1KekBNR/zaPkK7jNpZQ0hPqPvBmUdIHrHKCgD9R/PERRMbjOFxRMg/qP6ZQsh/u8QsFWqH/LdZqSXnCfhykIpEH9SyOKroD7XE1JDah/+YCS9XCh5AwKOkH9JvkoJS/AjdZQMAbqN/UougZu9D4FS6B+M5aSn+FK3Sg46YNCwn5KhsGVbqekDBRqUlQDrnQJJQ9AYQQle3xwp18peAEKOykZDZf6jILZUNdTdDtcaggFO6AGUXI4CS7VjJIX+se9nZS8C7cqT2WDe+BWiWeownYyJ1xrBVXYPoZ7vUMVtqZwryepwnUuDe51C1W4PoGL5aUK1yNwsx1U4cm6GG42myo8C+FqL1CF53G42gNUYQkUgauVoQrLErib7yRVOHrA5ZZQheNyuNwYqjCsgdt1ogpDX7hdDaowXAW3SwtQhWwL3G8LVciGwv3GU4WsKtyvCVWodvngfvmzqEL0LLzgParQHEiFF5QPUIXkGXjDG1Sh2J8Kb0haQBWCx+AVedZTBa0/vKPEPqog9YeXVN1FFZT+8JZcfU9TWba5KTznsg8DVJbsaJMIL6r66noqwZnVkzvmgGddfHWdJs3+YzdNDGwWn+qX9CFOlKaJIzmgPK4vTYyF8rotNFETyuNuoIntPiiPe40mXoTyuKQDNHEllMc1oImVUF43mSa6QnncRWdoLLsQlMe1pon5UF73BU08BOVxRfw0dioVyuO608QHUF63mibqQXlcRZrYmwjlcUNoYgSUx/l20cT1UB53K01shPK6d2jiOSiPSzlGY4ESUB73IE18DeV1s2iiA5TH5c+gsXP5oDyuE01Mh/K6b2miEZTHlaKJIzmgPO55mhgL5XWbaKImlMdVoYntPiiPG0UTg6A8Lmk/TZSH8rg7aWIllNdNpImuUB6XdprGsgtBedzDNDEfyusW0ERLKI8rnE1jp1KhPO5pmvgAyuv+SRP1oDyuAk3sTYTyuME08fNb6jfDezQvDo/y7aCyYmW3XPCiW6gs+rUdPGgclWWTcsJrUo5SWbc0FR5zP1UwpvngLTOogvIMPCVfBlVQThaCl3SgCtKb8JJFVEE6ngPekeMsVbDqwjtqUAXtJXjH01RBmwTv6E0VtK/gHc9SBe07eEc3qqBNhXfcRRW0UfCOtCyqYDWFh3xHFaTMPPCQdlRBmg0vSdpMFZTsq+ApTamCMhYeM54qCGtS4TGJn1BZtq8EPCf3TCqL1pWEFz18lMqC7HfS4E2XDtxFJTg7pQK8K+GO3m99unTZ/9tEu6xaFjEHaJNTy/7sy49GNk5DPElYRLuMQqSUOkab+Osgzg2gfRohMnIsp232X4q4druf9jlaEhExkjb6KhFxrNA+2un7ZETAfbTVi4hfCQtprxFwXsmjtFWgLuJWX9rtXjgt+Xva7EARxKlb/bTbkeJw2HDa7usExCXfD7Tfh3BWuWzaryXiUhM6wF8OjvqQDticiDiUsIFOmAgnXemnEx5GHGpOq479uGTraVrkvxIOmkiL/PtWL/8lixZtSUTcSdhEC45Nblo6N/4lT/mO8zJowSQ450o/Ldg2onbRJPzGV/CGfqtpRSvEnZaUTaubjD/K0/R7ivzl4ZhJFJ1+uTL+pES3vRRtTUScSdxCyTfVcR5fk58omQynlPdTkP1OEZwnte9JSlojzjxMwYH7cEHJ3TNpzn8lHDKJgmUVcUEFJ1KwNQHxZR7NrSsJI7ccpLn+cEauMzQ3IQVGevhprhriSq6zNDUrDcZK/UBTK+CMBjTl7wkTDY7T1ADElQY0NdEHMxetpZlAIThiNE21hqnrTtPMCsSV0TSzPCfMFd9HM4/AETtoZggEDwRoIlAQ8WQ7TfxaBJIa52hiKpxQkWZm+iDpRzOtEUfK00TgRsg60cTxZDigJ038nAqRbx5NfIw40p0mJsOCxPU0URsOWEwTTWFBhWwaO5qI+LGQxjJKwYoGNPEK7JeeRWPLfbDibZq4GXEjKYPGRsCaL2lsFezXkCZqwZIip2msL+JGERoLFIU1DWjsAOz3OI2tgEXjaGwc4sZ1NLYcFuU8RUOBJNjuBRrrA4vuorE5iBt30VhvWDWTxorAduNorDIsSjlJQ8sRN9rSWEVY1YbGroftPqGhnbBsKg39grjRm4YOwrLLaawBbLeChibAss40lOlDvHidhtbAspQADbWF7X6hoUGw7D4auxjxYioNfQbrDtBQb9jNl0lDj8OyG2isIuLFtzQ0HtatpqHXYbdLaOxeWFaMxm5HvNhCQ4Nh3TwamgK7VaCxarAsB421QLzYQEOjYd0SGpoIu5WlsbqwrACNNUa8WEZDM2DdLhp6C3YrTGNtYNnVNFYf8eILGloGyxKyaGgY7JZKY31gWX0auwnxYiYN7YRlhWmsH+zm89PQW7DsURqrjHjxPg35C8Cqu2jsadjuOA0th2Wv0VgpxIt+NNYGVo2hsftguzU0FLgUVu2koawkxItmNDYbVu2msSthu49orD0supbGNiFuXEtjZ3LDmutoLCsZthtAY3Ng0QAam424kRqgsXaw5g0a2wz7Naexc5fBkhzbaOwlxI9tNPZrblhRJpPGZsB+V9PEu7DkKZpohfgxmiZ6w4qpNNEe9vPtpjF/JViQ9xCN+QshftxBE8cLQFadJvyF4IDRNDEPFgyhie8QR5KP0cSCREjy/0QTS+CEujTTBaLbsmiiJ+LJJJoZCUHylzTTE05IPkYT2fUhKH2YZq5APGlKU+1gbhxNlYMjJtPMsfIwlWcDzfyIuJIng2Yy28BE4iia+hHOaEpTv1wLEwWX0NQQxJf5NPdqIoykL6C5IXBGngyaOv0gDF2zk+aqI750omBeflxY+U0UVIdD5tNcoF8iLqzxKZrb40N8KeKn4EiPFJyvwGuZFOzxwSEdKdlwNy7gms8pGYN48x5FO1om48/y9D5OUVc4JfevFH11I/7i8gl+SrLKIt4UP0fZsUlN8+B3hTvOy6BsWw44ph0t2D6iViJ+V7nfKlrwJuLPMFqS8cOC94b0HDZx0eYALWkO5yRuoCVHVsx+q99zr09fsoeWnCqE+JPvKJ2w0gcH3UNHDEA86kkn3AZHfU0H7E9DPMr5C+33GZxVjQ54AvHpUdrOXwkOm0rb/ZSM+JSwnnZ7F04rm0m7NUW8uimD9tpdGI57njb7xIe41Ya2OlMFEfAxbbXhIsSxEbRTM0RC7n/SRocuRzxLXED7vIjIuGwvbZNVG/EtfTPtMtOHCKl+jnZ5DPHuiqO0x7o0REwr2uRNqLrZtMOBkoigYbTFoiQodMhm+I7dhEhK+Ig2WJMf6jf1jzJcm8shsnwDAgzXtFSofyu3meFZkI6Ia3yaYQn080H9V/o8hmNkIqLg2l0Mw6kHoP5f4nCGLKMtoqPQdwzZjspQf9L6HENz4GZES8q7DNHXBaD+ovp6hmJhCURR56MMQeYryVDnSWizm8FaWx/Rlf/VDAbr49JQF5Trb8cYjF2tExB1JScGGIzFN0AZumRkBq062jMnYsJ1C2nZhnugTF0+OUArzg3Pj5hRbw0t2dM+EUpSuvs3fpo7O7ddQcSShJtf2UrBgfENc0JZUrDtJ2dp5MiEB1IRgyr2Xh6gka2v3JwAFYTU+ycc4vm2j6qdhJhV9LEF53ge//LeFaFCULhWh+EzF634cfehXRuWfTFlcKtq6Yh1iaUbdBv76dert+47sG3tt/Pef+6BiilQSimllFJKKaWUUkoppZRSSimlbPd/98qv62HdWCAAAAAASUVORK5CYII=",alt:"shopping cart icon",className:"".concat(qb," ").concat(zb)})})]})})},Wb=function(){null===localStorage.getItem("cart")&&localStorage.setItem("cart",JSON.stringify([]));var e=function(){return JSON.parse(localStorage.getItem("cart"))},t=s((0,r.useState)(e()),2),n=t[0],i=t[1];return[n,function(t){var n=e().map((function(e){return t.productId===e.productId?t:e}));localStorage.setItem("cart",JSON.stringify(n)),i(e())},function(t){var n=e().filter((function(e){return e.productId!==t}));localStorage.setItem("cart",JSON.stringify(n)),i(e())},function(){localStorage.setItem("cart",JSON.stringify([])),i(e())}]},Hb="Cart_Cart__h1__dW3UZ",Gb="Cart_Cart__summary__LrbHJ",Qb="Cart_Cart__summary__title__0orZv",Jb="Cart_Cart__summary__total__85aR9",Yb="Cart_Cart__summary__checkout__YH-hl",Xb="CartItem_CartItem__zCDWe",Zb="CartItem_CartItem__thumb__IXP7s",$b="CartItem_CartItem__contentWrapper__VWr7F",ek="CartItem_CartItem__contentWrapperTitle__Uw4ME",tk="CartItem_CartItem__contentWrapperNoShrink__yLUwZ",nk=function(e){var t,n,i,a=e.cartItem,o=e.updateCartItem,u=e.removeCartItem,c=s(ye(),2),l=c[0],f=c[1],h=s((0,r.useState)({}),2),d=h[0],p=h[1];(0,r.useEffect)((function(){function e(){return(e=Z(ee().mark((function e(){var t;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,eb(a.category,{id:a.productId});case 2:t=e.sent,p(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[a.category,a.productId]);return(0,re.jsxs)("div",{className:Xb,children:[(0,re.jsxs)(Y,{to:"/".concat(a.category,"/").concat(a.productId),children:[(0,re.jsx)("img",{src:null===(t=d.images)||void 0===t?void 0:t.thumb,alt:d.title,className:Zb,onLoad:f,style:l.visibleAfterImageLoads}),(0,re.jsx)(me,{className:Zb,style:l.visibleBeforeImageLoads})]}),(0,re.jsxs)("div",{className:"".concat($b," ").concat(ek),children:[(0,re.jsx)(Y,{to:"/".concat(a.category,"/").concat(a.productId),children:(0,re.jsx)("h3",{children:d.title||(0,re.jsx)(me,{height:"1.5rem",width:"7rem"})})}),(0,re.jsx)("p",{children:a.currentVariant})]}),(0,re.jsxs)("div",{className:"".concat($b," ").concat(tk),children:[(0,re.jsx)(Db,{value:a.currentQuantity,handleIncrement:function(){if(a.currentQuantity+1<=d.quantity){var e=he(he({},a),{},{currentQuantity:a.currentQuantity+1,totalPrice:a.productPrice*(a.currentQuantity+1)});o(e)}},handleDecrement:function(){if(a.currentQuantity-1>=1){var e=he(he({},a),{},{currentQuantity:a.currentQuantity-1,totalPrice:a.productPrice*(a.currentQuantity-1)});o(e)}else a.currentQuantity<=1&&u(a.productId)},onInput:function(e){if(0<e.target.value&&e.target.value<=d.quantity){var t=he(he({},a),{},{currentQuantity:parseInt(e.target.value),totalPrice:a.productPrice*parseInt(e.target.value)});o(t)}else 0===e.target.value&&u(a.productId)}}),(0,re.jsxs)("p",{children:[d.quantity," left"]})]}),(0,re.jsxs)("div",{className:"".concat($b," ").concat(tk),children:[(0,re.jsxs)("p",{children:[(0,re.jsx)("strong",{children:"Item price: "}),"$",null===(n=d.price)||void 0===n?void 0:n.toFixed(2)]}),(0,re.jsxs)("p",{children:[(0,re.jsx)("strong",{children:"Total Price: "}),"$",null===(i=a.totalPrice)||void 0===i?void 0:i.toFixed(2)]})]})]})},rk=function(){var e=s(Wb(),4),t=e[0],n=e[1],i=e[2],a=e[3],o=s((0,r.useState)(),2),u=o[0],c=o[1];(0,r.useEffect)((function(){var e=t.reduce((function(e,t){return e+t.totalPrice}),0);c(e)}),[t]);var l=function(){var e=Z(ee().mark((function e(){var n;return ee().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.length){e.next=2;break}return e.abrupt("return");case 2:return n=t.map((function(e){return nb(e.category,e.productId,e.currentQuantity)})),e.next=5,Promise.all(n);case 5:a();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,re.jsxs)(re.Fragment,{children:[(0,re.jsx)("h1",{className:Hb,children:"Your Shopping Cart"}),(0,re.jsxs)("div",{children:[t.map((function(e){return(0,re.jsx)(nk,{cartItem:e,updateCartItem:n,removeCartItem:i},e.productId)})),0===t.length?"Nothing here.":null]}),(0,re.jsxs)("div",{className:Gb,children:[(0,re.jsx)("h3",{className:Qb,children:"Cart Summary"}),(0,re.jsx)("table",{children:(0,re.jsxs)("tbody",{children:[(0,re.jsxs)("tr",{children:[(0,re.jsx)("td",{children:(0,re.jsx)("p",{children:"Subtotal:"})}),(0,re.jsx)("td",{children:(0,re.jsx)("p",{children:0===u?null:"$"+(null===u||void 0===u?void 0:u.toFixed(2))})})]}),(0,re.jsxs)("tr",{children:[(0,re.jsx)("td",{children:(0,re.jsx)("p",{children:"GST:"})}),(0,re.jsx)("td",{children:(0,re.jsx)("p",{children:0===u?null:"$"+(.1*u).toFixed(2)})})]}),(0,re.jsxs)("tr",{children:[(0,re.jsx)("td",{}),(0,re.jsx)("td",{className:Jb,children:(0,re.jsx)("p",{children:(0,re.jsx)("strong",{children:0===u?null:"$"+(null===u||void 0===u?void 0:u.toFixed(2))})})})]})]})}),(0,re.jsx)("button",{className:Yb,onClick:l,children:"Checkout"}),(0,re.jsx)("p",{children:"Note: this will mutate the database."})]})]})};var ik=function(){return(0,re.jsxs)(J,{basename:"/ecommerce-project",children:[(0,re.jsx)(Kb,{}),(0,re.jsx)("main",{className:a,children:(0,re.jsxs)(K,{children:[(0,re.jsx)(q,{path:"/",element:(0,re.jsx)(db,{})}),(0,re.jsx)(q,{path:"/cart",element:(0,re.jsx)(rk,{})}),(0,re.jsx)(q,{path:"/:category",element:(0,re.jsx)(wb,{})}),(0,re.jsx)(q,{path:"/:category/:id",element:(0,re.jsx)(Rb,{})})]})})]})};i.createRoot(document.getElementById("root")).render((0,re.jsx)(ik,{}))}()}();
//# sourceMappingURL=main.31e57d03.js.map